exports.id=100,exports.ids=[100],exports.modules={42:a=>{function b(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(a){return void c(a)}h.done?b(i):Promise.resolve(i).then(d,e)}a.exports=function(a){return function(){var c=this,d=arguments;return new Promise(function(e,f){var g=a.apply(c,d);function h(a){b(g,e,f,h,i,"next",a)}function i(a){b(g,e,f,h,i,"throw",a)}h(void 0)})}},a.exports.__esModule=!0,a.exports.default=a.exports},693:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.detectOrigin=function(a,b){var c;return(null!=(c=process.env.VERCEL)?c:process.env.AUTH_TRUST_HOST)?`${"http"===b?"http":"https"}://${a}`:process.env.NEXTAUTH_URL}},1093:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,b.getServerSession=h,b.unstable_getServerSession=i;var d=c(48291),e=c(42560);async function f(a,b,c){var f,g,h,i,j,k,l,m;let{nextauth:n,...o}=a.query;null!=c.secret||(c.secret=null!=(f=null!=(g=null==(h=c.jwt)?void 0:h.secret)?g:process.env.NEXTAUTH_SECRET)?f:process.env.AUTH_SECRET);let p=await (0,d.AuthHandler)({req:{body:a.body,query:o,cookies:a.cookies,headers:a.headers,method:a.method,action:null==n?void 0:n[0],providerId:null==n?void 0:n[1],error:null!=(i=a.query.error)?i:null==n?void 0:n[1]},options:c});if(b.status(null!=(j=p.status)?j:200),null==(k=p.cookies)||k.forEach(a=>(0,e.setCookie)(b,a)),null==(l=p.headers)||l.forEach(a=>b.setHeader(a.key,a.value)),p.redirect){if((null==(m=a.body)?void 0:m.json)!=="true"){b.status(302).setHeader("Location",p.redirect),b.end();return}return b.json({url:p.redirect})}return b.send(p.body)}async function g(a,b,f){var g,h,i;null!=f.secret||(f.secret=null!=(g=process.env.NEXTAUTH_SECRET)?g:process.env.AUTH_SECRET);let{headers:j,cookies:k}=c(86802),l=null==(h=await b.params)?void 0:h.nextauth,m=Object.fromEntries(a.nextUrl.searchParams),n=await (0,e.getBody)(a),o=await (0,d.AuthHandler)({req:{body:n,query:m,cookies:Object.fromEntries((await k()).getAll().map(a=>[a.name,a.value])),headers:Object.fromEntries(await j()),method:a.method,action:null==l?void 0:l[0],providerId:null==l?void 0:l[1],error:null!=(i=m.error)?i:null==l?void 0:l[1]},options:f}),p=(0,e.toResponse)(o),q=p.headers.get("Location");return(null==n?void 0:n.json)==="true"&&q?(p.headers.delete("Location"),p.headers.set("Content-Type","application/json"),new Response(JSON.stringify({url:q}),{status:o.status,headers:p.headers})):p}async function h(...a){var b,f;let g,i,j,k=0===a.length||1===a.length;if(k){j=Object.assign({},a[0],{providers:[]});let{headers:b,cookies:d}=c(86802);g={headers:Object.fromEntries(await b()),cookies:Object.fromEntries((await d()).getAll().map(a=>[a.name,a.value]))},i={getHeader(){},setCookie(){},setHeader(){}}}else g=a[0],i=a[1],j=Object.assign({},a[2],{providers:[]});null!=(b=j).secret||(b.secret=null!=(f=process.env.NEXTAUTH_SECRET)?f:process.env.AUTH_SECRET);let{body:l,cookies:m,status:n=200}=await (0,d.AuthHandler)({options:j,req:{action:"session",method:"GET",cookies:g.cookies,headers:g.headers}});if(null==m||m.forEach(a=>(0,e.setCookie)(i,a)),l&&"string"!=typeof l&&Object.keys(l).length){if(200===n)return k&&delete l.expires,l;throw Error(l.message)}return null}async function i(...a){return await h(...a)}b.default=function(...a){var b;return 1===a.length?async(b,c)=>null!=c&&c.params?await g(b,c,a[0]):await f(b,c,a[0]):null!=(b=a[1])&&b.params?g(...a):f(...a)}},1796:a=>{let b;b=Buffer.isEncoding("base64url")?(a,b="utf8")=>Buffer.from(a,b).toString("base64url"):(a,b="utf8")=>Buffer.from(a,b).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),a.exports.decode=a=>Buffer.from(a,"base64"),a.exports.encode=b},1842:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=(...a)=>{let b,c=a.filter(Boolean);if(0===c.length||1===c.length)return!0;for(let a of c){let c=Object.keys(a);if(!b||0===b.size){b=new Set(c);continue}for(let a of c){if(b.has(a))return!1;b.add(a)}}return!0}},1945:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.calculateJwkThumbprintUri=b.calculateJwkThumbprint=void 0;let d=c(28162),e=c(67040),f=c(69817),g=c(74855),h=c(16217),i=(a,b)=>{if("string"!=typeof a||!a)throw new f.JWKInvalid(`${b} missing or invalid`)};async function j(a,b){let c;if(!(0,h.default)(a))throw TypeError("JWK must be an object");if(null!=b||(b="sha256"),"sha256"!==b&&"sha384"!==b&&"sha512"!==b)throw TypeError('digestAlgorithm must one of "sha256", "sha384", or "sha512"');switch(a.kty){case"EC":i(a.crv,'"crv" (Curve) Parameter'),i(a.x,'"x" (X Coordinate) Parameter'),i(a.y,'"y" (Y Coordinate) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x,y:a.y};break;case"OKP":i(a.crv,'"crv" (Subtype of Key Pair) Parameter'),i(a.x,'"x" (Public Key) Parameter'),c={crv:a.crv,kty:a.kty,x:a.x};break;case"RSA":i(a.e,'"e" (Exponent) Parameter'),i(a.n,'"n" (Modulus) Parameter'),c={e:a.e,kty:a.kty,n:a.n};break;case"oct":i(a.k,'"k" (Key Value) Parameter'),c={k:a.k,kty:a.kty};break;default:throw new f.JOSENotSupported('"kty" (Key Type) Parameter missing or unsupported')}let j=g.encoder.encode(JSON.stringify(c));return(0,e.encode)(await (0,d.default)(b,j))}b.calculateJwkThumbprint=j,b.calculateJwkThumbprintUri=async function(a,b){null!=b||(b="sha256");let c=await j(a,b);return`urn:ietf:params:oauth:jwk-thumbprint:sha-${b.slice(-3)}:${c}`}},2678:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.bitLength=void 0;let d=c(69817),e=c(39469);function f(a){switch(a){case"A128GCM":return 128;case"A192GCM":return 192;case"A256GCM":case"A128CBC-HS256":return 256;case"A192CBC-HS384":return 384;case"A256CBC-HS512":return 512;default:throw new d.JOSENotSupported(`Unsupported JWE Algorithm: ${a}`)}}b.bitLength=f,b.default=a=>(0,e.default)(new Uint8Array(f(a)>>3))},3420:(a,b,c)=>{var d=c(13615);a.exports=function(a,b){if("function"!=typeof b&&null!==b)throw TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),b&&d(a,b)},a.exports.__esModule=!0,a.exports.default=a.exports},3421:(a,b,c)=>{"use strict";Object.defineProperty(b,"I",{enumerable:!0,get:function(){return g}});let d=c(71237),e=c(55088),f=c(17679);async function g(a,b,c,g){if((0,d.isNodeNextResponse)(b)){var h;b.statusCode=c.status,b.statusMessage=c.statusText;let d=["set-cookie","www-authenticate","proxy-authenticate","vary"];null==(h=c.headers)||h.forEach((a,c)=>{if("x-middleware-set-cookie"!==c.toLowerCase())if("set-cookie"===c.toLowerCase())for(let d of(0,f.splitCookiesString)(a))b.appendHeader(c,d);else{let e=void 0!==b.getHeader(c);(d.includes(c.toLowerCase())||!e)&&b.appendHeader(c,a)}});let{originalResponse:i}=b;c.body&&"HEAD"!==a.method?await (0,e.pipeToNodeResponse)(c.body,i,g):i.end()}}},4396:(a,b,c)=>{"use strict";c.d(b,{zM:()=>h});var d=c(46493),e=c(93352);class f extends e.pe{static [d.i]="PgBooleanBuilder";constructor(a){super(a,"boolean","PgBoolean")}build(a){return new g(a,this.config)}}class g extends e.Kl{static [d.i]="PgBoolean";getSQLType(){return"boolean"}}function h(a){return new f(a??"")}},4964:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817);b.default=function(a){switch(a){case"HS256":return"sha256";case"HS384":return"sha384";case"HS512":return"sha512";default:throw new d.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},5061:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511),e=c(74855);b.default=function(a,b,c,f,g,h){let i=(0,e.concat)(a,b,c,(0,e.uint64be)(a.length<<3)),j=(0,d.createHmac)(`sha${f}`,g);return j.update(i),j.digest().slice(0,h>>3)}},5839:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0});let e=c(55511),f=c(28354),g=c(88311),h=c(4964),i=c(26274),j=c(22896);d=e.sign.length>3?(0,f.promisify)(e.sign):e.sign,b.default=async(a,b,c)=>{let f=(0,j.default)(a,b,"sign");if(a.startsWith("HS")){let b=e.createHmac((0,h.default)(a),f);return b.update(c),b.digest()}return d((0,g.default)(a),c,(0,i.default)(a,f))}},6032:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=c(97272).default},6194:(a,b,c)=>{"use strict";c.d(b,{iv:()=>o,pD:()=>n,DZ:()=>t,_k:()=>r,mm:()=>p,rl:()=>q,I$:()=>function a(b,c,d,g,h=a=>a){let j={};for(let[k,l]of g.entries())if(l.isJson){let e=c.relations[l.tsKey],g=d[k],i="string"==typeof g?JSON.parse(g):g;j[l.tsKey]=(0,f.is)(e,n)?i&&a(b,b[l.relationTableTsKey],i,l.selection,h):i.map(c=>a(b,b[l.relationTableTsKey],c,l.selection,h))}else{let a,b=h(d[k]),c=l.field;a=(0,f.is)(c,e.V)?c:(0,f.is)(c,i.Xs)?c.decoder:c.sql.decoder,j[l.tsKey]=null===b?null:a.mapFromDriverValue(b)}return j},W0:()=>s});var d=c(7284),e=c(80228),f=c(46493),g=c(31375),h=c(48689),i=c(20862);function j(a){return(0,i.ll)`${a} asc`}function k(a){return(0,i.ll)`${a} desc`}class l{constructor(a,b,c){this.sourceTable=a,this.referencedTable=b,this.relationName=c,this.referencedTableName=b[d.XI.Symbol.Name]}static [f.i]="Relation";referencedTableName;fieldName}class m{constructor(a,b){this.table=a,this.config=b}static [f.i]="Relations"}class n extends l{constructor(a,b,c,d){super(a,b,c?.relationName),this.config=c,this.isNullable=d}static [f.i]="One";withFieldName(a){let b=new n(this.sourceTable,this.referencedTable,this.config,this.isNullable);return b.fieldName=a,b}}class o extends l{constructor(a,b,c){super(a,b,c?.relationName),this.config=c}static [f.i]="Many";withFieldName(a){let b=new o(this.sourceTable,this.referencedTable,this.config);return b.fieldName=a,b}}function p(){return{and:h.Uo,between:h.Tq,eq:h.eq,exists:h.t2,gt:h.gt,gte:h.RO,ilike:h.B3,inArray:h.RV,isNull:h.kZ,isNotNull:h.Pe,like:h.mj,lt:h.lt,lte:h.wJ,ne:h.ne,not:h.AU,notBetween:h.o8,notExists:h.KJ,notLike:h.RK,notIlike:h.q1,notInArray:h.KL,or:h.or,sql:i.ll}}function q(){return{sql:i.ll,asc:j,desc:k}}function r(a,b){1===Object.keys(a).length&&"default"in a&&!(0,f.is)(a.default,d.XI)&&(a=a.default);let c={},e={},h={};for(let[i,j]of Object.entries(a))if((0,f.is)(j,d.XI)){let a=(0,d.Lf)(j),b=e[a];for(let e of(c[a]=i,h[i]={tsName:i,dbName:j[d.XI.Symbol.Name],schema:j[d.XI.Symbol.Schema],columns:j[d.XI.Symbol.Columns],relations:b?.relations??{},primaryKey:b?.primaryKey??[]},Object.values(j[d.XI.Symbol.Columns])))e.primary&&h[i].primaryKey.push(e);let k=j[d.XI.Symbol.ExtraConfigBuilder]?.(j[d.XI.Symbol.ExtraConfigColumns]);if(k)for(let a of Object.values(k))(0,f.is)(a,g.hv)&&h[i].primaryKey.push(...a.columns)}else if((0,f.is)(j,m)){let a,f=(0,d.Lf)(j.table),g=c[f];for(let[c,d]of Object.entries(j.config(b(j.table))))if(g){let b=h[g];b.relations[c]=d,a&&b.primaryKey.push(...a)}else f in e||(e[f]={relations:{},primaryKey:a}),e[f].relations[c]=d}return{tables:h,tableNamesMap:c}}function s(a,b,c){if((0,f.is)(c,n)&&c.config)return{fields:c.config.fields,references:c.config.references};let e=b[(0,d.Lf)(c.referencedTable)];if(!e)throw Error(`Table "${c.referencedTable[d.XI.Symbol.Name]}" not found in schema`);let g=a[e];if(!g)throw Error(`Table "${e}" not found in schema`);let h=c.sourceTable,i=b[(0,d.Lf)(h)];if(!i)throw Error(`Table "${h[d.XI.Symbol.Name]}" not found in schema`);let j=[];for(let a of Object.values(g.relations))(c.relationName&&c!==a&&a.relationName===c.relationName||!c.relationName&&a.referencedTable===c.sourceTable)&&j.push(a);if(j.length>1)throw c.relationName?Error(`There are multiple relations with name "${c.relationName}" in table "${e}"`):Error(`There are multiple relations between "${e}" and "${c.sourceTable[d.XI.Symbol.Name]}". Please specify relation name`);if(j[0]&&(0,f.is)(j[0],n)&&j[0].config)return{fields:j[0].config.references,references:j[0].config.fields};throw Error(`There is not enough information to infer relation "${i}.${c.fieldName}"`)}function t(a){return{one:function(b,c){return new n(a,b,c,c?.fields.reduce((a,b)=>a&&b.notNull,!0)??!1)},many:function(b,c){return new o(a,b,c)}}}},6683:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.fromX509=b.fromSPKI=b.fromPKCS8=b.toPKCS8=b.toSPKI=void 0;let d=c(55511),e=c(79428),f=c(72927),g=c(25066),h=c(94415),i=c(89722),j=(a,b,c)=>{let e;if((0,f.isCryptoKey)(c)){if(!c.extractable)throw TypeError("CryptoKey is not extractable");e=d.KeyObject.from(c)}else if((0,g.default)(c))e=c;else throw TypeError((0,h.default)(c,...i.types));if(e.type!==a)throw TypeError(`key is not a ${a} key`);return e.export({format:"pem",type:b})};b.toSPKI=a=>j("public","spki",a),b.toPKCS8=a=>j("private","pkcs8",a),b.fromPKCS8=a=>(0,d.createPrivateKey)({key:e.Buffer.from(a.replace(/(?:-----(?:BEGIN|END) PRIVATE KEY-----|\s)/g,""),"base64"),type:"pkcs8",format:"der"}),b.fromSPKI=a=>(0,d.createPublicKey)({key:e.Buffer.from(a.replace(/(?:-----(?:BEGIN|END) PUBLIC KEY-----|\s)/g,""),"base64"),type:"spki",format:"der"}),b.fromX509=a=>(0,d.createPublicKey)({key:a,type:"spki",format:"pem"})},6766:(a,b,c)=>{"use strict";c.d(b,{p:()=>f});var d=c(46493),e=c(93352);class f extends e.pe{static [d.i]="PgIntColumnBaseBuilder";generatedAlwaysAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"always",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(a){if(a){let{name:b,...c}=a;this.config.generatedIdentity={type:"byDefault",sequenceName:b,sequenceOptions:c}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}},7284:(a,b,c)=>{"use strict";c.d(b,{HE:()=>k,Io:()=>o,Lf:()=>p,XI:()=>n,e:()=>g});var d=c(46493),e=c(35071);let f=Symbol.for("drizzle:Schema"),g=Symbol.for("drizzle:Columns"),h=Symbol.for("drizzle:ExtraConfigColumns"),i=Symbol.for("drizzle:OriginalName"),j=Symbol.for("drizzle:BaseName"),k=Symbol.for("drizzle:IsAlias"),l=Symbol.for("drizzle:ExtraConfigBuilder"),m=Symbol.for("drizzle:IsDrizzleTable");class n{static [d.i]="Table";static Symbol={Name:e.E,Schema:f,OriginalName:i,Columns:g,ExtraConfigColumns:h,BaseName:j,IsAlias:k,ExtraConfigBuilder:l};[e.E];[i];[f];[g];[h];[j];[k]=!1;[m]=!0;[l]=void 0;constructor(a,b,c){this[e.E]=this[i]=a,this[f]=b,this[j]=c}}function o(a){return a[e.E]}function p(a){return`${a[f]??"public"}.${a[e.E]}`}},7706:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(98781),e=c(75598),f=c(90070),g=c(11434),h=c(67040),i=c(69817),j=c(2678),k=c(80518),l=c(84634),m=c(16217),n=c(37009);b.default=async function(a,b,c,o,p){switch((0,l.default)(a,b,"decrypt"),a){case"dir":if(void 0!==c)throw new i.JWEInvalid("Encountered unexpected JWE Encrypted Key");return b;case"ECDH-ES":if(void 0!==c)throw new i.JWEInvalid("Encountered unexpected JWE Encrypted Key");case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{let f,g;if(!(0,m.default)(o.epk))throw new i.JWEInvalid('JOSE Header "epk" (Ephemeral Public Key) missing or invalid');if(!e.ecdhAllowed(b))throw new i.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let l=await (0,k.importJWK)(o.epk,a);if(void 0!==o.apu){if("string"!=typeof o.apu)throw new i.JWEInvalid('JOSE Header "apu" (Agreement PartyUInfo) invalid');try{f=(0,h.decode)(o.apu)}catch{throw new i.JWEInvalid("Failed to base64url decode the apu")}}if(void 0!==o.apv){if("string"!=typeof o.apv)throw new i.JWEInvalid('JOSE Header "apv" (Agreement PartyVInfo) invalid');try{g=(0,h.decode)(o.apv)}catch{throw new i.JWEInvalid("Failed to base64url decode the apv")}}let n=await e.deriveKey(l,b,"ECDH-ES"===a?o.enc:a,"ECDH-ES"===a?(0,j.bitLength)(o.enc):parseInt(a.slice(-5,-2),10),f,g);if("ECDH-ES"===a)return n;if(void 0===c)throw new i.JWEInvalid("JWE Encrypted Key missing");return(0,d.unwrap)(a.slice(-6),n,c)}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":if(void 0===c)throw new i.JWEInvalid("JWE Encrypted Key missing");return(0,g.decrypt)(a,b,c);case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{let d;if(void 0===c)throw new i.JWEInvalid("JWE Encrypted Key missing");if("number"!=typeof o.p2c)throw new i.JWEInvalid('JOSE Header "p2c" (PBES2 Count) missing or invalid');let e=(null==p?void 0:p.maxPBES2Count)||1e4;if(o.p2c>e)throw new i.JWEInvalid('JOSE Header "p2c" (PBES2 Count) out is of acceptable bounds');if("string"!=typeof o.p2s)throw new i.JWEInvalid('JOSE Header "p2s" (PBES2 Salt) missing or invalid');try{d=(0,h.decode)(o.p2s)}catch{throw new i.JWEInvalid("Failed to base64url decode the p2s")}return(0,f.decrypt)(a,b,c,o.p2c,d)}case"A128KW":case"A192KW":case"A256KW":if(void 0===c)throw new i.JWEInvalid("JWE Encrypted Key missing");return(0,d.unwrap)(a,b,c);case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{let d,e;if(void 0===c)throw new i.JWEInvalid("JWE Encrypted Key missing");if("string"!=typeof o.iv)throw new i.JWEInvalid('JOSE Header "iv" (Initialization Vector) missing or invalid');if("string"!=typeof o.tag)throw new i.JWEInvalid('JOSE Header "tag" (Authentication Tag) missing or invalid');try{d=(0,h.decode)(o.iv)}catch{throw new i.JWEInvalid("Failed to base64url decode the iv")}try{e=(0,h.decode)(o.tag)}catch{throw new i.JWEInvalid("Failed to base64url decode the tag")}return(0,n.unwrap)(a,b,c,d,e)}default:throw new i.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}}},8172:a=>{a.exports={assertSigningAlgValuesSupport:function(a,b,c){if(!b[`${a}_endpoint`])return;let d=`${a}_endpoint_auth_method`,e=`${a}_endpoint_auth_signing_alg`,f=`${a}_endpoint_auth_signing_alg_values_supported`;if(c[d]&&c[d].endsWith("_jwt")&&!c[e]&&!b[f])throw TypeError(`${f} must be configured on the issuer if ${e} is not defined on a client`)},assertIssuerConfiguration:function(a,b){if(!a[b])throw TypeError(`${b} must be configured on the issuer`)}}},8697:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.compactDecrypt=void 0;let d=c(55307),e=c(69817),f=c(74855);b.compactDecrypt=async function(a,b,c){if(a instanceof Uint8Array&&(a=f.decoder.decode(a)),"string"!=typeof a)throw new e.JWEInvalid("Compact JWE must be a string or Uint8Array");let{0:g,1:h,2:i,3:j,4:k,length:l}=a.split(".");if(5!==l)throw new e.JWEInvalid("Invalid Compact JWE");let m=await (0,d.flattenedDecrypt)({ciphertext:j,iv:i||void 0,protected:g||void 0,tag:k||void 0,encrypted_key:h||void 0},b,c),n={plaintext:m.plaintext,protectedHeader:m.protectedHeader};return"function"==typeof b?{...n,key:m.key}:n}},8918:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"callback",{enumerable:!0,get:function(){return e.default}}),Object.defineProperty(b,"providers",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(b,"session",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(b,"signin",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(b,"signout",{enumerable:!0,get:function(){return g.default}});var e=d(c(53759)),f=d(c(18070)),g=d(c(69301)),h=d(c(51738)),i=d(c(25824))},9447:(a,b,c)=>{"use strict";let d=c(40949),e=Symbol("max"),f=Symbol("length"),g=Symbol("lengthCalculator"),h=Symbol("allowStale"),i=Symbol("maxAge"),j=Symbol("dispose"),k=Symbol("noDisposeOnSet"),l=Symbol("lruList"),m=Symbol("cache"),n=Symbol("updateAgeOnGet"),o=()=>1;class p{constructor(a){if("number"==typeof a&&(a={max:a}),a||(a={}),a.max&&("number"!=typeof a.max||a.max<0))throw TypeError("max must be a non-negative number");this[e]=a.max||1/0;let b=a.length||o;if(this[g]="function"!=typeof b?o:b,this[h]=a.stale||!1,a.maxAge&&"number"!=typeof a.maxAge)throw TypeError("maxAge must be a number");this[i]=a.maxAge||0,this[j]=a.dispose,this[k]=a.noDisposeOnSet||!1,this[n]=a.updateAgeOnGet||!1,this.reset()}set max(a){if("number"!=typeof a||a<0)throw TypeError("max must be a non-negative number");this[e]=a||1/0,s(this)}get max(){return this[e]}set allowStale(a){this[h]=!!a}get allowStale(){return this[h]}set maxAge(a){if("number"!=typeof a)throw TypeError("maxAge must be a non-negative number");this[i]=a,s(this)}get maxAge(){return this[i]}set lengthCalculator(a){"function"!=typeof a&&(a=o),a!==this[g]&&(this[g]=a,this[f]=0,this[l].forEach(a=>{a.length=this[g](a.value,a.key),this[f]+=a.length})),s(this)}get lengthCalculator(){return this[g]}get length(){return this[f]}get itemCount(){return this[l].length}rforEach(a,b){b=b||this;for(let c=this[l].tail;null!==c;){let d=c.prev;v(this,a,c,b),c=d}}forEach(a,b){b=b||this;for(let c=this[l].head;null!==c;){let d=c.next;v(this,a,c,b),c=d}}keys(){return this[l].toArray().map(a=>a.key)}values(){return this[l].toArray().map(a=>a.value)}reset(){this[j]&&this[l]&&this[l].length&&this[l].forEach(a=>this[j](a.key,a.value)),this[m]=new Map,this[l]=new d,this[f]=0}dump(){return this[l].map(a=>!r(this,a)&&{k:a.key,v:a.value,e:a.now+(a.maxAge||0)}).toArray().filter(a=>a)}dumpLru(){return this[l]}set(a,b,c){if((c=c||this[i])&&"number"!=typeof c)throw TypeError("maxAge must be a number");let d=c?Date.now():0,h=this[g](b,a);if(this[m].has(a)){if(h>this[e])return t(this,this[m].get(a)),!1;let g=this[m].get(a).value;return this[j]&&!this[k]&&this[j](a,g.value),g.now=d,g.maxAge=c,g.value=b,this[f]+=h-g.length,g.length=h,this.get(a),s(this),!0}let n=new u(a,b,h,d,c);return n.length>this[e]?(this[j]&&this[j](a,b),!1):(this[f]+=n.length,this[l].unshift(n),this[m].set(a,this[l].head),s(this),!0)}has(a){return!!this[m].has(a)&&!r(this,this[m].get(a).value)}get(a){return q(this,a,!0)}peek(a){return q(this,a,!1)}pop(){let a=this[l].tail;return a?(t(this,a),a.value):null}del(a){t(this,this[m].get(a))}load(a){this.reset();let b=Date.now();for(let c=a.length-1;c>=0;c--){let d=a[c],e=d.e||0;if(0===e)this.set(d.k,d.v);else{let a=e-b;a>0&&this.set(d.k,d.v,a)}}}prune(){this[m].forEach((a,b)=>q(this,b,!1))}}let q=(a,b,c)=>{let d=a[m].get(b);if(d){let b=d.value;if(r(a,b)){if(t(a,d),!a[h])return}else c&&(a[n]&&(d.value.now=Date.now()),a[l].unshiftNode(d));return b.value}},r=(a,b)=>{if(!b||!b.maxAge&&!a[i])return!1;let c=Date.now()-b.now;return b.maxAge?c>b.maxAge:a[i]&&c>a[i]},s=a=>{if(a[f]>a[e])for(let b=a[l].tail;a[f]>a[e]&&null!==b;){let c=b.prev;t(a,b),b=c}},t=(a,b)=>{if(b){let c=b.value;a[j]&&a[j](c.key,c.value),a[f]-=c.length,a[m].delete(c.key),a[l].removeNode(b)}};class u{constructor(a,b,c,d,e){this.key=a,this.value=b,this.length=c,this.now=d,this.maxAge=e||0}}let v=(a,b,c,d)=>{let e=c.value;r(a,e)&&(t(a,c),a[h]||(e=void 0)),e&&b.call(d,e.value,e.key,a)};a.exports=p},9492:(a,b,c)=>{var d=c(77979),e=c(13615),f=c(78739),g=c(85843);function h(b){var c="function"==typeof Map?new Map:void 0;return a.exports=h=function(a){if(null===a||!f(a))return a;if("function"!=typeof a)throw TypeError("Super expression must either be null or a function");if(void 0!==c){if(c.has(a))return c.get(a);c.set(a,b)}function b(){return g(a,arguments,d(this).constructor)}return b.prototype=Object.create(a.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),e(b,a)},a.exports.__esModule=!0,a.exports.default=a.exports,h(b)}a.exports=h,a.exports.__esModule=!0,a.exports.default=a.exports},10445:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generateKeyPair=b.generateSecret=void 0;let d=c(55511),e=c(28354),f=c(39469),g=c(85633),h=c(69817),i=(0,e.promisify)(d.generateKeyPair);b.generateSecret=async function(a,b){let c;switch(a){case"HS256":case"HS384":case"HS512":case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":c=parseInt(a.slice(-3),10);break;case"A128KW":case"A192KW":case"A256KW":case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":case"A128GCM":case"A192GCM":case"A256GCM":c=parseInt(a.slice(1,4),10);break;default:throw new h.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}return(0,d.createSecretKey)((0,f.default)(new Uint8Array(c>>3)))},b.generateKeyPair=async function(a,b){var c,d;switch(a){case"RS256":case"RS384":case"RS512":case"PS256":case"PS384":case"PS512":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":case"RSA1_5":{let a=null!=(c=null==b?void 0:b.modulusLength)?c:2048;if("number"!=typeof a||a<2048)throw new h.JOSENotSupported("Invalid or unsupported modulusLength option provided, 2048 bits or larger keys must be used");let d=await i("rsa",{modulusLength:a,publicExponent:65537});return(0,g.setModulusLength)(d.privateKey,a),(0,g.setModulusLength)(d.publicKey,a),d}case"ES256":return i("ec",{namedCurve:"P-256"});case"ES256K":return i("ec",{namedCurve:"secp256k1"});case"ES384":return i("ec",{namedCurve:"P-384"});case"ES512":return i("ec",{namedCurve:"P-521"});case"EdDSA":switch(null==b?void 0:b.crv){case void 0:case"Ed25519":return i("ed25519");case"Ed448":return i("ed448");default:throw new h.JOSENotSupported("Invalid or unsupported crv option provided, supported values are Ed25519 and Ed448")}case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":let e=null!=(d=null==b?void 0:b.crv)?d:"P-256";switch(e){case void 0:case"P-256":case"P-384":case"P-521":return i("ec",{namedCurve:e});case"X25519":return i("x25519");case"X448":return i("x448");default:throw new h.JOSENotSupported("Invalid or unsupported crv option provided, supported values are P-256, P-384, P-521, X25519, and X448")}default:throw new h.JOSENotSupported('Invalid or unsupported JWK "alg" (Algorithm) Parameter value')}}},11192:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0});let e=c(55511);b.default=a=>(d||(d=new Set((0,e.getCiphers)())),d.has(a))},11434:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decrypt=b.encrypt=void 0;let d=c(55511),e=c(85633),f=c(72927),g=c(69978),h=c(25066),i=c(94415),j=c(89722),k=(a,b)=>{if("rsa"!==a.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");(0,e.default)(a,b)},l=a=>{switch(a){case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":return d.constants.RSA_PKCS1_OAEP_PADDING;case"RSA1_5":return d.constants.RSA_PKCS1_PADDING;default:return}},m=a=>{switch(a){case"RSA-OAEP":return"sha1";case"RSA-OAEP-256":return"sha256";case"RSA-OAEP-384":return"sha384";case"RSA-OAEP-512":return"sha512";default:return}};function n(a,b,...c){if((0,h.default)(a))return a;if((0,f.isCryptoKey)(a))return(0,g.checkEncCryptoKey)(a,b,...c),d.KeyObject.from(a);throw TypeError((0,i.default)(a,...j.types))}b.encrypt=(a,b,c)=>{let e=l(a),f=m(a),g=n(b,a,"wrapKey","encrypt");return k(g,a),(0,d.publicEncrypt)({key:g,oaepHash:f,padding:e},c)},b.decrypt=(a,b,c)=>{let e=l(a),f=m(a),g=n(b,a,"unwrapKey","decrypt");return k(g,a),(0,d.privateDecrypt)({key:g,oaepHash:f,padding:e},c)}},11665:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){let{url:b,providerId:c}=a,f=a.providers.map(({options:a,...c})=>{var f,g;if("oauth"===c.type){let f=e(c),h=e(a,!0),i=null!=(g=null==h?void 0:h.id)?g:c.id;return(0,d.merge)(f,{...h,signinUrl:`${b}/signin/${i}`,callbackUrl:`${b}/callback/${i}`})}let h=null!=(f=null==a?void 0:a.id)?f:c.id;return(0,d.merge)(c,{...a,signinUrl:`${b}/signin/${h}`,callbackUrl:`${b}/callback/${h}`})});return{providers:f,provider:f.find(({id:a})=>a===c)}};var d=c(19533);function e(a,b=!1){var c,d,f,g,h;if(!a)return;let i=Object.entries(a).reduce((a,[b,c])=>{if(["authorization","token","userinfo"].includes(b)&&"string"==typeof c){var d;let e=new URL(c);a[b]={url:`${e.origin}${e.pathname}`,params:Object.fromEntries(null!=(d=e.searchParams)?d:[])}}else a[b]=c;return a},{});return b||null!=(c=i.version)&&c.startsWith("1.")||(i.idToken=!!(null!=(d=null!=(f=i.idToken)?f:null==(g=i.wellKnown)?void 0:g.includes("openid-configuration"))?d:null==(h=i.authorization)||null==(h=h.params)||null==(h=h.scope)?void 0:h.includes("openid")),i.checks||(i.checks=["state"])),i}},13188:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});class c{constructor(a){if(48!==a[0]||(this.buffer=a,this.offset=1,this.decodeLength()!==a.length-this.offset))throw TypeError()}decodeLength(){let a=this.buffer[this.offset++];if(128&a){let b=-129&a;a=0;for(let c=0;c<b;c++)a=a<<8|this.buffer[this.offset+c];this.offset+=b}return a}unsignedInteger(){if(2!==this.buffer[this.offset++])throw TypeError();let a=this.decodeLength();0===this.buffer[this.offset]&&(this.offset++,a--);let b=this.buffer.slice(this.offset,this.offset+a);return this.offset+=a,b}end(){if(this.offset!==this.buffer.length)throw TypeError()}}b.default=c},13615:a=>{function b(c,d){return a.exports=b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a},a.exports.__esModule=!0,a.exports.default=a.exports,b(c,d)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},14230:(a,b,c)=>{"use strict";Object.defineProperty(b,"B",{value:!0}),Object.defineProperty(b,"U",{enumerable:!0,get:function(){return n}});let d=c(28706),e=c(33675),f=c(29294),g=c(63033),h=c(26906),i=c(11938),j=c(82831),k=c(30787),l=c(31716),m=c(49290);function n(){let a="cookies",b=f.workAsyncStorage.getStore(),c=g.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,l.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used "cookies" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "cookies" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E88",enumerable:!1,configurable:!0});if(b.forceStatic)return p(d.RequestCookiesAdapter.seal(new e.RequestCookies(new Headers({}))));if(b.dynamicShouldError)throw Object.defineProperty(new i.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`cookies\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E549",enumerable:!1,configurable:!0});if(c)switch(c.type){case"cache":let f=Object.defineProperty(Error(`Route ${b.route} used "cookies" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E398",enumerable:!1,configurable:!0});throw Error.captureStackTrace(f,n),b.invalidDynamicUsageError??=f,f;case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used "cookies" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "cookies" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E157",enumerable:!1,configurable:!0});case"prerender":var k=b,q=c;let g=o.get(q);if(g)return g;let r=(0,j.makeHangingPromise)(q.renderSignal,k.route,"`cookies()`");return o.set(q,r),r;case"prerender-client":let s="`cookies`";throw Object.defineProperty(new m.InvariantError(`${s} must not be used within a client component. Next.js should be preventing ${s} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,h.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,h.throwToInterruptStaticGeneration)(a,b,c);case"prerender-runtime":return(0,h.delayUntilRuntimeStage)(c,function(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),c}(c.cookies));case"private-cache":return p(c.cookies);case"request":return(0,h.trackDynamicDataInDynamicRender)(c),p((0,d.areCookiesMutableInCurrentPhase)(c)?c.userspaceMutableCookies:c.cookies)}}(0,g.throwForMissingRequestStore)(a)}c(63036);let o=new WeakMap;function p(a){let b=o.get(a);if(b)return b;let c=Promise.resolve(a);return o.set(a,c),Object.defineProperties(c,{[Symbol.iterator]:{value:a[Symbol.iterator]?a[Symbol.iterator].bind(a):q.bind(a)},size:{get:()=>a.size},get:{value:a.get.bind(a)},getAll:{value:a.getAll.bind(a)},has:{value:a.has.bind(a)},set:{value:a.set.bind(a)},delete:{value:a.delete.bind(a)},clear:{value:"function"==typeof a.clear?a.clear.bind(a):r.bind(a,c)},toString:{value:a.toString.bind(a)}}),c}function q(){return this.getAll().map(a=>[a.name,a]).values()}function r(a){for(let a of this.getAll())this.delete(a.name);return a}(0,k.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`cookies()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E223",enumerable:!1,configurable:!0})})},14880:(a,b,c)=>{"use strict";c.d(b,{Pq:()=>h,iX:()=>g});var d=c(46493),e=c(93352);class f extends e.pe{static [d.i]="PgJsonBuilder";constructor(a){super(a,"json","PgJson")}build(a){return new g(a,this.config)}}class g extends e.Kl{static [d.i]="PgJson";constructor(a,b){super(a,b)}getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function h(a){return new f(a??"")}},15366:(a,b,c)=>{let d=c(91499),e=c(33734),f=c(41387),g=Symbol(),h=(a,{alg:b,use:c})=>{let d=0;return b&&a.alg&&d++,c&&a.use&&d++,d};a.exports=class{#a;constructor(a,b){if(a!==g)throw Error("invalid constructor call");this.#a=b}toJWKS(){return{keys:this.map(({jwk:{d:a,p:b,q:c,dp:d,dq:e,qi:f,...g}})=>g)}}all({alg:a,kid:b,use:c}={}){if(!c||!a)throw Error();let d=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:return}}(a),e={alg:a,use:c};return this.filter(e=>{let f=!0;return void 0!==d&&e.jwk.kty!==d&&(f=!1),f&&void 0!==b&&e.jwk.kid!==b&&(f=!1),f&&void 0!==c&&void 0!==e.jwk.use&&e.jwk.use!==c&&(f=!1),f&&e.jwk.alg&&e.jwk.alg!==a?f=!1:e.algorithms.has(a)||(f=!1),f}).sort((a,b)=>h(b,e)-h(a,e))}get(...a){return this.all(...a)[0]}static async fromJWKS(a,{onlyPublic:b=!1,onlyPrivate:c=!1}={}){if(!f(a)||!Array.isArray(a.keys)||a.keys.some(a=>!f(a)||!("kty"in a)))throw TypeError("jwks must be a JSON Web Key Set formatted object");let h=[];for(let f of a.keys){let{kty:a,kid:g,crv:i}=f=e(f),{alg:j,use:k}=f;if("string"==typeof a&&a&&(void 0===k||"sig"===k||"enc"===k)&&("string"==typeof j||void 0===j)&&("string"==typeof g||void 0===g)){if("EC"===a&&"sig"===k)switch(i){case"P-256":j="ES256";break;case"P-384":j="ES384";break;case"P-521":j="ES512"}if("secp256k1"===i&&(k="sig",j="ES256K"),"OKP"===a)switch(i){case"Ed25519":case"Ed448":k="sig",j="EdDSA";break;case"X25519":case"X448":k="enc"}if(j&&!k)switch(!0){case j.startsWith("ECDH"):case j.startsWith("RSA"):k="enc"}if(c&&("oct"===f.kty||!f.d))throw Error("jwks must only contain private keys");b&&(f.d||f.k)||h.push({jwk:{...f,alg:j,use:k},async keyObject(a){if(this[a])return this[a];let b=await d.importJWK(this.jwk,a);return this[a]=b,b},get algorithms(){return Object.defineProperty(this,"algorithms",{value:function(a,b,c,e){if(b)return new Set([b]);switch(c){case"EC":{let b=[];if(("enc"===a||void 0===a)&&(b=b.concat(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"])),"sig"===a||void 0===a)switch(e){case"P-256":case"P-384":b=b.concat([`ES${e.slice(-3)}`]);break;case"P-521":b=b.concat(["ES512"]);break;case"secp256k1":"node:crypto"===d.cryptoRuntime&&(b=b.concat(["ES256K"]))}return new Set(b)}case"OKP":return new Set(["ECDH-ES","ECDH-ES+A128KW","ECDH-ES+A192KW","ECDH-ES+A256KW"]);case"RSA":{let b=[];return("enc"===a||void 0===a)&&(b=b.concat(["RSA-OAEP","RSA-OAEP-256","RSA-OAEP-384","RSA-OAEP-512"]),"node:crypto"===d.cryptoRuntime&&(b=b.concat(["RSA1_5"]))),("sig"===a||void 0===a)&&(b=b.concat(["PS256","PS384","PS512","RS256","RS384","RS512"])),new Set(b)}default:throw Error("unreachable")}}(this.jwk.use,this.jwk.alg,this.jwk.kty,this.jwk.crv),enumerable:!0,configurable:!1}),this.algorithms}})}}return new this(g,h)}filter(...a){return this.#a.filter(...a)}find(...a){return this.#a.find(...a)}every(...a){return this.#a.every(...a)}some(...a){return this.#a.some(...a)}map(...a){return this.#a.map(...a)}forEach(...a){return this.#a.forEach(...a)}reduce(...a){return this.#a.reduce(...a)}sort(...a){return this.#a.sort(...a)}*[Symbol.iterator](){for(let a of this.#a)yield a}}},15394:a=>{a.exports.isAnEarlyCloseHost=function(a){return a&&a.match(".*google(apis)?.com$")}},15476:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){let{url:b,theme:c,query:d,cookies:k}=a;function l({html:a,title:b,status:d}){var f;return{cookies:k,status:d,headers:[{key:"Content-Type",value:"text/html"}],body:`<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><style>${(0,j.default)()}</style><title>${b}</title></head><body class="__next-auth-theme-${null!=(f=null==c?void 0:c.colorScheme)?f:"auto"}"><div class="page">${(0,e.default)(a)}</div></body></html>`}}return{signin:b=>l({html:(0,f.default)({csrfToken:a.csrfToken,providers:a.providers,callbackUrl:a.callbackUrl,theme:c,...d,...b}),title:"Sign In"}),signout:d=>l({html:(0,g.default)({csrfToken:a.csrfToken,url:b,theme:c,...d}),title:"Sign Out"}),verifyRequest:a=>l({html:(0,h.default)({url:b,theme:c,...a}),title:"Verify Request"}),error:a=>l({...(0,i.default)({url:b,theme:c,...a}),title:"Error"})}};var e=d(c(83684)),f=d(c(59940)),g=d(c(97967)),h=d(c(85995)),i=d(c(97666)),j=d(c(52667))},15514:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.pkce=b.nonce=b.PKCE_CODE_CHALLENGE_METHOD=void 0,b.signCookie=g,b.state=void 0;var d=c(49646),e=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=f(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var g in a)if("default"!==g&&({}).hasOwnProperty.call(a,g)){var h=e?Object.getOwnPropertyDescriptor(a,g):null;h&&(h.get||h.set)?Object.defineProperty(d,g,h):d[g]=a[g]}return d.default=a,c&&c.set(a,d),d}(c(47025));function f(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(f=function(a){return a?c:b})(a)}async function g(a,b,c,d){let{cookies:f,logger:g}=d;g.debug(`CREATE_${a.toUpperCase()}`,{value:b,maxAge:c});let{name:h}=f[a],i=new Date;return i.setTime(i.getTime()+1e3*c),{name:h,value:await e.encode({...d.jwt,maxAge:c,token:{value:b},salt:h}),options:{...f[a].options,expires:i}}}let h=b.PKCE_CODE_CHALLENGE_METHOD="S256";b.pkce={async create(a,b,c){var e,f;if(!(null!=(e=a.provider)&&null!=(e=e.checks)&&e.includes("pkce")))return;let i=d.generators.codeVerifier();c.code_challenge=d.generators.codeChallenge(i),c.code_challenge_method=h;let j=null!=(f=a.cookies.pkceCodeVerifier.options.maxAge)?f:900;b.push(await g("pkceCodeVerifier",i,j,a))},async use(a,b,c,d){var f;if(!(null!=(f=c.provider)&&null!=(f=f.checks)&&f.includes("pkce")))return;let g=null==a?void 0:a[c.cookies.pkceCodeVerifier.name];if(!g)throw TypeError("PKCE code_verifier cookie was missing.");let{name:h}=c.cookies.pkceCodeVerifier,i=await e.decode({...c.jwt,token:g,salt:h});if(!(null!=i&&i.value))throw TypeError("PKCE code_verifier value could not be parsed.");b.push({name:h,value:"",options:{...c.cookies.pkceCodeVerifier.options,maxAge:0}}),d.code_verifier=i.value}},b.state={async create(a,b,c){var e,f;if(!(null!=(e=a.provider.checks)&&e.includes("state")))return;let h=d.generators.state();c.state=h;let i=null!=(f=a.cookies.state.options.maxAge)?f:900;b.push(await g("state",h,i,a))},async use(a,b,c,d){var f;if(!(null!=(f=c.provider.checks)&&f.includes("state")))return;let g=null==a?void 0:a[c.cookies.state.name];if(!g)throw TypeError("State cookie was missing.");let{name:h}=c.cookies.state,i=await e.decode({...c.jwt,token:g,salt:h});if(!(null!=i&&i.value))throw TypeError("State value could not be parsed.");b.push({name:h,value:"",options:{...c.cookies.state.options,maxAge:0}}),d.state=i.value}},b.nonce={async create(a,b,c){var e,f;if(!(null!=(e=a.provider.checks)&&e.includes("nonce")))return;let h=d.generators.nonce();c.nonce=h;let i=null!=(f=a.cookies.nonce.options.maxAge)?f:900;b.push(await g("nonce",h,i,a))},async use(a,b,c,d){var f;if(!(null!=(f=c.provider)&&null!=(f=f.checks)&&f.includes("nonce")))return;let g=null==a?void 0:a[c.cookies.nonce.name];if(!g)throw TypeError("Nonce cookie was missing.");let{name:h}=c.cookies.nonce,i=await e.decode({...c.jwt,token:g,salt:h});if(!(null!=i&&i.value))throw TypeError("Nonce value could not be parsed.");b.push({name:h,value:"",options:{...c.cookies.nonce.options,maxAge:0}}),d.nonce=i.value}}},16217:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){if("object"!=typeof a||null===a||"[object Object]"!==Object.prototype.toString.call(a))return!1;if(null===Object.getPrototypeOf(a))return!0;let b=a;for(;null!==Object.getPrototypeOf(b);)b=Object.getPrototypeOf(b);return Object.getPrototypeOf(a)===b}},16781:(a,b,c)=>{let d=c(91499),{RPError:e}=c(86915),{assertIssuerConfiguration:f}=c(8172),{random:g}=c(48228),h=c(65859),i=c(81409),{keystores:j}=c(24687),k=c(91992),l=a=>encodeURIComponent(a).replace(/%20/g,"+");async function m(a,b){let c=this[`${a}_endpoint_auth_signing_alg`];if(c||f(this.issuer,`${a}_endpoint_auth_signing_alg_values_supported`),"client_secret_jwt"===this[`${a}_endpoint_auth_method`]){if(!c){let b=this.issuer[`${a}_endpoint_auth_signing_alg_values_supported`];c=Array.isArray(b)&&b.find(a=>/^HS(?:256|384|512)/.test(a))}if(!c)throw new e(`failed to determine a JWS Algorithm to use for ${this[`${a}_endpoint_auth_method`]} Client Assertion`);return new d.CompactSign(Buffer.from(JSON.stringify(b))).setProtectedHeader({alg:c}).sign(this.secretForAlg(c))}let g=await j.get(this);if(!g)throw TypeError("no client jwks provided for signing a client assertion with");if(!c){let b=this.issuer[`${a}_endpoint_auth_signing_alg_values_supported`];c=Array.isArray(b)&&b.find(a=>g.get({alg:a,use:"sig"}))}if(!c)throw new e(`failed to determine a JWS Algorithm to use for ${this[`${a}_endpoint_auth_method`]} Client Assertion`);let h=g.get({alg:c,use:"sig"});if(!h)throw new e(`no key found in client jwks to sign a client assertion with using alg ${c}`);return new d.CompactSign(Buffer.from(JSON.stringify(b))).setProtectedHeader({alg:c,kid:h.jwk&&h.jwk.kid}).sign(await h.keyObject(c))}async function n(a,{clientAssertionPayload:b}={}){switch(this[`${a}_endpoint_auth_method`]){case"self_signed_tls_client_auth":case"tls_client_auth":case"none":return{form:{client_id:this.client_id}};case"client_secret_post":if("string"!=typeof this.client_secret)throw TypeError("client_secret_post client authentication method requires a client_secret");return{form:{client_id:this.client_id,client_secret:this.client_secret}};case"private_key_jwt":case"client_secret_jwt":{let c=h(),d=await m.call(this,a,{iat:c,exp:c+60,jti:g(),iss:this.client_id,sub:this.client_id,aud:this.issuer.issuer,...b});return{form:{client_id:this.client_id,client_assertion:d,client_assertion_type:"urn:ietf:params:oauth:client-assertion-type:jwt-bearer"}}}case"client_secret_basic":{if("string"!=typeof this.client_secret)throw TypeError("client_secret_basic client authentication method requires a client_secret");let a=`${l(this.client_id)}:${l(this.client_secret)}`,b=Buffer.from(a).toString("base64");return{headers:{Authorization:`Basic ${b}`}}}default:throw TypeError(`missing, or unsupported, ${a}_endpoint_auth_method`)}}async function o(a,b,{clientAssertionPayload:c,endpointAuthMethod:d=a,DPoP:e}={}){let f,g=k(b,await n.call(this,d,{clientAssertionPayload:c})),h=this[`${d}_endpoint_auth_method`].includes("tls_client_auth")||"token"===a&&this.tls_client_certificate_bound_access_tokens;if(h&&this.issuer.mtls_endpoint_aliases&&(f=this.issuer.mtls_endpoint_aliases[`${a}_endpoint`]),f=f||this.issuer[`${a}_endpoint`],"form"in g)for(let[a,b]of Object.entries(g.form))void 0===b&&delete g.form[a];return i.call(this,{...g,method:"POST",url:f,headers:{..."revocation"!==a?{Accept:"application/json"}:void 0,...g.headers}},{mTLS:h,DPoP:e})}a.exports={resolveResponseType:function(){let{length:a,0:b}=this.response_types;if(1===a)return b},resolveRedirectUri:function(){let{length:a,0:b}=this.redirect_uris||[];if(1===a)return b},authFor:n,authenticatedPost:o}},17152:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.EncryptJWT=void 0;let d=c(28481),e=c(74855),f=c(23817);class g extends f.ProduceJWT{setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}replicateIssuerAsHeader(){return this._replicateIssuerAsHeader=!0,this}replicateSubjectAsHeader(){return this._replicateSubjectAsHeader=!0,this}replicateAudienceAsHeader(){return this._replicateAudienceAsHeader=!0,this}async encrypt(a,b){let c=new d.CompactEncrypt(e.encoder.encode(JSON.stringify(this._payload)));return this._replicateIssuerAsHeader&&(this._protectedHeader={...this._protectedHeader,iss:this._payload.iss}),this._replicateSubjectAsHeader&&(this._protectedHeader={...this._protectedHeader,sub:this._payload.sub}),this._replicateAudienceAsHeader&&(this._protectedHeader={...this._protectedHeader,aud:this._payload.aud}),c.setProtectedHeader(this._protectedHeader),this._iv&&c.setInitializationVector(this._iv),this._cek&&c.setContentEncryptionKey(this._cek),this._keyManagementParameters&&c.setKeyManagementParameters(this._keyManagementParameters),c.encrypt(a,b)}}b.EncryptJWT=g},17670:(a,b,c)=>{let d=c(28354),e=c(55511);a.exports=d.types.isKeyObject||(a=>a&&a instanceof e.KeyObject)},18013:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511),e=c(30660),f=c(52349),g=c(74855),h=c(5061),i=c(72927),j=c(69978),k=c(25066),l=c(94415),m=c(69817),n=c(11192),o=c(89722);b.default=(a,b,c,p,q)=>{let r;if((0,i.isCryptoKey)(c))(0,j.checkEncCryptoKey)(c,a,"encrypt"),r=d.KeyObject.from(c);else if(c instanceof Uint8Array||(0,k.default)(c))r=c;else throw TypeError((0,l.default)(c,...o.types,"Uint8Array"));switch((0,f.default)(a,r),(0,e.default)(a,p),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(a,b,c,e,f){let i=parseInt(a.slice(1,4),10);(0,k.default)(c)&&(c=c.export());let j=c.subarray(i>>3),l=c.subarray(0,i>>3),o=`aes-${i}-cbc`;if(!(0,n.default)(o))throw new m.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let p=(0,d.createCipheriv)(o,j,e),q=(0,g.concat)(p.update(b),p.final()),r=parseInt(a.slice(-3),10),s=(0,h.default)(f,e,q,r,l,i);return{ciphertext:q,tag:s}}(a,b,r,p,q);case"A128GCM":case"A192GCM":case"A256GCM":return function(a,b,c,e,f){let g=parseInt(a.slice(1,4),10),h=`aes-${g}-gcm`;if(!(0,n.default)(h))throw new m.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let i=(0,d.createCipheriv)(h,c,e,{authTagLength:16});f.byteLength&&i.setAAD(f,{plaintextLength:b.length});let j=i.update(b);return i.final(),{ciphertext:j,tag:i.getAuthTag()}}(a,b,r,p,q);default:throw new m.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},18070:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.default=h;var e=d(c(34334)),f=d(c(86788)),g=d(c(88123));async function h(a){let{options:b,query:c,body:d}=a,{url:h,callbacks:i,logger:j,provider:k}=b;if(!k.type)return{status:500,text:`Error: Type not specified for ${k.name}`};if("oauth"===k.type)try{return await (0,e.default)({options:b,query:c})}catch(a){return j.error("SIGNIN_OAUTH_ERROR",{error:a,providerId:k.id}),{redirect:`${h}/error?error=OAuthSignin`}}if("email"===k.type){var l;let a=null==d?void 0:d.email;if(!a)return{redirect:`${h}/error?error=EmailSignin`};let c=null!=(l=k.normalizeIdentifier)?l:a=>{var b;let c=a.trim();if(1!==(null!=(b=c.match(/@/g))?b:[]).length||c.includes('"'))throw Error("Invalid email address format.");let[d,e]=c.toLowerCase().split("@");if(!d||!e||!(e=e.split(",")[0]).includes("."))throw Error("Invalid email address format.");return`${d}@${e}`};try{a=c(null==d?void 0:d.email)}catch(a){return j.error("SIGNIN_EMAIL_ERROR",{error:a,providerId:k.id}),{redirect:`${h}/error?error=EmailSignin`}}let e=await (0,g.default)({email:a,adapter:b.adapter}),m={providerAccountId:a,userId:a,type:"email",provider:k.id};try{let a=await i.signIn({user:e,account:m,email:{verificationRequest:!0}});if(!a)return{redirect:`${h}/error?error=AccessDenied`};if("string"==typeof a)return{redirect:a}}catch(a){return{redirect:`${h}/error?${new URLSearchParams({error:a})}`}}try{return{redirect:await (0,f.default)(a,b)}}catch(a){return j.error("SIGNIN_EMAIL_ERROR",{error:a,providerId:k.id}),{redirect:`${h}/error?error=EmailSignin`}}}return{redirect:`${h}/signin`}}},18285:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.createCSRFToken=function({options:a,cookieValue:b,isPost:c,bodyValue:e}){if(b){let[f,g]=b.split("|");if(g===(0,d.createHash)("sha256").update(`${f}${a.secret}`).digest("hex"))return{csrfTokenVerified:c&&f===e,csrfToken:f}}let f=(0,d.randomBytes)(32).toString("hex"),g=(0,d.createHash)("sha256").update(`${f}${a.secret}`).digest("hex");return{cookie:`${f}|${g}`,csrfToken:f}};var d=c(55511)},18386:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=b.hkdf=void 0;let d=c(76586);function e(a,b){if("string"==typeof a)return new TextEncoder().encode(a);if(!(a instanceof Uint8Array))throw TypeError(`"${b}"" must be an instance of Uint8Array or a string`);return a}async function f(a,b,c,f,g){return(0,d.default)(function(a){switch(a){case"sha256":case"sha384":case"sha512":case"sha1":return a;default:throw TypeError('unsupported "digest" value')}}(a),function(a){let b=e(a,"ikm");if(!b.byteLength)throw TypeError('"ikm" must be at least one byte in length');return b}(b),e(c,"salt"),function(a){let b=e(a,"info");if(b.byteLength>1024)throw TypeError('"info" must not contain more than 1024 bytes');return b}(f),function(a,b){if("number"!=typeof a||!Number.isInteger(a)||a<1)throw TypeError('"keylen" must be a positive integer');if(a>255*(parseInt(b.substr(3),10)>>3||20))throw TypeError('"keylen" too large');return a}(g,a))}b.hkdf=f,b.default=f},18923:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.UnsecuredJWT=void 0;let d=c(67040),e=c(74855),f=c(69817),g=c(19267),h=c(23817);class i extends h.ProduceJWT{encode(){let a=d.encode(JSON.stringify({alg:"none"})),b=d.encode(JSON.stringify(this._payload));return`${a}.${b}.`}static decode(a,b){let c;if("string"!=typeof a)throw new f.JWTInvalid("Unsecured JWT must be a string");let{0:h,1:i,2:j,length:k}=a.split(".");if(3!==k||""!==j)throw new f.JWTInvalid("Invalid Unsecured JWT");try{if(c=JSON.parse(e.decoder.decode(d.decode(h))),"none"!==c.alg)throw Error()}catch{throw new f.JWTInvalid("Invalid Unsecured JWT")}return{payload:(0,g.default)(c,d.decode(i),b),header:c}}}b.UnsecuredJWT=i},19267:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817),e=c(74855),f=c(19918),g=c(51153),h=c(16217),i=a=>a.toLowerCase().replace(/^application\//,"");b.default=(a,b,c={})=>{let j,k,{typ:l}=c;if(l&&("string"!=typeof a.typ||i(a.typ)!==i(l)))throw new d.JWTClaimValidationFailed('unexpected "typ" JWT header value',"typ","check_failed");try{j=JSON.parse(e.decoder.decode(b))}catch{}if(!(0,h.default)(j))throw new d.JWTInvalid("JWT Claims Set must be a top-level JSON object");let{requiredClaims:m=[],issuer:n,subject:o,audience:p,maxTokenAge:q}=c;for(let a of(void 0!==q&&m.push("iat"),void 0!==p&&m.push("aud"),void 0!==o&&m.push("sub"),void 0!==n&&m.push("iss"),new Set(m.reverse())))if(!(a in j))throw new d.JWTClaimValidationFailed(`missing required "${a}" claim`,a,"missing");if(n&&!(Array.isArray(n)?n:[n]).includes(j.iss))throw new d.JWTClaimValidationFailed('unexpected "iss" claim value',"iss","check_failed");if(o&&j.sub!==o)throw new d.JWTClaimValidationFailed('unexpected "sub" claim value',"sub","check_failed");if(p&&!((a,b)=>"string"==typeof a?b.includes(a):!!Array.isArray(a)&&b.some(Set.prototype.has.bind(new Set(a))))(j.aud,"string"==typeof p?[p]:p))throw new d.JWTClaimValidationFailed('unexpected "aud" claim value',"aud","check_failed");switch(typeof c.clockTolerance){case"string":k=(0,g.default)(c.clockTolerance);break;case"number":k=c.clockTolerance;break;case"undefined":k=0;break;default:throw TypeError("Invalid clockTolerance option type")}let{currentDate:r}=c,s=(0,f.default)(r||new Date);if((void 0!==j.iat||q)&&"number"!=typeof j.iat)throw new d.JWTClaimValidationFailed('"iat" claim must be a number',"iat","invalid");if(void 0!==j.nbf){if("number"!=typeof j.nbf)throw new d.JWTClaimValidationFailed('"nbf" claim must be a number',"nbf","invalid");if(j.nbf>s+k)throw new d.JWTClaimValidationFailed('"nbf" claim timestamp check failed',"nbf","check_failed")}if(void 0!==j.exp){if("number"!=typeof j.exp)throw new d.JWTClaimValidationFailed('"exp" claim must be a number',"exp","invalid");if(j.exp<=s-k)throw new d.JWTExpired('"exp" claim timestamp check failed',"exp","check_failed")}if(q){let a=s-j.iat;if(a-k>("number"==typeof q?q:(0,g.default)(q)))throw new d.JWTExpired('"iat" claim timestamp check failed (too far in the past)',"iat","check_failed");if(a<0-k)throw new d.JWTClaimValidationFailed('"iat" claim timestamp check failed (it should be in the past)',"iat","check_failed")}return j}},19533:(a,b)=>{"use strict";function c(a){return a&&"object"==typeof a&&!Array.isArray(a)}Object.defineProperty(b,"__esModule",{value:!0}),b.merge=function a(b,...d){if(!d.length)return b;let e=d.shift();if(c(b)&&c(e))for(let d in e)c(e[d])?(b[d]||Object.assign(b,{[d]:{}}),a(b[d],e[d])):Object.assign(b,{[d]:e[d]});return a(b,...d)}},19593:(a,b,c)=>{"use strict";c.d(b,{n:()=>d});let d=Symbol.for("drizzle:ViewBaseConfig")},19831:(a,b,c)=>{"use strict";c.d(b,{Xd:()=>i,kB:()=>j});var d=c(46493),e=c(41313),f=c(93352),g=c(91983);class h extends g.u{constructor(a,b,c){super(a,"string","PgTime"),this.withTimezone=b,this.precision=c,this.config.withTimezone=b,this.config.precision=c}static [d.i]="PgTimeBuilder";build(a){return new i(a,this.config)}}class i extends f.Kl{static [d.i]="PgTime";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`time${a}${this.withTimezone?" with time zone":""}`}}function j(a,b={}){let{name:c,config:d}=(0,e.Ll)(a,b);return new h(c,d.withTimezone??!1,d.precision)}},19918:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=a=>Math.floor(a.getTime()/1e3)},20197:(a,b,c)=>{"use strict";c.d(b,{Yn:()=>i});var d=c(46493),e=c(7284);function f(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).map(a=>a.toLowerCase()).join("_")}function g(a){return(a.replace(/['\u2019]/g,"").match(/[\da-z]+|[A-Z]+(?![a-z])|[A-Z][\da-z]+/g)??[]).reduce((a,b,c)=>a+(0===c?b.toLowerCase():`${b[0].toUpperCase()}${b.slice(1)}`),"")}function h(a){return a}class i{static [d.i]="CasingCache";cache={};cachedTables={};convert;constructor(a){this.convert="snake_case"===a?f:"camelCase"===a?g:h}getColumnCasing(a){if(!a.keyAsName)return a.name;let b=a.table[e.XI.Symbol.Schema]??"public",c=a.table[e.XI.Symbol.OriginalName],d=`${b}.${c}.${a.name}`;return this.cache[d]||this.cacheTable(a.table),this.cache[d]}cacheTable(a){let b=a[e.XI.Symbol.Schema]??"public",c=a[e.XI.Symbol.OriginalName],d=`${b}.${c}`;if(!this.cachedTables[d]){for(let b of Object.values(a[e.XI.Symbol.Columns])){let a=`${d}.${b.name}`;this.cache[a]=this.convert(b.name)}this.cachedTables[d]=!0}}clearCache(){this.cache={},this.cachedTables={}}}},20331:a=>{let b=/^\d+$/;a.exports=function(a){if("string"!=typeof a)throw TypeError("input must be a string");return(!function(a){if(a.includes("://"))return!0;let c=a.replace(/(\/|\?)/g,"#").split("#")[0];if(c.includes(":")){let a=c.indexOf(":"),d=c.slice(a+1);if(!b.test(d))return!0}return!1}(a)?!function(a){if(!a.includes("@"))return!1;let b=a.split("@"),c=b[b.length-1];return!(c.includes(":")||c.includes("/")||c.includes("?"))}(a)?`https://${a}`:`acct:${a}`:a).split("#")[0]}},20481:(a,b,c)=>{let d,{strict:e}=c(12412),{createHash:f}=c(55511),{format:g}=c(28354);function h(a,b,c){let e=(function(a,b){switch(a){case"HS256":case"RS256":case"PS256":case"ES256":case"ES256K":return f("sha256");case"HS384":case"RS384":case"PS384":case"ES384":return f("sha384");case"HS512":case"RS512":case"PS512":case"ES512":case"Ed25519":return f("sha512");case"Ed448":return f("shake256",{outputLength:114});case"ML-DSA-44":case"ML-DSA-65":case"ML-DSA-87":return f("shake256",{outputLength:64});case"EdDSA":switch(b){case"Ed25519":return f("sha512");case"Ed448":return f("shake256",{outputLength:114});default:throw TypeError("unrecognized or invalid EdDSA curve provided")}default:throw TypeError("unrecognized or invalid JWS algorithm provided")}})(b,c).update(a).digest();return d(e.slice(0,e.length/2))}d=Buffer.isEncoding("base64url")?a=>a.toString("base64url"):a=>a.toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),a.exports={validate:function(a,b,c,d,f){let i,j;if("string"!=typeof a.claim||!a.claim)throw TypeError("names.claim must be a non-empty string");if("string"!=typeof a.source||!a.source)throw TypeError("names.source must be a non-empty string");e("string"==typeof b&&b,`${a.claim} must be a non-empty string`),e("string"==typeof c&&c,`${a.source} must be a non-empty string`);try{i=h(c,d,f)}catch(b){j=g("%s could not be validated (%s)",a.claim,b.message)}j=j||g("%s mismatch, expected %s, got: %s",a.claim,i,b),e.equal(i,b,j)},generate:h}},20500:(a,b,c)=>{"use strict";c.d(b,{O:()=>e});var d=c(46493);class e{static [d.i]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}}},20862:(a,b,c)=>{"use strict";c.d(b,{Iw:()=>v,Or:()=>x,Xs:()=>q,DJ:()=>p,Ss:()=>z,Ct:()=>y,eG:()=>s,qt:()=>o,ll:()=>w});var d=c(46493),e=c(93352);let f=Symbol.for("drizzle:isPgEnum");class g extends e.pe{static [d.i]="PgEnumColumnBuilder";constructor(a,b){super(a,"string","PgEnumColumn"),this.config.enum=b}build(a){return new h(a,this.config)}}class h extends e.Kl{static [d.i]="PgEnumColumn";enum=this.config.enum;enumValues=this.config.enum.enumValues;constructor(a,b){super(a,b),this.enum=b.enum}getSQLType(){return this.enum.enumName}}var i=c(96176),j=c(27017),k=c(19593),l=c(80228),m=c(7284);class n{static [d.i]=null}function o(a){return null!=a&&"function"==typeof a.getSQL}class p{static [d.i]="StringChunk";value;constructor(a){this.value=Array.isArray(a)?a:[a]}getSQL(){return new q([this])}}class q{constructor(a){this.queryChunks=a}static [d.i]="SQL";decoder=t;shouldInlineParams=!1;append(a){return this.queryChunks.push(...a.queryChunks),this}toQuery(a){return j.k.startActiveSpan("drizzle.buildSQL",b=>{let c=this.buildQueryFromSourceParams(this.queryChunks,a);return b?.setAttributes({"drizzle.query.text":c.sql,"drizzle.query.params":JSON.stringify(c.params)}),c})}buildQueryFromSourceParams(a,b){let c=Object.assign({},b,{inlineParams:b.inlineParams||this.shouldInlineParams,paramStartIndex:b.paramStartIndex||{value:0}}),{casing:e,escapeName:g,escapeParam:h,prepareTyping:j,inlineParams:n,paramStartIndex:s}=c;var t=a.map(a=>{if((0,d.is)(a,p))return{sql:a.value.join(""),params:[]};if((0,d.is)(a,r))return{sql:g(a.value),params:[]};if(void 0===a)return{sql:"",params:[]};if(Array.isArray(a)){let b=[new p("(")];for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push(new p(", "));return b.push(new p(")")),this.buildQueryFromSourceParams(b,c)}if((0,d.is)(a,q))return this.buildQueryFromSourceParams(a.queryChunks,{...c,inlineParams:n||a.shouldInlineParams});if((0,d.is)(a,m.XI)){let b=a[m.XI.Symbol.Schema],c=a[m.XI.Symbol.Name];return{sql:void 0===b?g(c):g(b)+"."+g(c),params:[]}}if((0,d.is)(a,l.V)){let c=e.getColumnCasing(a);if("indexes"===b.invokeSource)return{sql:g(c),params:[]};let d=a.table[m.XI.Symbol.Schema];return{sql:a.table[m.HE]||void 0===d?g(a.table[m.XI.Symbol.Name])+"."+g(c):g(d)+"."+g(a.table[m.XI.Symbol.Name])+"."+g(c),params:[]}}if((0,d.is)(a,z)){let b=a[k.n].schema,c=a[k.n].name;return{sql:void 0===b?g(c):g(b)+"."+g(c),params:[]}}if((0,d.is)(a,v)){if((0,d.is)(a.value,x))return{sql:h(s.value++,a),params:[a],typings:["none"]};let b=null===a.value?null:a.encoder.mapToDriverValue(a.value);if((0,d.is)(b,q))return this.buildQueryFromSourceParams([b],c);if(n)return{sql:this.mapInlineParam(b,c),params:[]};let e=["none"];return j&&(e=[j(a.encoder)]),{sql:h(s.value++,b),params:[b],typings:e}}return(0,d.is)(a,x)?{sql:h(s.value++,a),params:[a],typings:["none"]}:(0,d.is)(a,q.Aliased)&&void 0!==a.fieldAlias?{sql:g(a.fieldAlias),params:[]}:(0,d.is)(a,i.n)?a._.isWith?{sql:g(a._.alias),params:[]}:this.buildQueryFromSourceParams([new p("("),a._.sql,new p(") "),new r(a._.alias)],c):a&&"function"==typeof a&&f in a&&!0===a[f]?a.schema?{sql:g(a.schema)+"."+g(a.enumName),params:[]}:{sql:g(a.enumName),params:[]}:o(a)?a.shouldOmitSQLParens?.()?this.buildQueryFromSourceParams([a.getSQL()],c):this.buildQueryFromSourceParams([new p("("),a.getSQL(),new p(")")],c):n?{sql:this.mapInlineParam(a,c),params:[]}:{sql:h(s.value++,a),params:[a],typings:["none"]}});let u={sql:"",params:[]};for(let a of t)u.sql+=a.sql,u.params.push(...a.params),a.typings?.length&&(u.typings||(u.typings=[]),u.typings.push(...a.typings));return u}mapInlineParam(a,{escapeString:b}){if(null===a)return"null";if("number"==typeof a||"boolean"==typeof a)return a.toString();if("string"==typeof a)return b(a);if("object"==typeof a){let c=a.toString();return"[object Object]"===c?b(JSON.stringify(a)):b(c)}throw Error("Unexpected param value: "+a)}getSQL(){return this}as(a){return void 0===a?this:new q.Aliased(this,a)}mapWith(a){return this.decoder="function"==typeof a?{mapFromDriverValue:a}:a,this}inlineParams(){return this.shouldInlineParams=!0,this}if(a){return a?this:void 0}}class r{constructor(a){this.value=a}static [d.i]="Name";brand;getSQL(){return new q([this])}}function s(a){return"object"==typeof a&&null!==a&&"mapToDriverValue"in a&&"function"==typeof a.mapToDriverValue}let t={mapFromDriverValue:a=>a},u={mapToDriverValue:a=>a};({...t,...u});class v{constructor(a,b=u){this.value=a,this.encoder=b}static [d.i]="Param";brand;getSQL(){return new q([this])}}function w(a,...b){let c=[];for(let[d,e]of((b.length>0||a.length>0&&""!==a[0])&&c.push(new p(a[0])),b.entries()))c.push(e,new p(a[d+1]));return new q(c)}(a=>{a.empty=function(){return new q([])},a.fromList=function(a){return new q(a)},a.raw=function(a){return new q([new p(a)])},a.join=function(a,b){let c=[];for(let[d,e]of a.entries())d>0&&void 0!==b&&c.push(b),c.push(e);return new q(c)},a.identifier=function(a){return new r(a)},a.placeholder=function(a){return new x(a)},a.param=function(a,b){return new v(a,b)}})(w||(w={})),(a=>{class b{constructor(a,b){this.sql=a,this.fieldAlias=b}static [d.i]="SQL.Aliased";isSelectionField=!1;getSQL(){return this.sql}clone(){return new b(this.sql,this.fieldAlias)}}a.Aliased=b})(q||(q={}));class x{constructor(a){this.name=a}static [d.i]="Placeholder";getSQL(){return new q([this])}}function y(a,b){return a.map(a=>{if((0,d.is)(a,x)){if(!(a.name in b))throw Error(`No value for placeholder "${a.name}" was provided`);return b[a.name]}if((0,d.is)(a,v)&&(0,d.is)(a.value,x)){if(!(a.value.name in b))throw Error(`No value for placeholder "${a.value.name}" was provided`);return a.encoder.mapToDriverValue(b[a.value.name])}return a})}class z{static [d.i]="View";[k.n];constructor({name:a,schema:b,selectedFields:c,query:d}){this[k.n]={name:a,originalName:a,schema:b,selectedFields:c,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new q([this])}}l.V.prototype.getSQL=function(){return new q([this])},m.XI.prototype.getSQL=function(){return new q([this])},i.n.prototype.getSQL=function(){return new q([this])}},21274:(a,b)=>{var c,d,e,f,g,h,i,j,k,l,m,n={},o=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,q=Array.isArray;function r(a,b){for(var c in b)a[c]=b[c];return a}function s(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function t(a,b,d){var e,f,g,h={};for(g in b)"key"==g?e=b[g]:"ref"==g?f=b[g]:h[g]=b[g];if(arguments.length>2&&(h.children=arguments.length>3?c.call(arguments,2):d),"function"==typeof a&&null!=a.defaultProps)for(g in a.defaultProps)void 0===h[g]&&(h[g]=a.defaultProps[g]);return u(a,h,e,f,null)}function u(a,b,c,f,g){var h={type:a,props:b,key:c,ref:f,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==g?++e:g,__i:-1,__u:0};return null==g&&null!=d.vnode&&d.vnode(h),h}function v(a){return a.children}function w(a,b){this.props=a,this.context=b}function x(a,b){if(null==b)return a.__?x(a.__,a.__i+1):null;for(var c;b<a.__k.length;b++)if(null!=(c=a.__k[b])&&null!=c.__e)return c.__e;return"function"==typeof a.type?x(a):null}function y(a){(!a.__d&&(a.__d=!0)&&f.push(a)&&!z.__r++||g!==d.debounceRendering)&&((g=d.debounceRendering)||h)(z)}function z(){var a,b,c,e,g,h,j,k;for(f.sort(i);a=f.shift();)a.__d&&(b=f.length,e=void 0,h=(g=(c=a).__v).__e,j=[],k=[],c.__P&&((e=r({},g)).__v=g.__v+1,d.vnode&&d.vnode(e),E(c.__P,e,g,c.__n,c.__P.namespaceURI,32&g.__u?[h]:null,j,null==h?x(g):h,!!(32&g.__u),k),e.__v=g.__v,e.__.__k[e.__i]=e,F(j,e,k),e.__e!=h&&function a(b){var c,d;if(null!=(b=b.__)&&null!=b.__c){for(b.__e=b.__c.base=null,c=0;c<b.__k.length;c++)if(null!=(d=b.__k[c])&&null!=d.__e){b.__e=b.__c.base=d.__e;break}return a(b)}}(e)),f.length>b&&f.sort(i));z.__r=0}function A(a,b,c,e,f,g,h,i,j,k,l){var m,p,r,t,w,y=e&&e.__k||o,z=b.length;for(c.__d=j,function(a,b,c){var e,f,g,h,i,j=b.length,k=c.length,l=k,m=0;for(a.__k=[],e=0;e<j;e++)null!=(f=b[e])&&"boolean"!=typeof f&&"function"!=typeof f?(h=e+m,(f=a.__k[e]="string"==typeof f||"number"==typeof f||"bigint"==typeof f||f.constructor==String?u(null,f,null,null,null):q(f)?u(v,{children:f},null,null,null):void 0===f.constructor&&f.__b>0?u(f.type,f.props,f.key,f.ref?f.ref:null,f.__v):f).__=a,f.__b=a.__b+1,g=null,-1!==(i=f.__i=function(a,b,c,d){var e=a.key,f=a.type,g=c-1,h=c+1,i=b[c];if(null===i||i&&e==i.key&&f===i.type&&0==(131072&i.__u))return c;if(d>+(null!=i&&0==(131072&i.__u)))for(;g>=0||h<b.length;){if(g>=0){if((i=b[g])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return g;g--}if(h<b.length){if((i=b[h])&&0==(131072&i.__u)&&e==i.key&&f===i.type)return h;h++}}return -1}(f,c,h,l))&&(l--,(g=c[i])&&(g.__u|=131072)),null==g||null===g.__v?(-1==i&&m--,"function"!=typeof f.type&&(f.__u|=65536)):i!==h&&(i==h-1?m--:i==h+1?m++:(i>h?m--:m++,f.__u|=65536))):f=a.__k[e]=null;if(l)for(e=0;e<k;e++)null!=(g=c[e])&&0==(131072&g.__u)&&(g.__e==a.__d&&(a.__d=x(g)),function a(b,c,e){var f,g;if(d.unmount&&d.unmount(b),(f=b.ref)&&(f.current&&f.current!==b.__e||G(f,null,c)),null!=(f=b.__c)){if(f.componentWillUnmount)try{f.componentWillUnmount()}catch(a){d.__e(a,c)}f.base=f.__P=null}if(f=b.__k)for(g=0;g<f.length;g++)f[g]&&a(f[g],c,e||"function"!=typeof b.type);e||s(b.__e),b.__c=b.__=b.__e=b.__d=void 0}(g,g))}(c,b,y),j=c.__d,m=0;m<z;m++)null!=(r=c.__k[m])&&(p=-1===r.__i?n:y[r.__i]||n,r.__i=m,E(a,r,p,f,g,h,i,j,k,l),t=r.__e,r.ref&&p.ref!=r.ref&&(p.ref&&G(p.ref,null,r),l.push(r.ref,r.__c||t,r)),null==w&&null!=t&&(w=t),65536&r.__u||p.__k===r.__k?j=function a(b,c,d){var e,f;if("function"==typeof b.type){for(e=b.__k,f=0;e&&f<e.length;f++)e[f]&&(e[f].__=b,c=a(e[f],c,d));return c}b.__e!=c&&(c&&b.type&&!d.contains(c)&&(c=x(b)),d.insertBefore(b.__e,c||null),c=b.__e);do c=c&&c.nextSibling;while(null!=c&&8===c.nodeType);return c}(r,j,a):"function"==typeof r.type&&void 0!==r.__d?j=r.__d:t&&(j=t.nextSibling),r.__d=void 0,r.__u&=-196609);c.__d=j,c.__e=w}function B(a,b,c){"-"===b[0]?a.setProperty(b,null==c?"":c):a[b]=null==c?"":"number"!=typeof c||p.test(b)?c:c+"px"}function C(a,b,c,d,e){var f;a:if("style"===b)if("string"==typeof c)a.style.cssText=c;else{if("string"==typeof d&&(a.style.cssText=d=""),d)for(b in d)c&&b in c||B(a.style,b,"");if(c)for(b in c)d&&c[b]===d[b]||B(a.style,b,c[b])}else if("o"===b[0]&&"n"===b[1])f=b!==(b=b.replace(/(PointerCapture)$|Capture$/i,"$1")),b=b.toLowerCase()in a||"onFocusOut"===b||"onFocusIn"===b?b.toLowerCase().slice(2):b.slice(2),a.l||(a.l={}),a.l[b+f]=c,c?d?c.t=d.t:(c.t=j,a.addEventListener(b,f?l:k,f)):a.removeEventListener(b,f?l:k,f);else{if("http://www.w3.org/2000/svg"==e)b=b.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=b&&"height"!=b&&"href"!=b&&"list"!=b&&"form"!=b&&"tabIndex"!=b&&"download"!=b&&"rowSpan"!=b&&"colSpan"!=b&&"role"!=b&&"popover"!=b&&b in a)try{a[b]=null==c?"":c;break a}catch(a){}"function"==typeof c||(null==c||!1===c&&"-"!==b[4]?a.removeAttribute(b):a.setAttribute(b,"popover"==b&&1==c?"":c))}}function D(a){return function(b){if(this.l){var c=this.l[b.type+a];if(null==b.u)b.u=j++;else if(b.u<c.t)return;return c(d.event?d.event(b):b)}}}function E(a,b,e,f,g,h,i,j,k,l){var m,o,p,t,u,y,z,B,D,E,F,G,I,J,K,L,M=b.type;if(void 0!==b.constructor)return null;128&e.__u&&(k=!!(32&e.__u),h=[j=b.__e=e.__e]),(m=d.__b)&&m(b);a:if("function"==typeof M)try{if(B=b.props,D="prototype"in M&&M.prototype.render,E=(m=M.contextType)&&f[m.__c],F=m?E?E.props.value:m.__:f,e.__c?z=(o=b.__c=e.__c).__=o.__E:(D?b.__c=o=new M(B,F):(b.__c=o=new w(B,F),o.constructor=M,o.render=H),E&&E.sub(o),o.props=B,o.state||(o.state={}),o.context=F,o.__n=f,p=o.__d=!0,o.__h=[],o._sb=[]),D&&null==o.__s&&(o.__s=o.state),D&&null!=M.getDerivedStateFromProps&&(o.__s==o.state&&(o.__s=r({},o.__s)),r(o.__s,M.getDerivedStateFromProps(B,o.__s))),t=o.props,u=o.state,o.__v=b,p)D&&null==M.getDerivedStateFromProps&&null!=o.componentWillMount&&o.componentWillMount(),D&&null!=o.componentDidMount&&o.__h.push(o.componentDidMount);else{if(D&&null==M.getDerivedStateFromProps&&B!==t&&null!=o.componentWillReceiveProps&&o.componentWillReceiveProps(B,F),!o.__e&&(null!=o.shouldComponentUpdate&&!1===o.shouldComponentUpdate(B,o.__s,F)||b.__v===e.__v)){for(b.__v!==e.__v&&(o.props=B,o.state=o.__s,o.__d=!1),b.__e=e.__e,b.__k=e.__k,b.__k.some(function(a){a&&(a.__=b)}),G=0;G<o._sb.length;G++)o.__h.push(o._sb[G]);o._sb=[],o.__h.length&&i.push(o);break a}null!=o.componentWillUpdate&&o.componentWillUpdate(B,o.__s,F),D&&null!=o.componentDidUpdate&&o.__h.push(function(){o.componentDidUpdate(t,u,y)})}if(o.context=F,o.props=B,o.__P=a,o.__e=!1,I=d.__r,J=0,D){for(o.state=o.__s,o.__d=!1,I&&I(b),m=o.render(o.props,o.state,o.context),K=0;K<o._sb.length;K++)o.__h.push(o._sb[K]);o._sb=[]}else do o.__d=!1,I&&I(b),m=o.render(o.props,o.state,o.context),o.state=o.__s;while(o.__d&&++J<25);o.state=o.__s,null!=o.getChildContext&&(f=r(r({},f),o.getChildContext())),D&&!p&&null!=o.getSnapshotBeforeUpdate&&(y=o.getSnapshotBeforeUpdate(t,u)),A(a,q(L=null!=m&&m.type===v&&null==m.key?m.props.children:m)?L:[L],b,e,f,g,h,i,j,k,l),o.base=b.__e,b.__u&=-161,o.__h.length&&i.push(o),z&&(o.__E=o.__=null)}catch(a){if(b.__v=null,k||null!=h){for(b.__u|=k?160:128;j&&8===j.nodeType&&j.nextSibling;)j=j.nextSibling;h[h.indexOf(j)]=null,b.__e=j}else b.__e=e.__e,b.__k=e.__k;d.__e(a,b,e)}else null==h&&b.__v===e.__v?(b.__k=e.__k,b.__e=e.__e):b.__e=function(a,b,e,f,g,h,i,j,k){var l,m,o,p,r,t,u,v=e.props,w=b.props,y=b.type;if("svg"===y?g="http://www.w3.org/2000/svg":"math"===y?g="http://www.w3.org/1998/Math/MathML":g||(g="http://www.w3.org/1999/xhtml"),null!=h){for(l=0;l<h.length;l++)if((r=h[l])&&"setAttribute"in r==!!y&&(y?r.localName===y:3===r.nodeType)){a=r,h[l]=null;break}}if(null==a){if(null===y)return document.createTextNode(w);a=document.createElementNS(g,y,w.is&&w),j&&(d.__m&&d.__m(b,h),j=!1),h=null}if(null===y)v===w||j&&a.data===w||(a.data=w);else{if(h=h&&c.call(a.childNodes),v=e.props||n,!j&&null!=h)for(v={},l=0;l<a.attributes.length;l++)v[(r=a.attributes[l]).name]=r.value;for(l in v)if(r=v[l],"children"==l);else if("dangerouslySetInnerHTML"==l)o=r;else if(!(l in w)){if("value"==l&&"defaultValue"in w||"checked"==l&&"defaultChecked"in w)continue;C(a,l,null,r,g)}for(l in w)r=w[l],"children"==l?p=r:"dangerouslySetInnerHTML"==l?m=r:"value"==l?t=r:"checked"==l?u=r:j&&"function"!=typeof r||v[l]===r||C(a,l,r,v[l],g);if(m)j||o&&(m.__html===o.__html||m.__html===a.innerHTML)||(a.innerHTML=m.__html),b.__k=[];else if(o&&(a.innerHTML=""),A(a,q(p)?p:[p],b,e,f,"foreignObject"===y?"http://www.w3.org/1999/xhtml":g,h,i,h?h[0]:e.__k&&x(e,0),j,k),null!=h)for(l=h.length;l--;)s(h[l]);j||(l="value","progress"===y&&null==t?a.removeAttribute("value"):void 0===t||t===a[l]&&("progress"!==y||t)&&("option"!==y||t===v[l])||C(a,l,t,v[l],g),l="checked",void 0!==u&&u!==a[l]&&C(a,l,u,v[l],g))}return a}(e.__e,b,e,f,g,h,i,k,l);(m=d.diffed)&&m(b)}function F(a,b,c){b.__d=void 0;for(var e=0;e<c.length;e++)G(c[e],c[++e],c[++e]);d.__c&&d.__c(b,a),a.some(function(b){try{a=b.__h,b.__h=[],a.some(function(a){a.call(b)})}catch(a){d.__e(a,b.__v)}})}function G(a,b,c){try{if("function"==typeof a){var e="function"==typeof a.__u;e&&a.__u(),e&&null==b||(a.__u=a(b))}else a.current=b}catch(a){d.__e(a,c)}}function H(a,b,c){return this.constructor(a,c)}function I(a,b,e){var f,g,h,i;d.__&&d.__(a,b),g=(f="function"==typeof e)?null:e&&e.__k||b.__k,h=[],i=[],E(b,a=(!f&&e||b).__k=t(v,null,[a]),g||n,n,b.namespaceURI,!f&&e?[e]:g?null:b.firstChild?c.call(b.childNodes):null,h,!f&&e?e:g?g.__e:b.firstChild,f,i),F(h,a,i)}c=o.slice,d={__e:function(a,b,c,d){for(var e,f,g;b=b.__;)if((e=b.__c)&&!e.__)try{if((f=e.constructor)&&null!=f.getDerivedStateFromError&&(e.setState(f.getDerivedStateFromError(a)),g=e.__d),null!=e.componentDidCatch&&(e.componentDidCatch(a,d||{}),g=e.__d),g)return e.__E=e}catch(b){a=b}throw a}},e=0,w.prototype.setState=function(a,b){var c;c=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=r({},this.state),"function"==typeof a&&(a=a(r({},c),this.props)),a&&r(c,a),null!=a&&this.__v&&(b&&this._sb.push(b),y(this))},w.prototype.forceUpdate=function(a){this.__v&&(this.__e=!0,a&&this.__h.push(a),y(this))},w.prototype.render=v,f=[],h="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=function(a,b){return a.__v.__b-b.__v.__b},z.__r=0,j=0,k=D(!1),l=D(!0),m=0,b.Component=w,b.Fragment=v,b.cloneElement=function(a,b,d){var e,f,g,h,i=r({},a.props);for(g in a.type&&a.type.defaultProps&&(h=a.type.defaultProps),b)"key"==g?e=b[g]:"ref"==g?f=b[g]:i[g]=void 0===b[g]&&void 0!==h?h[g]:b[g];return arguments.length>2&&(i.children=arguments.length>3?c.call(arguments,2):d),u(a.type,i,e||a.key,f||a.ref,null)},b.createContext=function(a,b){var c={__c:b="__cC"+m++,__:a,Consumer:function(a,b){return a.children(b)},Provider:function(a){var c,d;return this.getChildContext||(c=new Set,(d={})[b]=this,this.getChildContext=function(){return d},this.componentWillUnmount=function(){c=null},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&c.forEach(function(a){a.__e=!0,y(a)})},this.sub=function(a){c.add(a);var b=a.componentWillUnmount;a.componentWillUnmount=function(){c&&c.delete(a),b&&b.call(a)}}),a.children}};return c.Provider.__=c.Consumer.contextType=c},b.createElement=t,b.createRef=function(){return{current:null}},b.h=t,b.hydrate=function a(b,c){I(b,c,a)},b.isValidElement=function(a){return null!=a&&null==a.constructor},b.options=d,b.render=I,b.toChildArray=function a(b,c){return c=c||[],null==b||"boolean"==typeof b||(q(b)?b.some(function(b){a(b,c)}):c.push(b)),c}},22896:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511),e=c(72927),f=c(69978),g=c(94415),h=c(89722);b.default=function(a,b,c){if(b instanceof Uint8Array){if(!a.startsWith("HS"))throw TypeError((0,g.default)(b,...h.types));return(0,d.createSecretKey)(b)}if(b instanceof d.KeyObject)return b;if((0,e.isCryptoKey)(b))return(0,f.checkSigCryptoKey)(b,a,c),d.KeyObject.from(b);throw TypeError((0,g.default)(b,...h.types,"Uint8Array"))}},23056:(a,b,c)=>{let d=c(79551),{format:e}=c(28354),f=c(33734),{RPError:g,OPError:h}=c(86915),{BaseClient:i}=c(38783),{random:j,codeChallenge:k}=c(48228),l=c(65191),{resolveResponseType:m,resolveRedirectUri:n}=c(16781);function o(a,b,c={}){a?this.error(a):b?this.success(b,c):this.fail(c)}function p({client:a,params:b={},passReqToCallback:c=!1,sessionKey:e,usePKCE:g=!0,extras:h={}}={},j){if(!(a instanceof i))throw TypeError("client must be an instance of openid-client Client");if("function"!=typeof j)throw TypeError("verify callback must be a function");if(!a.issuer||!a.issuer.issuer)throw TypeError("client must have an issuer with an identifier");if(this._client=a,this._issuer=a.issuer,this._verify=j,this._passReqToCallback=c,this._usePKCE=g,this._key=e||`oidc:${d.parse(this._issuer.issuer).hostname}`,this._params=f(b),delete this._params.state,delete this._params.nonce,this._extras=f(h),this._params.response_type||(this._params.response_type=m.call(a)),this._params.redirect_uri||(this._params.redirect_uri=n.call(a)),this._params.scope||(this._params.scope="openid"),!0===this._usePKCE){let a=!!Array.isArray(this._issuer.code_challenge_methods_supported)&&this._issuer.code_challenge_methods_supported;if(a&&a.includes("S256"))this._usePKCE="S256";else if(a&&a.includes("plain"))this._usePKCE="plain";else if(a)throw TypeError("neither code_challenge_method supported by the client is supported by the issuer");else this._usePKCE="S256"}else if("string"==typeof this._usePKCE&&!["plain","S256"].includes(this._usePKCE))throw TypeError(`${this._usePKCE} is not valid/implemented PKCE code_challenge_method`);this.name=d.parse(a.issuer.issuer).hostname}p.prototype.authenticate=function(a,b){(async()=>{let c=this._client;if(!a.session)throw TypeError("authentication requires session support");let d=c.callbackParams(a),f=this._key,{0:h,length:i}=Object.keys(d);if(0===i||1===i&&"iss"===h){let d={state:j(),...this._params,...b};if(!d.nonce&&d.response_type.includes("id_token")&&(d.nonce=j()),a.session[f]=l(d,"nonce","state","max_age","response_type"),this._usePKCE&&d.response_type.includes("code")){let b=j();switch(a.session[f].code_verifier=b,this._usePKCE){case"S256":d.code_challenge=k(b),d.code_challenge_method="S256";break;case"plain":d.code_challenge=b}}this.redirect(c.authorizationUrl(d));return}let m=a.session[f];if(0===Object.keys(m||{}).length)throw Error(e('did not find expected authorization request details in session, req.session["%s"] is %j',f,m));let{state:n,nonce:p,max_age:q,code_verifier:r,response_type:s}=m;try{delete a.session[f]}catch(a){}let t={redirect_uri:this._params.redirect_uri,...b},u=await c.callback(t.redirect_uri,d,{state:n,nonce:p,max_age:q,code_verifier:r,response_type:s},this._extras),v=this._passReqToCallback,w=this._verify.length>(v?3:2)&&c.issuer.userinfo_endpoint,x=[u,o.bind(this)];if(w){if(!u.access_token)throw new g({message:"expected access_token to be returned when asking for userinfo in verify callback",tokenset:u});let a=await c.userinfo(u);x.splice(1,0,a)}v&&x.unshift(a),this._verify(...x)})().catch(a=>{a instanceof h&&"server_error"!==a.error&&!a.error.startsWith("invalid")||a instanceof g?this.fail(a):this.error(a)})},a.exports=p},23092:(a,b)=>{"use strict";async function c({options:a,paramValue:b,cookieValue:c}){let{url:d,callbacks:e}=a,f=d.origin;return b?f=await e.redirect({url:b,baseUrl:d.origin}):c&&(f=await e.redirect({url:c,baseUrl:d.origin})),{callbackUrl:f,callbackUrlCookie:f!==c?f:void 0}}Object.defineProperty(b,"__esModule",{value:!0}),b.createCallbackUrl=c},23817:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ProduceJWT=void 0;let d=c(19918),e=c(16217),f=c(51153);class g{constructor(a){if(!(0,e.default)(a))throw TypeError("JWT Claims Set MUST be an object");this._payload=a}setIssuer(a){return this._payload={...this._payload,iss:a},this}setSubject(a){return this._payload={...this._payload,sub:a},this}setAudience(a){return this._payload={...this._payload,aud:a},this}setJti(a){return this._payload={...this._payload,jti:a},this}setNotBefore(a){return"number"==typeof a?this._payload={...this._payload,nbf:a}:this._payload={...this._payload,nbf:(0,d.default)(new Date)+(0,f.default)(a)},this}setExpirationTime(a){return"number"==typeof a?this._payload={...this._payload,exp:a}:this._payload={...this._payload,exp:(0,d.default)(new Date)+(0,f.default)(a)},this}setIssuedAt(a){return void 0===a?this._payload={...this._payload,iat:(0,d.default)(new Date)}:this._payload={...this._payload,iat:a},this}}b.ProduceJWT=g},24049:(a,b)=>{"use strict";b.parse=function(a,b){if("string"!=typeof a)throw TypeError("argument str must be a string");var c={},e=a.length;if(e<2)return c;var f=b&&b.decode||k,g=0,h=0,l=0;do{if(-1===(h=a.indexOf("=",g)))break;if(-1===(l=a.indexOf(";",g)))l=e;else if(h>l){g=a.lastIndexOf(";",h-1)+1;continue}var m=i(a,g,h),n=j(a,h,m),o=a.slice(m,n);if(!d.call(c,o)){var p=i(a,h+1,l),q=j(a,l,p);34===a.charCodeAt(p)&&34===a.charCodeAt(q-1)&&(p++,q--);var r=a.slice(p,q);c[o]=function(a,b){try{return b(a)}catch(b){return a}}(r,f)}g=l+1}while(g<e);return c},b.serialize=function(a,b,d){var i=d&&d.encode||encodeURIComponent;if("function"!=typeof i)throw TypeError("option encode is invalid");if(!e.test(a))throw TypeError("argument name is invalid");var j=i(b);if(!f.test(j))throw TypeError("argument val is invalid");var k=a+"="+j;if(!d)return k;if(null!=d.maxAge){var l=Math.floor(d.maxAge);if(!isFinite(l))throw TypeError("option maxAge is invalid");k+="; Max-Age="+l}if(d.domain){if(!g.test(d.domain))throw TypeError("option domain is invalid");k+="; Domain="+d.domain}if(d.path){if(!h.test(d.path))throw TypeError("option path is invalid");k+="; Path="+d.path}if(d.expires){var m,n=d.expires;if(m=n,"[object Date]"!==c.call(m)||isNaN(n.valueOf()))throw TypeError("option expires is invalid");k+="; Expires="+n.toUTCString()}if(d.httpOnly&&(k+="; HttpOnly"),d.secure&&(k+="; Secure"),d.partitioned&&(k+="; Partitioned"),d.priority)switch("string"==typeof d.priority?d.priority.toLowerCase():d.priority){case"low":k+="; Priority=Low";break;case"medium":k+="; Priority=Medium";break;case"high":k+="; Priority=High";break;default:throw TypeError("option priority is invalid")}if(d.sameSite)switch("string"==typeof d.sameSite?d.sameSite.toLowerCase():d.sameSite){case!0:case"strict":k+="; SameSite=Strict";break;case"lax":k+="; SameSite=Lax";break;case"none":k+="; SameSite=None";break;default:throw TypeError("option sameSite is invalid")}return k};var c=Object.prototype.toString,d=Object.prototype.hasOwnProperty,e=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,f=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,g=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,h=/^[\u0020-\u003A\u003D-\u007E]*$/;function i(a,b,c){do{var d=a.charCodeAt(b);if(32!==d&&9!==d)return b}while(++b<c);return c}function j(a,b,c){for(;b>c;){var d=a.charCodeAt(--b);if(32!==d&&9!==d)return b+1}return c}function k(a){return -1!==a.indexOf("%")?decodeURIComponent(a):a}},24687:a=>{a.exports.keystores=new WeakMap},25066:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511),e=c(28354);b.default=e.types.isKeyObject?a=>e.types.isKeyObject(a):a=>null!=a&&a instanceof d.KeyObject},25435:(a,b,c)=>{"use strict";c.d(b,{f:()=>x});var d=c(49122),e=c(46493);class f{static [e.i]="ConsoleLogWriter";write(a){console.log(a)}}class g{static [e.i]="DefaultLogger";writer;constructor(a){this.writer=a?.writer??new f}logQuery(a,b){let c=b.map(a=>{try{return JSON.stringify(a)}catch{return String(a)}}),d=c.length?` -- params: [${c.join(", ")}]`:"";this.writer.write(`Query: ${a}${d}`)}}class h{static [e.i]="NoopLogger";logQuery(){}}var i=c(79844),j=c(53110),k=c(6194),l=c(41313),m=c(87593),n=c(20862),o=c(27017);class p{constructor(a){this.query=a}authToken;getQuery(){return this.query}mapResult(a,b){return a}setToken(a){return this.authToken=a,this}static [e.i]="PgPreparedQuery";joinsNotNullableMap}class q{constructor(a){this.dialect=a}static [e.i]="PgSession";execute(a,b){return o.k.startActiveSpan("drizzle.operation",()=>o.k.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1)).setToken(b).execute(void 0,b))}all(a){return this.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,!1).all()}async count(a,b){return Number((await this.execute(a,b))[0].count)}}class r extends i.p{constructor(a,b,c,d=0){super(a,b,c),this.schema=c,this.nestedIndex=d}static [e.i]="PgTransaction";rollback(){throw new m.j}getTransactionConfigSQL(a){let b=[];return a.isolationLevel&&b.push(`isolation level ${a.isolationLevel}`),a.accessMode&&b.push(a.accessMode),"boolean"==typeof a.deferrable&&b.push(a.deferrable?"deferrable":"not deferrable"),n.ll.raw(b.join(" "))}setTransaction(a){return this.session.execute((0,n.ll)`set transaction ${this.getTransactionConfigSQL(a)}`)}}class s extends p{constructor(a,b,c,d,e,f,g){super({sql:b,params:c}),this.client=a,this.queryString=b,this.params=c,this.logger=d,this.fields=e,this._isResponseInArrayMode=f,this.customResultMapper=g}static [e.i]="PostgresJsPreparedQuery";async execute(a={}){return o.k.startActiveSpan("drizzle.execute",async b=>{let c=(0,n.Ct)(this.params,a);b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.logger.logQuery(this.queryString,c);let{fields:d,queryString:e,client:f,joinsNotNullableMap:g,customResultMapper:h}=this;if(!d&&!h)return o.k.startActiveSpan("drizzle.driver.execute",()=>f.unsafe(e,c));let i=await o.k.startActiveSpan("drizzle.driver.execute",()=>(b?.setAttributes({"drizzle.query.text":e,"drizzle.query.params":JSON.stringify(c)}),f.unsafe(e,c).values()));return o.k.startActiveSpan("drizzle.mapResponse",()=>h?h(i):i.map(a=>(0,l.a6)(d,a,g)))})}all(a={}){return o.k.startActiveSpan("drizzle.execute",async b=>{let c=(0,n.Ct)(this.params,a);return b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.logger.logQuery(this.queryString,c),o.k.startActiveSpan("drizzle.driver.execute",()=>(b?.setAttributes({"drizzle.query.text":this.queryString,"drizzle.query.params":JSON.stringify(c)}),this.client.unsafe(this.queryString,c)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}}class t extends q{constructor(a,b,c,d={}){super(b),this.client=a,this.schema=c,this.options=d,this.logger=d.logger??new h}static [e.i]="PostgresJsSession";logger;prepareQuery(a,b,c,d,e){return new s(this.client,a.sql,a.params,this.logger,b,d,e)}query(a,b){return this.logger.logQuery(a,b),this.client.unsafe(a,b).values()}queryObjects(a,b){return this.client.unsafe(a,b)}transaction(a,b){return this.client.begin(async c=>{let d=new t(c,this.dialect,this.schema,this.options),e=new u(this.dialect,d,this.schema);return b&&await e.setTransaction(b),a(e)})}}class u extends r{constructor(a,b,c,d=0){super(a,b,c,d),this.session=b}static [e.i]="PostgresJsTransaction";transaction(a){return this.session.client.savepoint(b=>{let c=new t(b,this.dialect,this.schema,this.session.options);return a(new u(this.dialect,c,this.schema))})}}class v extends i.p{static [e.i]="PostgresJsDatabase"}function w(a,b={}){let c,d,e=a=>a;for(let b of["1184","1082","1083","1114"])a.options.parsers[b]=e,a.options.serializers[b]=e;a.options.serializers["114"]=e,a.options.serializers["3802"]=e;let f=new j.s({casing:b.casing});if(!0===b.logger?c=new g:!1!==b.logger&&(c=b.logger),b.schema){let a=(0,k._k)(b.schema,k.DZ);d={fullSchema:b.schema,schema:a.tables,tableNamesMap:a.tableNamesMap}}let h=new t(a,f,d,{logger:c}),i=new v(f,h,d);return i.$client=a,i}function x(...a){if("string"==typeof a[0])return w((0,d.A)(a[0]),a[1]);if((0,l.Lq)(a[0])){let{connection:b,client:c,...e}=a[0];if(c)return w(c,e);if("object"==typeof b&&void 0!==b.url){let{url:a,...c}=b;return w((0,d.A)(a,c),e)}return w((0,d.A)(b),e)}return w(a[0],a[1])}(x||(x={})).mock=function(a){return w({},a)}},25824:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){return{headers:[{key:"Content-Type",value:"application/json"}],body:a.reduce((a,{id:b,name:c,type:d,signinUrl:e,callbackUrl:f})=>(a[b]={id:b,name:c,type:d,signinUrl:e,callbackUrl:f},a),{})}}},26077:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decodeProtectedHeader=void 0;let d=c(45592),e=c(74855),f=c(16217);b.decodeProtectedHeader=function(a){let b;if("string"==typeof a){let c=a.split(".");(3===c.length||5===c.length)&&([b]=c)}else if("object"==typeof a&&a)if("protected"in a)b=a.protected;else throw TypeError("Token does not contain a Protected Header");try{if("string"!=typeof b||!b)throw Error();let a=JSON.parse(e.decoder.decode((0,d.decode)(b)));if(!(0,f.default)(a))throw Error();return a}catch{throw TypeError("Invalid Token or Protected Header formatting")}}},26274:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511),e=c(69558),f=c(69817),g=c(85633),h=c(40295),i={padding:d.constants.RSA_PKCS1_PSS_PADDING,saltLength:d.constants.RSA_PSS_SALTLEN_DIGEST},j=new Map([["ES256","P-256"],["ES256K","secp256k1"],["ES384","P-384"],["ES512","P-521"]]);b.default=function(a,b){switch(a){case"EdDSA":if(!["ed25519","ed448"].includes(b.asymmetricKeyType))throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ed25519 or ed448");return b;case"RS256":case"RS384":case"RS512":if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,g.default)(b,a),b;case h.rsaPssParams&&"PS256":case h.rsaPssParams&&"PS384":case h.rsaPssParams&&"PS512":if("rsa-pss"===b.asymmetricKeyType){let{hashAlgorithm:c,mgf1HashAlgorithm:d,saltLength:e}=b.asymmetricKeyDetails,f=parseInt(a.slice(-3),10);if(void 0!==c&&(c!==`sha${f}`||d!==c))throw TypeError(`Invalid key for this operation, its RSA-PSS parameters do not meet the requirements of "alg" ${a}`);if(void 0!==e&&e>f>>3)throw TypeError(`Invalid key for this operation, its RSA-PSS parameter saltLength does not meet the requirements of "alg" ${a}`)}else if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa or rsa-pss");return(0,g.default)(b,a),{key:b,...i};case!h.rsaPssParams&&"PS256":case!h.rsaPssParams&&"PS384":case!h.rsaPssParams&&"PS512":if("rsa"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be rsa");return(0,g.default)(b,a),{key:b,...i};case"ES256":case"ES256K":case"ES384":case"ES512":{if("ec"!==b.asymmetricKeyType)throw TypeError("Invalid key for this operation, its asymmetricKeyType must be ec");let c=(0,e.default)(b),d=j.get(a);if(c!==d)throw TypeError(`Invalid key curve for the algorithm, its curve must be ${d}, got ${c}`);return{dsaEncoding:"ieee-p1363",key:b}}default:throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},27017:(a,b,c)=>{"use strict";let d,e;c.d(b,{k:()=>g});var f=c(47878);let g={startActiveSpan:(a,b)=>d?(e||(e=d.trace.getTracer("drizzle-orm","0.36.4")),(0,f.i)((c,d)=>d.startActiveSpan(a,a=>{try{return b(a)}catch(b){throw a.setStatus({code:c.SpanStatusCode.ERROR,message:b instanceof Error?b.message:"Unknown error"}),b}finally{a.end()}}),d,e)):b()}},27067:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817);b.default=function(a){if(!(a instanceof Uint8Array)||a.length<8)throw new d.JWEInvalid("PBES2 Salt Input must be 8 or more octets")}},28162:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511);b.default=(a,b)=>(0,d.createHash)(a).update(b).digest()},28481:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CompactEncrypt=void 0;let d=c(93695);class e{constructor(a){this._flattened=new d.FlattenedEncrypt(a)}setContentEncryptionKey(a){return this._flattened.setContentEncryptionKey(a),this}setInitializationVector(a){return this._flattened.setInitializationVector(a),this}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}setKeyManagementParameters(a){return this._flattened.setKeyManagementParameters(a),this}async encrypt(a,b){let c=await this._flattened.encrypt(a,b);return[c.protected,c.encrypted_key,c.iv,c.ciphertext,c.tag].join(".")}}b.CompactEncrypt=e},28665:(a,b,c)=>{var d=c(35653).default,e=c(87852);a.exports=function(a){var b=e(a,"string");return"symbol"==d(b)?b:b+""},a.exports.__esModule=!0,a.exports.default=a.exports},28706:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),!function(a,b){for(var c in b)Object.defineProperty(a,c,{enumerable:!0,get:b[c]})}(b,{MutableRequestCookiesAdapter:function(){return l},ReadonlyRequestCookiesError:function(){return g},RequestCookiesAdapter:function(){return h},appendMutableCookies:function(){return k},areCookiesMutableInCurrentPhase:function(){return n},createCookiesWithMutableAccessCheck:function(){return m},getModifiedCookieValues:function(){return j},responseCookiesToRequestCookies:function(){return p}});let d=c(33675),e=c(63036),f=c(29294);class g extends Error{constructor(){super("Cookies can only be modified in a Server Action or Route Handler. Read more: https://nextjs.org/docs/app/api-reference/functions/cookies#options")}static callable(){throw new g}}class h{static seal(a){return new Proxy(a,{get(a,b,c){switch(b){case"clear":case"delete":case"set":return g.callable;default:return e.ReflectAdapter.get(a,b,c)}}})}}let i=Symbol.for("next.mutated.cookies");function j(a){let b=a[i];return b&&Array.isArray(b)&&0!==b.length?b:[]}function k(a,b){let c=j(b);if(0===c.length)return!1;let e=new d.ResponseCookies(a),f=e.getAll();for(let a of c)e.set(a);for(let a of f)e.set(a);return!0}class l{static wrap(a,b){let c=new d.ResponseCookies(new Headers);for(let b of a.getAll())c.set(b);let g=[],h=new Set,j=()=>{let a=f.workAsyncStorage.getStore();if(a&&(a.pathWasRevalidated=!0),g=c.getAll().filter(a=>h.has(a.name)),b){let a=[];for(let b of g){let c=new d.ResponseCookies(new Headers);c.set(b),a.push(c.toString())}b(a)}},k=new Proxy(c,{get(a,b,c){switch(b){case i:return g;case"delete":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.delete(...b),k}finally{j()}};case"set":return function(...b){h.add("string"==typeof b[0]?b[0]:b[0].name);try{return a.set(...b),k}finally{j()}};default:return e.ReflectAdapter.get(a,b,c)}}});return k}}function m(a){let b=new Proxy(a.mutableCookies,{get(c,d,f){switch(d){case"delete":return function(...d){return o(a,"cookies().delete"),c.delete(...d),b};case"set":return function(...d){return o(a,"cookies().set"),c.set(...d),b};default:return e.ReflectAdapter.get(c,d,f)}}});return b}function n(a){return"action"===a.phase}function o(a,b){if(!n(a))throw new g}function p(a){let b=new d.RequestCookies(new Headers);for(let c of a.getAll())b.set(c);return b}},29205:(a,b,c)=>{"use strict";c.d(b,{dL:()=>h,uR:()=>i});var d=c(46493),e=c(20862),f=c(93352);class g extends f.pe{static [d.i]="PgUUIDBuilder";constructor(a){super(a,"string","PgUUID")}defaultRandom(){return this.default((0,e.ll)`gen_random_uuid()`)}build(a){return new h(a,this.config)}}class h extends f.Kl{static [d.i]="PgUUID";getSQLType(){return"uuid"}}function i(a){return new g(a??"")}},29300:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.SignJWT=void 0;let d=c(98197),e=c(69817),f=c(74855),g=c(23817);class h extends g.ProduceJWT{setProtectedHeader(a){return this._protectedHeader=a,this}async sign(a,b){var c;let g=new d.CompactSign(f.encoder.encode(JSON.stringify(this._payload)));if(g.setProtectedHeader(this._protectedHeader),Array.isArray(null==(c=this._protectedHeader)?void 0:c.crit)&&this._protectedHeader.crit.includes("b64")&&!1===this._protectedHeader.b64)throw new e.JWTInvalid("JWTs MUST NOT use unencoded payload");return g.sign(a,b)}}b.SignJWT=h},29662:(a,b,c)=>{"use strict";b.A=function(a){return{id:"email",type:"email",name:"Email",server:{host:"localhost",port:25,auth:{user:"",pass:""}},from:"NextAuth <no-reply@example.com>",maxAge:86400,async sendVerificationRequest(a){let{identifier:b,url:c,provider:e,theme:f}=a,{host:g}=new URL(c),h=(0,d.createTransport)(e.server),i=await h.sendMail({to:b,from:e.from,subject:`Sign in to ${g}`,text:function({url:a,host:b}){return`Sign in to ${b}
${a}

`}({url:c,host:g}),html:function(a){let{url:b,host:c,theme:d}=a,e=c.replace(/\./g,"&#8203;."),f=d.brandColor||"#346df1",g=d.buttonText||"#fff",h="#444";return`
<body style="background: #f9f9f9;">
  <table width="100%" border="0" cellspacing="20" cellpadding="0"
    style="background: #fff; max-width: 600px; margin: auto; border-radius: 10px;">
    <tr>
      <td align="center"
        style="padding: 10px 0px; font-size: 22px; font-family: Helvetica, Arial, sans-serif; color: ${h};">
        Sign in to <strong>${e}</strong>
      </td>
    </tr>
    <tr>
      <td align="center" style="padding: 20px 0;">
        <table border="0" cellspacing="0" cellpadding="0">
          <tr>
            <td align="center" style="border-radius: 5px;" bgcolor="${f}"><a href="${b}"
                target="_blank"
                style="font-size: 18px; font-family: Helvetica, Arial, sans-serif; color: ${g}; text-decoration: none; border-radius: 5px; padding: 10px 20px; border: 1px solid ${f}; display: inline-block; font-weight: bold;">Sign
                in</a></td>
          </tr>
        </table>
      </td>
    </tr>
    <tr>
      <td align="center"
        style="padding: 0px 0px 10px 0px; font-size: 16px; line-height: 22px; font-family: Helvetica, Arial, sans-serif; color: ${h};">
        If you did not request this email you can safely ignore it.
      </td>
    </tr>
  </table>
</body>
`}({url:c,host:g,theme:f})}),j=i.rejected.concat(i.pending).filter(Boolean);if(j.length)throw Error(`Email (${j.join(", ")}) could not be sent`)},options:a}};var d=c(66834)},29745:(a,b,c)=>{"use strict";c.d(b,{Qq:()=>i});var d=c(46493),e=c(41313),f=c(93352);class g extends f.pe{static [d.i]="PgTextBuilder";constructor(a,b){super(a,"string","PgText"),this.config.enumValues=b.enum}build(a){return new h(a,this.config)}}class h extends f.Kl{static [d.i]="PgText";enumValues=this.config.enumValues;getSQLType(){return"text"}}function i(a,b={}){let{name:c,config:d}=(0,e.Ll)(a,b);return new g(c,d)}},30660:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817),e=c(95032);b.default=(a,b)=>{if(b.length<<3!==(0,e.bitLength)(a))throw new d.JWEInvalid("Invalid Initialization Vector length")}},31375:(a,b,c)=>{"use strict";c.d(b,{hv:()=>g,ie:()=>f});var d=c(46493),e=c(67969);function f(...a){return a[0].columns?new g(a[0].columns,a[0].name):new g(a)}class g{static [d.i]="PgPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new h(a,this.columns,this.name)}}class h{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [d.i]="PgPrimaryKey";columns;name;getName(){return this.name??`${this.table[e.mu.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}},31999:a=>{function b(){return a.exports=b=Object.assign?Object.assign.bind():function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)({}).hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},a.exports.__esModule=!0,a.exports.default=a.exports,b.apply(null,arguments)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},32347:(a,b,c)=>{let{STATUS_CODES:d}=c(81630),{format:e}=c(28354),{OPError:f}=c(86915),g=c(61721);a.exports=function(a,{statusCode:b=200,body:c=!0,bearer:h=!1}={}){if(a.statusCode!==b){if(h&&(a=>{let b=g(a.headers["www-authenticate"]);if(b.error)throw new f(b,a)})(a),(a=>{let b=!1;try{let c;c="object"!=typeof a.body||Buffer.isBuffer(a.body)?JSON.parse(a.body):a.body,(b="string"==typeof c.error&&c.error.length)&&Object.defineProperty(a,"body",{value:c,configurable:!0})}catch(a){}return b})(a))throw new f(a.body,a);throw new f({error:e("expected %i %s, got: %i %s",b,d[b],a.statusCode,d[a.statusCode])},a)}if(c&&!a.body)throw new f({error:e("expected %i %s with body but no body was returned",b,d[b])},a);return a.body}},32466:(a,b,c)=>{var d=c(35304),e=c(47076);a.exports=function(a,b,c,f,g){return new e(d().w(a,b,c,f),g||Promise)},a.exports.__esModule=!0,a.exports.default=a.exports},32547:a=>{function b(c,d,e,f){var g=Object.defineProperty;try{g({},"",{})}catch(a){g=0}a.exports=b=function(a,c,d,e){function f(c,d){b(a,c,function(a){return this._invoke(c,d,a)})}c?g?g(a,c,{value:d,enumerable:!e,configurable:!e,writable:!e}):a[c]=d:(f("next",0),f("throw",1),f("return",2))},a.exports.__esModule=!0,a.exports.default=a.exports,b(c,d,e,f)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},33734:a=>{a.exports=globalThis.structuredClone||(a=>JSON.parse(JSON.stringify(a)))},34334:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=h;var d=c(84592),e=c(49934),f=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=g(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&({}).hasOwnProperty.call(a,f)){var h=e?Object.getOwnPropertyDescriptor(a,f):null;h&&(h.get||h.set)?Object.defineProperty(d,f,h):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}(c(15514));function g(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(g=function(a){return a?c:b})(a)}async function h({options:a,query:b}){var c,g,h;let{logger:i,provider:j}=a,k={};if("string"==typeof j.authorization){let a=Object.fromEntries(new URL(j.authorization).searchParams);k={...k,...a}}else k={...k,...null==(g=j.authorization)?void 0:g.params};if(k={...k,...b},null!=(c=j.version)&&c.startsWith("1.")){let b=(0,e.oAuth1Client)(a),c=await b.getOAuthRequestToken(k),d=`${null==(h=j.authorization)?void 0:h.url}?${new URLSearchParams({oauth_token:c.oauth_token,oauth_token_secret:c.oauth_token_secret,...c.params})}`;return e.oAuth1TokenStore.set(c.oauth_token,c.oauth_token_secret),i.debug("GET_AUTHORIZATION_URL",{url:d,provider:j}),{redirect:d}}let l=await (0,d.openidClient)(a),m=k,n=[];await f.state.create(a,n,m),await f.pkce.create(a,n,m),await f.nonce.create(a,n,m);let o=l.authorizationUrl(m);return i.debug("GET_AUTHORIZATION_URL",{url:o,cookies:n,provider:j}),{redirect:o,cookies:n}}},34603:(a,b,c)=>{"use strict";Object.defineProperty(b,"b",{enumerable:!0,get:function(){return m}});let d=c(67675),e=c(29294),f=c(63033),g=c(26906),h=c(11938),i=c(82831),j=c(30787),k=c(31716),l=c(49290);function m(){let a="headers",b=e.workAsyncStorage.getStore(),c=f.workUnitAsyncStorage.getStore();if(b){if(c&&"after"===c.phase&&!(0,k.isRequestAPICallableInsideAfter)())throw Object.defineProperty(Error(`Route ${b.route} used "headers" inside "after(...)". This is not supported. If you need this data inside an "after" callback, use "headers" outside of the callback. See more info here: https://nextjs.org/docs/canary/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E367",enumerable:!1,configurable:!0});if(b.forceStatic)return o(d.HeadersAdapter.seal(new Headers({})));if(c)switch(c.type){case"cache":{let a=Object.defineProperty(Error(`Route ${b.route} used "headers" inside "use cache". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E304",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"private-cache":{let a=Object.defineProperty(Error(`Route ${b.route} used "headers" inside "use cache: private". Accessing "headers" inside a private cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E742",enumerable:!1,configurable:!0});throw Error.captureStackTrace(a,m),b.invalidDynamicUsageError??=a,a}case"unstable-cache":throw Object.defineProperty(Error(`Route ${b.route} used "headers" inside a function cached with "unstable_cache(...)". Accessing Dynamic data sources inside a cache scope is not supported. If you need this data inside a cached function use "headers" outside of the cached function and pass the required dynamic data in as an argument. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E127",enumerable:!1,configurable:!0})}if(b.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${b.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`headers\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E525",enumerable:!1,configurable:!0});if(c)switch(c.type){case"prerender":case"prerender-runtime":var j=b,p=c;let e=n.get(p);if(e)return e;let f=(0,i.makeHangingPromise)(p.renderSignal,j.route,"`headers()`");return n.set(p,f),f;case"prerender-client":let q="`headers`";throw Object.defineProperty(new l.InvariantError(`${q} must not be used within a client component. Next.js should be preventing ${q} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,g.postponeWithTracking)(b.route,a,c.dynamicTracking);case"prerender-legacy":return(0,g.throwToInterruptStaticGeneration)(a,b,c);case"request":return(0,g.trackDynamicDataInDynamicRender)(c),o(c.headers)}}(0,f.throwForMissingRequestStore)(a)}c(63036);let n=new WeakMap;function o(a){let b=n.get(a);if(b)return b;let c=Promise.resolve(a);return n.set(a,c),Object.defineProperties(c,{append:{value:a.append.bind(a)},delete:{value:a.delete.bind(a)},get:{value:a.get.bind(a)},has:{value:a.has.bind(a)},set:{value:a.set.bind(a)},getSetCookie:{value:a.getSetCookie.bind(a)},forEach:{value:a.forEach.bind(a)},keys:{value:a.keys.bind(a)},values:{value:a.values.bind(a)},entries:{value:a.entries.bind(a)},[Symbol.iterator]:{value:a[Symbol.iterator].bind(a)}}),c}(0,j.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`headers()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E277",enumerable:!1,configurable:!0})})},35071:(a,b,c)=>{"use strict";c.d(b,{E:()=>d});let d=Symbol.for("drizzle:Name")},35254:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GeneralSign=void 0;let d=c(69531),e=c(69817);class f{constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setProtectedHeader(a){if(this.protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this.protectedHeader=a,this}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addSignature(...a){return this.parent.addSignature(...a)}sign(...a){return this.parent.sign(...a)}done(){return this.parent}}class g{constructor(a){this._signatures=[],this._payload=a}addSignature(a,b){let c=new f(this,a,b);return this._signatures.push(c),c}async sign(){if(!this._signatures.length)throw new e.JWSInvalid("at least one signature must be added");let a={signatures:[],payload:""};for(let b=0;b<this._signatures.length;b++){let c=this._signatures[b],f=new d.FlattenedSign(this._payload);f.setProtectedHeader(c.protectedHeader),f.setUnprotectedHeader(c.unprotectedHeader);let{payload:g,...h}=await f.sign(c.key,c.options);if(0===b)a.payload=g;else if(a.payload!==g)throw new e.JWSInvalid("inconsistent use of JWS Unencoded Payload (RFC7797)");a.signatures.push(h)}return a}}b.GeneralSign=g},35304:(a,b,c)=>{var d=c(32547);function e(){var b,c,f="function"==typeof Symbol?Symbol:{},g=f.iterator||"@@iterator",h=f.toStringTag||"@@toStringTag";function i(a,e,f,g){var h=Object.create((e&&e.prototype instanceof k?e:k).prototype);return d(h,"_invoke",function(a,d,e){var f,g,h,i=0,k=e||[],l=!1,m={p:0,n:0,v:b,a:n,f:n.bind(b,4),d:function(a,c){return f=a,g=0,h=b,m.n=c,j}};function n(a,d){for(g=a,h=d,c=0;!l&&i&&!e&&c<k.length;c++){var e,f=k[c],n=m.p,o=f[2];a>3?(e=o===d)&&(h=f[(g=f[4])?5:(g=3,3)],f[4]=f[5]=b):f[0]<=n&&((e=a<2&&n<f[1])?(g=0,m.v=d,m.n=f[1]):n<o&&(e=a<3||f[0]>d||d>o)&&(f[4]=a,f[5]=d,m.n=o,g=0))}if(e||a>1)return j;throw l=!0,d}return function(e,k,o){if(i>1)throw TypeError("Generator is already running");for(l&&1===k&&n(k,o),g=k,h=o;(c=g<2?b:h)||!l;){f||(g?g<3?(g>1&&(m.n=-1),n(g,h)):m.n=h:m.v=h);try{if(i=2,f){if(g||(e="next"),c=f[e]){if(!(c=c.call(f,h)))throw TypeError("iterator result is not an object");if(!c.done)return c;h=c.value,g<2&&(g=0)}else 1===g&&(c=f.return)&&c.call(f),g<2&&(h=TypeError("The iterator does not provide a '"+e+"' method"),g=1);f=b}else if((c=(l=m.n<0)?h:a.call(d,m))!==j)break}catch(a){f=b,g=1,h=a}finally{i=1}}return{value:c,done:l}}}(a,f,g),!0),h}var j={};function k(){}function l(){}function m(){}c=Object.getPrototypeOf;var n=m.prototype=k.prototype=Object.create([][g]?c(c([][g]())):(d(c={},g,function(){return this}),c));function o(a){return Object.setPrototypeOf?Object.setPrototypeOf(a,m):(a.__proto__=m,d(a,h,"GeneratorFunction")),a.prototype=Object.create(n),a}return l.prototype=m,d(n,"constructor",m),d(m,"constructor",l),l.displayName="GeneratorFunction",d(m,h,"GeneratorFunction"),d(n),d(n,h,"Generator"),d(n,g,function(){return this}),d(n,"toString",function(){return"[object Generator]"}),(a.exports=e=function(){return{w:i,m:o}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=e,a.exports.__esModule=!0,a.exports.default=a.exports},35538:(a,b,c)=>{var d=c(51117),e=c(35304),f=c(40626),g=c(32466),h=c(47076),i=c(99224),j=c(77366);function k(){"use strict";var b=e(),c=b.m(k),l=(Object.getPrototypeOf?Object.getPrototypeOf(c):c.__proto__).constructor;function m(a){var b="function"==typeof a&&a.constructor;return!!b&&(b===l||"GeneratorFunction"===(b.displayName||b.name))}var n={throw:1,return:2,break:3,continue:3};function o(a){var b,c;return function(d){b||(b={stop:function(){return c(d.a,2)},catch:function(){return d.v},abrupt:function(a,b){return c(d.a,n[a],b)},delegateYield:function(a,e,f){return b.resultName=e,c(d.d,j(a),f)},finish:function(a){return c(d.f,a)}},c=function(a,c,e){d.p=b.prev,d.n=b.next;try{return a(c,e)}finally{b.next=d.n}}),b.resultName&&(b[b.resultName]=d.v,b.resultName=void 0),b.sent=d.v,b.next=d.n;try{return a.call(this,b)}finally{d.p=b.prev,d.n=b.next}}}return(a.exports=k=function(){return{wrap:function(a,c,d,e){return b.w(o(a),c,d,e&&e.reverse())},isGeneratorFunction:m,mark:b.m,awrap:function(a,b){return new d(a,b)},AsyncIterator:h,async:function(a,b,c,d,e){return(m(b)?g:f)(o(a),b,c,d,e)},keys:i,values:j}},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=k,a.exports.__esModule=!0,a.exports.default=a.exports},35642:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=(a,b)=>{if(void 0!==b&&(!Array.isArray(b)||b.some(a=>"string"!=typeof a)))throw TypeError(`"${a}" option must be an array of strings`);if(b)return new Set(b)}},35653:a=>{function b(c){return a.exports=b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},a.exports.__esModule=!0,a.exports.default=a.exports,b(c)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},35916:(a,b,c)=>{"use strict";Object.defineProperty(b,"r",{enumerable:!0,get:function(){return k}});let d=c(63033),e=c(29294),f=c(26906),g=c(30787),h=c(11938),i=c(69168),j=c(49290);function k(){let a=e.workAsyncStorage.getStore(),b=d.workUnitAsyncStorage.getStore();switch((!a||!b)&&(0,d.throwForMissingRequestStore)("draftMode"),b.type){case"prerender-runtime":return(0,f.delayUntilRuntimeStage)(b,l(b.draftMode,a));case"request":return l(b.draftMode,a);case"cache":case"private-cache":case"unstable-cache":let c=(0,d.getDraftModeProviderForCacheScope)(a,b);if(c)return l(c,a);case"prerender":case"prerender-client":case"prerender-ppr":case"prerender-legacy":return l(null,a);default:return b}}function l(a,b){let c,d=a??m,e=n.get(d);return e||(c=function(a){let b=new o(a),c=Promise.resolve(b);return Object.defineProperty(c,"isEnabled",{get:()=>b.isEnabled,enumerable:!0,configurable:!0}),c.enable=b.enable.bind(b),c.disable=b.disable.bind(b),c}(a),n.set(d,c),c)}c(63036);let m={},n=new WeakMap;class o{constructor(a){this._provider=a}get isEnabled(){return null!==this._provider&&this._provider.isEnabled}enable(){p("draftMode().enable()",this.enable),null!==this._provider&&this._provider.enable()}disable(){p("draftMode().disable()",this.disable),null!==this._provider&&this._provider.disable()}}function p(a,b){let c=e.workAsyncStorage.getStore(),g=d.workUnitAsyncStorage.getStore();if(c){if((null==g?void 0:g.phase)==="after")throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside \`after\`. The enabled status of draftMode can be read inside \`after\` but you cannot enable or disable draftMode. See more info here: https://nextjs.org/docs/app/api-reference/functions/after`),"__NEXT_ERROR_CODE",{value:"E348",enumerable:!1,configurable:!0});if(c.dynamicShouldError)throw Object.defineProperty(new h.StaticGenBailoutError(`Route ${c.route} with \`dynamic = "error"\` couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E553",enumerable:!1,configurable:!0});if(g)switch(g.type){case"cache":case"private-cache":{let d=Object.defineProperty(Error(`Route ${c.route} used "${a}" inside "use cache". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/messages/next-request-in-use-cache`),"__NEXT_ERROR_CODE",{value:"E246",enumerable:!1,configurable:!0});throw Error.captureStackTrace(d,b),c.invalidDynamicUsageError??=d,d}case"unstable-cache":throw Object.defineProperty(Error(`Route ${c.route} used "${a}" inside a function cached with "unstable_cache(...)". The enabled status of draftMode can be read in caches but you must not enable or disable draftMode inside a cache. See more info here: https://nextjs.org/docs/app/api-reference/functions/unstable_cache`),"__NEXT_ERROR_CODE",{value:"E259",enumerable:!1,configurable:!0});case"prerender":case"prerender-runtime":{let b=Object.defineProperty(Error(`Route ${c.route} used ${a} without first calling \`await connection()\`. See more info here: https://nextjs.org/docs/messages/next-prerender-sync-headers`),"__NEXT_ERROR_CODE",{value:"E126",enumerable:!1,configurable:!0});return(0,f.abortAndThrowOnSynchronousRequestDataAccess)(c.route,a,b,g)}case"prerender-client":let d="`draftMode`";throw Object.defineProperty(new j.InvariantError(`${d} must not be used within a client component. Next.js should be preventing ${d} from being included in client components statically, but did not in this case.`),"__NEXT_ERROR_CODE",{value:"E693",enumerable:!1,configurable:!0});case"prerender-ppr":return(0,f.postponeWithTracking)(c.route,a,g.dynamicTracking);case"prerender-legacy":g.revalidate=0;let e=Object.defineProperty(new i.DynamicServerError(`Route ${c.route} couldn't be rendered statically because it used \`${a}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw c.dynamicUsageDescription=a,c.dynamicUsageStack=e.stack,e;case"request":(0,f.trackDynamicDataInDynamicRender)(g)}}}(0,g.createDedupedByCallsiteServerErrorLoggerDev)(function(a,b){let c=a?`Route "${a}" `:"This route ";return Object.defineProperty(Error(`${c}used ${b}. \`draftMode()\` should be awaited before using its value. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis`),"__NEXT_ERROR_CODE",{value:"E377",enumerable:!1,configurable:!0})})},36165:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511),e=c(30660),f=c(52349),g=c(74855),h=c(69817),i=c(78109),j=c(5061),k=c(72927),l=c(69978),m=c(25066),n=c(94415),o=c(11192),p=c(89722);b.default=(a,b,c,q,r,s)=>{let t;if((0,k.isCryptoKey)(b))(0,l.checkEncCryptoKey)(b,a,"decrypt"),t=d.KeyObject.from(b);else if(b instanceof Uint8Array||(0,m.default)(b))t=b;else throw TypeError((0,n.default)(b,...p.types,"Uint8Array"));switch((0,f.default)(a,t),(0,e.default)(a,q),a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return function(a,b,c,e,f,k){let l,n,p=parseInt(a.slice(1,4),10);(0,m.default)(b)&&(b=b.export());let q=b.subarray(p>>3),r=b.subarray(0,p>>3),s=parseInt(a.slice(-3),10),t=`aes-${p}-cbc`;if(!(0,o.default)(t))throw new h.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);let u=(0,j.default)(k,e,c,s,r,p);try{l=(0,i.default)(f,u)}catch{}if(!l)throw new h.JWEDecryptionFailed;try{let a=(0,d.createDecipheriv)(t,q,e);n=(0,g.concat)(a.update(c),a.final())}catch{}if(!n)throw new h.JWEDecryptionFailed;return n}(a,t,c,q,r,s);case"A128GCM":case"A192GCM":case"A256GCM":return function(a,b,c,e,f,g){let i=parseInt(a.slice(1,4),10),j=`aes-${i}-gcm`;if(!(0,o.default)(j))throw new h.JOSENotSupported(`alg ${a} is not supported by your javascript runtime`);try{let a=(0,d.createDecipheriv)(j,b,e,{authTagLength:16});a.setAuthTag(f),g.byteLength&&a.setAAD(g,{plaintextLength:c.length});let h=a.update(c);return a.final(),h}catch{throw new h.JWEDecryptionFailed}}(a,t,c,q,r,s);default:throw new h.JOSENotSupported("Unsupported JWE Content Encryption Algorithm")}}},37009:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.unwrap=b.wrap=void 0;let d=c(18013),e=c(36165),f=c(95032),g=c(67040);b.wrap=async function(a,b,c,e){let h=a.slice(0,7);e||(e=(0,f.default)(h));let{ciphertext:i,tag:j}=await (0,d.default)(h,c,b,e,new Uint8Array(0));return{encryptedKey:i,iv:(0,g.encode)(e),tag:(0,g.encode)(j)}},b.unwrap=async function(a,b,c,d,f){let g=a.slice(0,7);return(0,e.default)(g,b,c,d,f,new Uint8Array(0))}},37693:a=>{"use strict";a.exports=function(a){a.prototype[Symbol.iterator]=function*(){for(let a=this.head;a;a=a.next)yield a.value}}},38783:(a,b,c)=>{"use strict";let d,{inspect:e}=c(28354),f=c(81630),g=c(55511),{strict:h}=c(12412),i=c(11723),j=c(79551),{URL:k,URLSearchParams:l}=c(79551),m=c(91499),n=c(20481),o=c(17670),p=c(93830),q=c(1796),r=c(45816),s=c(61721),{assertSigningAlgValuesSupport:t,assertIssuerConfiguration:u}=c(8172),v=c(65191),w=c(41387),x=c(32347),y=c(99064),{OPError:z,RPError:A}=c(86915),B=c(65859),{random:C}=c(48228),D=c(81409),{CLOCK_TOLERANCE:E}=c(60974),{keystores:F}=c(24687),G=c(15366),H=c(33734),{authenticatedPost:I,resolveResponseType:J,resolveRedirectUri:K}=c(16781),{queryKeyStore:L}=c(81365),M=c(72026),[N,O]=process.version.slice(1).split(".").map(a=>parseInt(a,10)),P=N>=17||16===N&&O>=9,Q=Symbol(),R=Symbol(),S=Symbol();function T(a){return v(a,"access_token","code","error_description","error_uri","error","expires_in","id_token","iss","response","session_state","state","token_type")}function U(a,b="Bearer"){return`${b} ${a}`}function V(a){let b=j.parse(a);return b.search?i.parse(b.search.substring(1)):{}}function W(a,b,c){if(void 0===a[c])throw new A({message:`missing required JWT property ${c}`,jwt:b})}function X(a){let b={client_id:this.client_id,scope:"openid",response_type:J.call(this),redirect_uri:K.call(this),...a};return Object.entries(b).forEach(([a,c])=>{null==c?delete b[a]:"claims"===a&&"object"==typeof c?b[a]=JSON.stringify(c):"resource"===a&&Array.isArray(c)?b[a]=c:"string"!=typeof c&&(b[a]=String(c))}),b}function Y(a){if(!w(a)||!Array.isArray(a.keys)||a.keys.some(a=>!w(a)||!("kty"in a)))throw TypeError("jwks must be a JSON Web Key Set formatted object");return G.fromJWKS(a,{onlyPrivate:!0})}class Z{#b;#c;#d;#e;constructor(a,b,c={},d,e){if(this.#b=new Map,this.#c=a,this.#d=b,"string"!=typeof c.client_id||!c.client_id)throw TypeError("client_id is required");let f={grant_types:["authorization_code"],id_token_signed_response_alg:"RS256",authorization_signed_response_alg:"RS256",response_types:["code"],token_endpoint_auth_method:"client_secret_basic",...this.fapi1()?{grant_types:["authorization_code","implicit"],id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",response_types:["code id_token"],tls_client_certificate_bound_access_tokens:!0,token_endpoint_auth_method:void 0}:void 0,...this.fapi2()?{id_token_signed_response_alg:"PS256",authorization_signed_response_alg:"PS256",token_endpoint_auth_method:void 0}:void 0,...c};if(this.fapi())switch(f.token_endpoint_auth_method){case"self_signed_tls_client_auth":case"tls_client_auth":break;case"private_key_jwt":if(!d)throw TypeError("jwks is required");break;case void 0:throw TypeError("token_endpoint_auth_method is required");default:throw TypeError("invalid or unsupported token_endpoint_auth_method")}if(this.fapi2()&&(f.tls_client_certificate_bound_access_tokens&&f.dpop_bound_access_tokens||!f.tls_client_certificate_bound_access_tokens&&!f.dpop_bound_access_tokens))throw TypeError("either tls_client_certificate_bound_access_tokens or dpop_bound_access_tokens must be set to true");if(!function(a,b,c){if(b.token_endpoint_auth_method||function(a,b){try{let c=a.issuer.token_endpoint_auth_methods_supported;!c.includes(b.token_endpoint_auth_method)&&c.includes("client_secret_post")&&(b.token_endpoint_auth_method="client_secret_post")}catch(a){}}(a,c),b.redirect_uri){if(b.redirect_uris)throw TypeError("provide a redirect_uri or redirect_uris, not both");c.redirect_uris=[b.redirect_uri],delete c.redirect_uri}if(b.response_type){if(b.response_types)throw TypeError("provide a response_type or response_types, not both");c.response_types=[b.response_type],delete c.response_type}}(this,c,f),t("token",this.issuer,f),["introspection","revocation"].forEach(a=>{!function(a,b,c){if(!b[`${a}_endpoint`])return;let d=c.token_endpoint_auth_method,e=c.token_endpoint_auth_signing_alg,f=`${a}_endpoint_auth_method`,g=`${a}_endpoint_auth_signing_alg`;void 0===c[f]&&void 0===c[g]&&(void 0!==d&&(c[f]=d),void 0!==e&&(c[g]=e))}(a,this.issuer,f),t(a,this.issuer,f)}),Object.entries(f).forEach(([a,b])=>{this.#b.set(a,b),this[a]||Object.defineProperty(this,a,{get(){return this.#b.get(a)},enumerable:!0})}),void 0!==d){let a=Y.call(this,d);F.set(this,a)}null!=e&&e.additionalAuthorizedParties&&(this.#e=H(e.additionalAuthorizedParties)),this[E]=0}authorizationUrl(a={}){if(!w(a))throw TypeError("params must be a plain object");u(this.issuer,"authorization_endpoint");let b=new k(this.issuer.authorization_endpoint);for(let[c,d]of Object.entries(X.call(this,a)))if(Array.isArray(d))for(let a of(b.searchParams.delete(c),d))b.searchParams.append(c,a);else b.searchParams.set(c,d);return b.href.replace(/\+/g,"%20")}authorizationPost(a={}){if(!w(a))throw TypeError("params must be a plain object");let b=X.call(this,a),c=Object.keys(b).map(a=>`<input type="hidden" name="${a}" value="${b[a]}"/>`).join("\n");return`<!DOCTYPE html>
<head>
<title>Requesting Authorization</title>
</head>
<body onload="javascript:document.forms[0].submit()">
<form method="post" action="${this.issuer.authorization_endpoint}">
  ${c}
</form>
</body>
</html>`}endSessionUrl(a={}){let b;u(this.issuer,"end_session_endpoint");let{0:c,length:d}=this.post_logout_redirect_uris||[],{post_logout_redirect_uri:e=1===d?c:void 0}=a;if({id_token_hint:b,...a}=a,b instanceof y){if(!b.id_token)throw TypeError("id_token not present in TokenSet");b=b.id_token}let f=j.parse(this.issuer.end_session_endpoint),g=r(V(this.issuer.end_session_endpoint),a,{post_logout_redirect_uri:e,client_id:this.client_id},{id_token_hint:b});return Object.entries(g).forEach(([a,b])=>{null==b&&delete g[a]}),f.search=null,f.query=g,j.format(f)}callbackParams(a){let b=a instanceof f.IncomingMessage||a&&a.method&&a.url;if("string"!=typeof a&&!b)throw TypeError("#callbackParams only accepts string urls, http.IncomingMessage or a lookalike");if(!b)return T(V(a));switch(a.method){case"GET":return T(V(a.url));case"POST":if(void 0===a.body)throw TypeError("incoming message body missing, include a body parser prior to this method call");switch(typeof a.body){case"object":case"string":if(Buffer.isBuffer(a.body))return T(i.parse(a.body.toString("utf-8")));if("string"==typeof a.body)return T(i.parse(a.body));return T(a.body);default:throw TypeError("invalid IncomingMessage body object")}default:throw TypeError("invalid IncomingMessage method")}}async callback(a,b,c={},{exchangeBody:d,clientAssertionPayload:e,DPoP:f}={}){let g=T(b);if(!c.jarm||"response"in b){if("response"in b){let a=await this.decryptJARM(g.response);g=await this.validateJARM(a)}}else throw new A({message:"expected a JARM response",checks:c,params:g});if(this.default_max_age&&!c.max_age&&(c.max_age=this.default_max_age),g.state&&!c.state)throw TypeError("checks.state argument is missing");if(!g.state&&c.state)throw new A({message:"state missing from the response",checks:c,params:g});if(c.state!==g.state)throw new A({printf:["state mismatch, expected %s, got: %s",c.state,g.state],checks:c,params:g});if("iss"in g){if(u(this.issuer,"issuer"),g.iss!==this.issuer.issuer)throw new A({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,g.iss],params:g})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in g)&&!("response"in b))throw new A({message:"iss missing from the response",params:g});if(g.error)throw new z(g);let h={code:["code"],id_token:["id_token"],token:["access_token","token_type"]};if(c.response_type){for(let a of c.response_type.split(" "))if("none"===a){if(g.code||g.id_token||g.access_token)throw new A({message:'unexpected params encountered for "none" response',checks:c,params:g})}else for(let b of h[a])if(!g[b])throw new A({message:`${b} missing from response`,checks:c,params:g})}if(g.id_token){let a=new y(g);if(await this.decryptIdToken(a),await this.validateIdToken(a,c.nonce,"authorization",c.max_age,c.state),!g.code)return a}if(g.code){let b=await this.grant({...d,grant_type:"authorization_code",code:g.code,redirect_uri:a,code_verifier:c.code_verifier},{clientAssertionPayload:e,DPoP:f});return await this.decryptIdToken(b),await this.validateIdToken(b,c.nonce,"token",c.max_age),g.session_state&&(b.session_state=g.session_state),b}return new y(g)}async oauthCallback(a,b,c={},{exchangeBody:d,clientAssertionPayload:e,DPoP:f}={}){let g=T(b);if(!c.jarm||"response"in b){if("response"in b){let a=await this.decryptJARM(g.response);g=await this.validateJARM(a)}}else throw new A({message:"expected a JARM response",checks:c,params:g});if(g.state&&!c.state)throw TypeError("checks.state argument is missing");if(!g.state&&c.state)throw new A({message:"state missing from the response",checks:c,params:g});if(c.state!==g.state)throw new A({printf:["state mismatch, expected %s, got: %s",c.state,g.state],checks:c,params:g});if("iss"in g){if(u(this.issuer,"issuer"),g.iss!==this.issuer.issuer)throw new A({printf:["iss mismatch, expected %s, got: %s",this.issuer.issuer,g.iss],params:g})}else if(this.issuer.authorization_response_iss_parameter_supported&&!("id_token"in g)&&!("response"in b))throw new A({message:"iss missing from the response",params:g});if(g.error)throw new z(g);if("string"==typeof g.id_token&&g.id_token.length)throw new A({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:g});delete g.id_token;let h={code:["code"],token:["access_token","token_type"]};if(c.response_type)for(let a of c.response_type.split(" ")){if("none"===a&&(g.code||g.id_token||g.access_token))throw new A({message:'unexpected params encountered for "none" response',checks:c,params:g});if(h[a]){for(let b of h[a])if(!g[b])throw new A({message:`${b} missing from response`,checks:c,params:g})}}if(g.code){let b=await this.grant({...d,grant_type:"authorization_code",code:g.code,redirect_uri:a,code_verifier:c.code_verifier},{clientAssertionPayload:e,DPoP:f});if("string"==typeof b.id_token&&b.id_token.length)throw new A({message:"id_token detected in the response, you must use client.callback() instead of client.oauthCallback()",params:g});return delete b.id_token,b}return new y(g)}async decryptIdToken(a){if(!this.id_token_encrypted_response_alg)return a;let b=a;if(b instanceof y){if(!b.id_token)throw TypeError("id_token not present in TokenSet");b=b.id_token}let c=this.id_token_encrypted_response_alg,d=this.id_token_encrypted_response_enc,e=await this.decryptJWE(b,c,d);return a instanceof y?(a.id_token=e,a):e}async validateJWTUserinfo(a){let b=this.userinfo_signed_response_alg;return this.validateJWT(a,b,[])}async decryptJARM(a){if(!this.authorization_encrypted_response_alg)return a;let b=this.authorization_encrypted_response_alg,c=this.authorization_encrypted_response_enc;return this.decryptJWE(a,b,c)}async decryptJWTUserinfo(a){if(!this.userinfo_encrypted_response_alg)return a;let b=this.userinfo_encrypted_response_alg,c=this.userinfo_encrypted_response_enc;return this.decryptJWE(a,b,c)}async decryptJWE(a,b,c="A128CBC-HS256"){let d,e=JSON.parse(q.decode(a.split(".")[0]));if(e.alg!==b)throw new A({printf:["unexpected JWE alg received, expected %s, got: %s",b,e.alg],jwt:a});if(e.enc!==c)throw new A({printf:["unexpected JWE enc received, expected %s, got: %s",c,e.enc],jwt:a});let f=a=>new TextDecoder().decode(a.plaintext);if(b.match(/^(?:RSA|ECDH)/)){let b=await F.get(this),c=m.decodeProtectedHeader(a);for(let e of b.all({...c,use:"enc"}))if(d=await m.compactDecrypt(a,await e.keyObject(c.alg)).then(f,()=>{}))break}else d=await m.compactDecrypt(a,this.secretForAlg("dir"===b?c:b)).then(f,()=>{});if(!d)throw new A({message:"failed to decrypt JWE",jwt:a});return d}async validateIdToken(a,b,c,d,e){let f=a,g=this.id_token_signed_response_alg;if(f instanceof y){if(!f.id_token)throw TypeError("id_token not present in TokenSet");f=f.id_token}f=String(f);let h=B(),{protected:i,payload:j,key:k}=await this.validateJWT(f,g);if("number"==typeof d||d!==S&&this.require_auth_time){if(!j.auth_time)throw new A({message:"missing required JWT property auth_time",jwt:f});if("number"!=typeof j.auth_time)throw new A({message:"JWT auth_time claim must be a JSON numeric value",jwt:f})}if("number"==typeof d&&j.auth_time+d<h-this[E])throw new A({printf:["too much time has elapsed since the last End-User authentication, max_age %i, auth_time: %i, now %i",d,j.auth_time,h-this[E]],now:h,tolerance:this[E],auth_time:j.auth_time,jwt:f});if(b!==R&&(j.nonce||void 0!==b)&&j.nonce!==b)throw new A({printf:["nonce mismatch, expected %s, got: %s",b,j.nonce],jwt:f});if("authorization"===c){if(!j.at_hash&&a.access_token)throw new A({message:"missing required property at_hash",jwt:f});if(!j.c_hash&&a.code)throw new A({message:"missing required property c_hash",jwt:f});if(this.fapi1()&&!j.s_hash&&(a.state||e))throw new A({message:"missing required property s_hash",jwt:f});if(j.s_hash){if(!e)throw TypeError('cannot verify s_hash, "checks.state" property not provided');try{n.validate({claim:"s_hash",source:"state"},j.s_hash,e,i.alg,k.jwk&&k.jwk.crv)}catch(a){throw new A({message:a.message,jwt:f})}}}if(this.fapi()&&j.iat<h-3600)throw new A({printf:["JWT issued too far in the past, now %i, iat %i",h,j.iat],now:h,tolerance:this[E],iat:j.iat,jwt:f});if(a.access_token&&void 0!==j.at_hash)try{n.validate({claim:"at_hash",source:"access_token"},j.at_hash,a.access_token,i.alg,k.jwk&&k.jwk.crv)}catch(a){throw new A({message:a.message,jwt:f})}if(a.code&&void 0!==j.c_hash)try{n.validate({claim:"c_hash",source:"code"},j.c_hash,a.code,i.alg,k.jwk&&k.jwk.crv)}catch(a){throw new A({message:a.message,jwt:f})}return a}async validateJWT(a,b,c=["iss","sub","aud","exp","iat"]){let d,e,f,g="https://self-issued.me"===this.issuer.issuer,i=B();try{({header:d,payload:e}=p(a,{complete:!0}))}catch(b){throw new A({printf:["failed to decode JWT (%s: %s)",b.name,b.message],jwt:a})}if(d.alg!==b)throw new A({printf:["unexpected JWT alg received, expected %s, got: %s",b,d.alg],jwt:a});if(g&&(c=[...c,"sub_jwk"]),c.forEach(W.bind(void 0,e,a)),void 0!==e.iss){let b=this.issuer.issuer;if(this.#d&&(b=this.issuer.issuer.replace("{tenantid}",e.tid)),e.iss!==b)throw new A({printf:["unexpected iss value, expected %s, got: %s",b,e.iss],jwt:a})}if(void 0!==e.iat&&"number"!=typeof e.iat)throw new A({message:"JWT iat claim must be a JSON numeric value",jwt:a});if(void 0!==e.nbf){if("number"!=typeof e.nbf)throw new A({message:"JWT nbf claim must be a JSON numeric value",jwt:a});if(e.nbf>i+this[E])throw new A({printf:["JWT not active yet, now %i, nbf %i",i+this[E],e.nbf],now:i,tolerance:this[E],nbf:e.nbf,jwt:a})}if(void 0!==e.exp){if("number"!=typeof e.exp)throw new A({message:"JWT exp claim must be a JSON numeric value",jwt:a});if(i-this[E]>=e.exp)throw new A({printf:["JWT expired, now %i, exp %i",i-this[E],e.exp],now:i,tolerance:this[E],exp:e.exp,jwt:a})}if(void 0!==e.aud){if(Array.isArray(e.aud)){if(e.aud.length>1&&!e.azp)throw new A({message:"missing required JWT property azp",jwt:a});if(!e.aud.includes(this.client_id))throw new A({printf:["aud is missing the client_id, expected %s to be included in %j",this.client_id,e.aud],jwt:a})}else if(e.aud!==this.client_id)throw new A({printf:["aud mismatch, expected %s, got: %s",this.client_id,e.aud],jwt:a})}if(void 0!==e.azp){let b=this.#e;if(!(b="string"==typeof b?[this.client_id,b]:Array.isArray(b)?[this.client_id,...b]:[this.client_id]).includes(e.azp))throw new A({printf:["azp mismatch, got: %s",e.azp],jwt:a})}if(g){try{h(w(e.sub_jwk));let a=await m.importJWK(e.sub_jwk,d.alg);h.equal(a.type,"public"),f=[{keyObject:()=>a}]}catch(b){throw new A({message:"failed to use sub_jwk claim as an asymmetric JSON Web Key",jwt:a})}if(await m.calculateJwkThumbprint(e.sub_jwk)!==e.sub)throw new A({message:"failed to match the subject with sub_jwk",jwt:a})}else d.alg.startsWith("HS")?f=[this.secretForAlg(d.alg)]:"none"!==d.alg&&(f=await L.call(this.issuer,{...d,use:"sig"}));if(!f&&"none"===d.alg)return{protected:d,payload:e};for(let b of f){let c=await m.compactVerify(a,b instanceof Uint8Array?b:await b.keyObject(d.alg)).catch(()=>{});if(c)return{payload:e,protected:c.protectedHeader,key:b}}throw new A({message:"failed to validate JWT signature",jwt:a})}async refresh(a,{exchangeBody:b,clientAssertionPayload:c,DPoP:d}={}){let e=a;if(e instanceof y){if(!e.refresh_token)throw TypeError("refresh_token not present in TokenSet");e=e.refresh_token}let f=await this.grant({...b,grant_type:"refresh_token",refresh_token:String(e)},{clientAssertionPayload:c,DPoP:d});if(f.id_token&&(await this.decryptIdToken(f),await this.validateIdToken(f,R,"token",S),a instanceof y&&a.id_token)){let b=a.claims().sub,c=f.claims().sub;if(c!==b)throw new A({printf:["sub mismatch, expected %s, got: %s",b,c],jwt:f.id_token})}return f}async requestResource(a,b,{method:c,headers:d,body:e,DPoP:f,tokenType:g=f?"DPoP":b instanceof y?b.token_type:"Bearer"}={},h){if(b instanceof y){if(!b.access_token)throw TypeError("access_token not present in TokenSet");b=b.access_token}if(b){if("string"!=typeof b)throw TypeError("invalid access token provided")}else throw TypeError("no access token provided");let i={headers:{Authorization:U(b,g),...d},body:e},j=!!this.tls_client_certificate_bound_access_tokens,k=await D.call(this,{...i,responseType:"buffer",method:c,url:a},{accessToken:b,mTLS:j,DPoP:f}),l=k.headers["www-authenticate"];return h!==Q&&l&&l.toLowerCase().startsWith("dpop ")&&"use_dpop_nonce"===s(l).error?this.requestResource(a,b,{method:c,headers:d,body:e,DPoP:f,tokenType:g}):k}async userinfo(a,{method:b="GET",via:c="header",tokenType:d,params:e,DPoP:f}={}){let g;u(this.issuer,"userinfo_endpoint");let i={tokenType:d,method:String(b).toUpperCase(),DPoP:f};if("GET"!==i.method&&"POST"!==i.method)throw TypeError("#userinfo() method can only be POST or a GET");if("body"===c&&"POST"!==i.method)throw TypeError("can only send body on POST");let j=!!(this.userinfo_signed_response_alg||this.userinfo_encrypted_response_alg);j?i.headers={Accept:"application/jwt"}:i.headers={Accept:"application/json"},this.tls_client_certificate_bound_access_tokens&&this.issuer.mtls_endpoint_aliases&&(g=this.issuer.mtls_endpoint_aliases.userinfo_endpoint),g=new k(g||this.issuer.userinfo_endpoint),"body"===c&&(i.headers.Authorization=void 0,i.headers["Content-Type"]="application/x-www-form-urlencoded",i.body=new l,i.body.append("access_token",a instanceof y?a.access_token:a)),e&&("GET"===i.method?Object.entries(e).forEach(([a,b])=>{g.searchParams.append(a,b)}):i.body?Object.entries(e).forEach(([a,b])=>{i.body.append(a,b)}):(i.body=new l,i.headers["Content-Type"]="application/x-www-form-urlencoded",Object.entries(e).forEach(([a,b])=>{i.body.append(a,b)}))),i.body&&(i.body=i.body.toString());let m=await this.requestResource(g,a,i),n=x(m,{bearer:!0});if(j){if(!/^application\/jwt/.test(m.headers["content-type"]))throw new A({message:"expected application/jwt response from the userinfo_endpoint",response:m});let a=m.body.toString(),b=await this.decryptJWTUserinfo(a);if(this.userinfo_signed_response_alg)({payload:n}=await this.validateJWTUserinfo(b));else try{n=JSON.parse(b),h(w(n))}catch(a){throw new A({message:"failed to parse userinfo JWE payload as JSON",jwt:b})}}else try{n=JSON.parse(m.body)}catch(a){throw Object.defineProperty(a,"response",{value:m}),a}if(a instanceof y&&a.id_token){let b=a.claims().sub;if(n.sub!==b)throw new A({printf:["userinfo sub mismatch, expected %s, got: %s",b,n.sub],body:n,jwt:a.id_token})}return n}encryptionSecret(a){let b=a<=256?"sha256":a<=384?"sha384":a<=512&&"sha512";if(!b)throw Error("unsupported symmetric encryption key derivation");return g.createHash(b).update(this.client_secret).digest().slice(0,a/8)}secretForAlg(a){if(!this.client_secret)throw TypeError("client_secret is required");return/^A(\d{3})(?:GCM)?KW$/.test(a)?this.encryptionSecret(parseInt(RegExp.$1,10)):/^A(\d{3})(?:GCM|CBC-HS(\d{3}))$/.test(a)?this.encryptionSecret(parseInt(RegExp.$2||RegExp.$1,10)):new TextEncoder().encode(this.client_secret)}async grant(a,{clientAssertionPayload:b,DPoP:c}={},d){let e;u(this.issuer,"token_endpoint");let f=await I.call(this,"token",{form:a,responseType:"json"},{clientAssertionPayload:b,DPoP:c});try{e=x(f)}catch(e){if(d!==Q&&e instanceof z&&"use_dpop_nonce"===e.error)return this.grant(a,{clientAssertionPayload:b,DPoP:c},Q);throw e}return new y(e)}async deviceAuthorization(a={},{exchangeBody:b,clientAssertionPayload:c,DPoP:d}={}){u(this.issuer,"device_authorization_endpoint"),u(this.issuer,"token_endpoint");let e=X.call(this,{client_id:this.client_id,redirect_uri:null,response_type:null,...a}),f=x(await I.call(this,"device_authorization",{responseType:"json",form:e},{clientAssertionPayload:c,endpointAuthMethod:"token"}));return new M({client:this,exchangeBody:b,clientAssertionPayload:c,response:f,maxAge:a.max_age,DPoP:d})}async revoke(a,b,{revokeBody:c,clientAssertionPayload:d}={}){if(u(this.issuer,"revocation_endpoint"),void 0!==b&&"string"!=typeof b)throw TypeError("hint must be a string");let e={...c,token:a};b&&(e.token_type_hint=b),x(await I.call(this,"revocation",{form:e},{clientAssertionPayload:d}),{body:!1})}async introspect(a,b,{introspectBody:c,clientAssertionPayload:d}={}){if(u(this.issuer,"introspection_endpoint"),void 0!==b&&"string"!=typeof b)throw TypeError("hint must be a string");let e={...c,token:a};return b&&(e.token_type_hint=b),x(await I.call(this,"introspection",{form:e,responseType:"json"},{clientAssertionPayload:d}))}static async register(a,b={}){let{initialAccessToken:c,jwks:d,...e}=b;return u(this.issuer,"registration_endpoint"),void 0===d||a.jwks||a.jwks_uri||(a.jwks=(await Y.call(this,d)).toJWKS()),new this(x(await D.call(this,{headers:{Accept:"application/json",...c?{Authorization:U(c)}:void 0},responseType:"json",json:a,url:this.issuer.registration_endpoint,method:"POST"}),{statusCode:201,bearer:!0}),d,e)}get metadata(){return H(Object.fromEntries(this.#b.entries()))}static async fromUri(a,b,c,d){return new this(x(await D.call(this,{method:"GET",url:a,responseType:"json",headers:{Authorization:U(b),Accept:"application/json"}}),{bearer:!0}),c,d)}async requestObject(a={},{sign:b=this.request_object_signing_alg||"none",encrypt:{alg:c=this.request_object_encryption_alg,enc:d=this.request_object_encryption_enc||"A128CBC-HS256"}={}}={}){let e,f;if(!w(a))throw TypeError("requestObject must be a plain object");let g=B(),h={alg:b,typ:"oauth-authz-req+jwt"},i=JSON.stringify(r({},a,{iss:this.client_id,aud:this.issuer.issuer,client_id:this.client_id,jti:C(),iat:g,exp:g+300,...this.fapi()?{nbf:g}:void 0}));if("none"===b)e=[q.encode(JSON.stringify(h)),q.encode(i),""].join(".");else{let a=b.startsWith("HS");if(a)f=this.secretForAlg(b);else{let a=await F.get(this);if(!a)throw TypeError(`no keystore present for client, cannot sign using alg ${b}`);if(!(f=a.get({alg:b,use:"sig"})))throw TypeError(`no key to sign with found for alg ${b}`)}e=await new m.CompactSign(new TextEncoder().encode(i)).setProtectedHeader({...h,kid:a?void 0:f.jwk.kid}).sign(a?f:await f.keyObject(b))}if(!c)return e;let j={alg:c,enc:d,cty:"oauth-authz-req+jwt"};return j.alg.match(/^(RSA|ECDH)/)?[f]=await L.call(this.issuer,{alg:j.alg,use:"enc"},{allowMulti:!0}):f=this.secretForAlg("dir"===j.alg?j.enc:j.alg),new m.CompactEncrypt(new TextEncoder().encode(e)).setProtectedHeader({...j,kid:f instanceof Uint8Array?void 0:f.jwk.kid}).encrypt(f instanceof Uint8Array?f:await f.keyObject(j.alg))}async pushedAuthorizationRequest(a={},{clientAssertionPayload:b}={}){u(this.issuer,"pushed_authorization_request_endpoint");let c={..."request"in a?a:X.call(this,a),client_id:this.client_id},d=await I.call(this,"pushed_authorization_request",{responseType:"json",form:c},{clientAssertionPayload:b,endpointAuthMethod:"token"}),e=x(d,{statusCode:201});if(!("expires_in"in e))throw new A({message:"expected expires_in in Pushed Authorization Successful Response",response:d});if("number"!=typeof e.expires_in)throw new A({message:"invalid expires_in value in Pushed Authorization Successful Response",response:d});if(!("request_uri"in e))throw new A({message:"expected request_uri in Pushed Authorization Successful Response",response:d});if("string"!=typeof e.request_uri)throw new A({message:"invalid request_uri value in Pushed Authorization Successful Response",response:d});return e}get issuer(){return this.#c}[e.custom](){return`${this.constructor.name} ${e(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}fapi(){return this.fapi1()||this.fapi2()}fapi1(){return"FAPI1Client"===this.constructor.name}fapi2(){return"FAPI2Client"===this.constructor.name}async validateJARM(a){let b=this.authorization_signed_response_alg,{payload:c}=await this.validateJWT(a,b,["iss","exp","aud"]);return T(c)}async dpopProof(a,b,c){let e;if(!w(a))throw TypeError("payload must be a plain object");if(o(b))e=b;else if("CryptoKey"===b[Symbol.toStringTag])e=b;else if("node:crypto"===m.cryptoRuntime)e=g.createPrivateKey(b);else throw TypeError("unrecognized crypto runtime");if("private"!==e.type)throw TypeError('"DPoP" option must be a private key');let f=d.call(this,e,b);if(!f)throw TypeError("could not determine DPoP JWS Algorithm");return new m.SignJWT({ath:c?q.encode(g.createHash("sha256").update(c).digest()):void 0,...a}).setProtectedHeader({alg:f,typ:"dpop+jwt",jwk:await aa(e,b)}).setIssuedAt().setJti(C()).sign(e)}}function $(a){switch(a.algorithm.name){case"Ed25519":case"Ed448":return"EdDSA";case"ECDSA":switch(a.algorithm.namedCurve){case"P-256":return"ES256";case"P-384":return"ES384";case"P-521":return"ES512"}break;case"RSASSA-PKCS1-v1_5":return`RS${a.algorithm.hash.name.slice(4)}`;case"RSA-PSS":return`PS${a.algorithm.hash.name.slice(4)}`;default:throw TypeError("unsupported DPoP private key")}}if("node:crypto"===m.cryptoRuntime){d=function(d,g){if("CryptoKey"===g[Symbol.toStringTag])return $(d);switch(d.asymmetricKeyType){case"ed25519":case"ed448":return"EdDSA";case"ec":var h=d,i=g;switch("object"==typeof i&&"object"==typeof i.key&&i.key.crv){case"P-256":return"ES256";case"secp256k1":return"ES256K";case"P-384":return"ES384";case"P-512":return"ES512"}let j=h.export({format:"der",type:"pkcs8"}),k=j[1]<128?17:18,l=j[k],m=j.slice(k+1,k+1+l);if(m.equals(b))return"ES256";if(m.equals(c))return"ES384";if(m.equals(e))return"ES512";if(m.equals(f))return"ES256K";throw TypeError("unsupported DPoP private key curve");case"rsa":case P&&"rsa-pss":var n=d,o=g,p=this.issuer.dpop_signing_alg_values_supported;if("object"==typeof o&&"jwk"===o.format&&o.key&&o.key.alg)return o.key.alg;if(Array.isArray(p)){let b=p.filter(RegExp.prototype.test.bind(a));return"rsa-pss"===n.asymmetricKeyType&&(b=b.filter(a=>a.startsWith("PS"))),["PS256","PS384","PS512","RS256","RS384","RS384"].find(a=>b.includes(a))}return"PS256";default:throw TypeError("unsupported DPoP private key")}};let a=/^(?:RS|PS)(?:256|384|512)$/,b=Buffer.from([42,134,72,206,61,3,1,7]),c=Buffer.from([43,129,4,0,34]),e=Buffer.from([43,129,4,0,35]),f=Buffer.from([43,129,4,0,10])}else d=$;let _=new WeakMap;async function aa(a,b){if("node:crypto"===m.cryptoRuntime&&"object"==typeof b&&"object"==typeof b.key&&"jwk"===b.format)return v(b.key,"kty","crv","x","y","e","n");if(_.has(b))return _.get(b);let c=v(await m.exportJWK(a),"kty","crv","x","y","e","n");return(o(b)||"WebCryptoAPI"===m.cryptoRuntime)&&_.set(b,c),c}a.exports=(a,b=!1)=>class extends Z{constructor(...c){super(a,b,...c)}static get issuer(){return a}},a.exports.BaseClient=Z},39469:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0;var d=c(55511);Object.defineProperty(b,"default",{enumerable:!0,get:function(){return d.randomFillSync}})},40295:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.jwkImport=b.jwkExport=b.rsaPssParams=b.oneShotCallback=void 0;let[c,d]=process.versions.node.split(".").map(a=>parseInt(a,10));b.oneShotCallback=c>=16||15===c&&d>=13,b.rsaPssParams=!("electron"in process.versions)&&(c>=17||16===c&&d>=9),b.jwkExport=c>=16||15===c&&d>=9,b.jwkImport=c>=16||15===c&&d>=12},40626:(a,b,c)=>{var d=c(32466);a.exports=function(a,b,c,e,f){var g=d(a,b,c,e,f);return g.next().then(function(a){return a.done?a.value:g.next()})},a.exports.__esModule=!0,a.exports.default=a.exports},40949:(a,b,c)=>{"use strict";function d(a){var b=this;if(b instanceof d||(b=new d),b.tail=null,b.head=null,b.length=0,a&&"function"==typeof a.forEach)a.forEach(function(a){b.push(a)});else if(arguments.length>0)for(var c=0,e=arguments.length;c<e;c++)b.push(arguments[c]);return b}function e(a,b,c,d){if(!(this instanceof e))return new e(a,b,c,d);this.list=d,this.value=a,b?(b.next=this,this.prev=b):this.prev=null,c?(c.prev=this,this.next=c):this.next=null}a.exports=d,d.Node=e,d.create=d,d.prototype.removeNode=function(a){if(a.list!==this)throw Error("removing node which does not belong to this list");var b=a.next,c=a.prev;return b&&(b.prev=c),c&&(c.next=b),a===this.head&&(this.head=b),a===this.tail&&(this.tail=c),a.list.length--,a.next=null,a.prev=null,a.list=null,b},d.prototype.unshiftNode=function(a){if(a!==this.head){a.list&&a.list.removeNode(a);var b=this.head;a.list=this,a.next=b,b&&(b.prev=a),this.head=a,this.tail||(this.tail=a),this.length++}},d.prototype.pushNode=function(a){if(a!==this.tail){a.list&&a.list.removeNode(a);var b=this.tail;a.list=this,a.prev=b,b&&(b.next=a),this.tail=a,this.head||(this.head=a),this.length++}},d.prototype.push=function(){for(var a,b,c=0,d=arguments.length;c<d;c++){a=this,b=arguments[c],a.tail=new e(b,a.tail,null,a),a.head||(a.head=a.tail),a.length++}return this.length},d.prototype.unshift=function(){for(var a,b,c=0,d=arguments.length;c<d;c++){a=this,b=arguments[c],a.head=new e(b,null,a.head,a),a.tail||(a.tail=a.head),a.length++}return this.length},d.prototype.pop=function(){if(this.tail){var a=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,a}},d.prototype.shift=function(){if(this.head){var a=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,a}},d.prototype.forEach=function(a,b){b=b||this;for(var c=this.head,d=0;null!==c;d++)a.call(b,c.value,d,this),c=c.next},d.prototype.forEachReverse=function(a,b){b=b||this;for(var c=this.tail,d=this.length-1;null!==c;d--)a.call(b,c.value,d,this),c=c.prev},d.prototype.get=function(a){for(var b=0,c=this.head;null!==c&&b<a;b++)c=c.next;if(b===a&&null!==c)return c.value},d.prototype.getReverse=function(a){for(var b=0,c=this.tail;null!==c&&b<a;b++)c=c.prev;if(b===a&&null!==c)return c.value},d.prototype.map=function(a,b){b=b||this;for(var c=new d,e=this.head;null!==e;)c.push(a.call(b,e.value,this)),e=e.next;return c},d.prototype.mapReverse=function(a,b){b=b||this;for(var c=new d,e=this.tail;null!==e;)c.push(a.call(b,e.value,this)),e=e.prev;return c},d.prototype.reduce=function(a,b){var c,d=this.head;if(arguments.length>1)c=b;else if(this.head)d=this.head.next,c=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var e=0;null!==d;e++)c=a(c,d.value,e),d=d.next;return c},d.prototype.reduceReverse=function(a,b){var c,d=this.tail;if(arguments.length>1)c=b;else if(this.tail)d=this.tail.prev,c=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var e=this.length-1;null!==d;e--)c=a(c,d.value,e),d=d.prev;return c},d.prototype.toArray=function(){for(var a=Array(this.length),b=0,c=this.head;null!==c;b++)a[b]=c.value,c=c.next;return a},d.prototype.toArrayReverse=function(){for(var a=Array(this.length),b=0,c=this.tail;null!==c;b++)a[b]=c.value,c=c.prev;return a},d.prototype.slice=function(a,b){(b=b||this.length)<0&&(b+=this.length),(a=a||0)<0&&(a+=this.length);var c=new d;if(b<a||b<0)return c;a<0&&(a=0),b>this.length&&(b=this.length);for(var e=0,f=this.head;null!==f&&e<a;e++)f=f.next;for(;null!==f&&e<b;e++,f=f.next)c.push(f.value);return c},d.prototype.sliceReverse=function(a,b){(b=b||this.length)<0&&(b+=this.length),(a=a||0)<0&&(a+=this.length);var c=new d;if(b<a||b<0)return c;a<0&&(a=0),b>this.length&&(b=this.length);for(var e=this.length,f=this.tail;null!==f&&e>b;e--)f=f.prev;for(;null!==f&&e>a;e--,f=f.prev)c.push(f.value);return c},d.prototype.splice=function(a,b,...c){a>this.length&&(a=this.length-1),a<0&&(a=this.length+a);for(var d=0,f=this.head;null!==f&&d<a;d++)f=f.next;for(var g=[],d=0;f&&d<b;d++)g.push(f.value),f=this.removeNode(f);null===f&&(f=this.tail),f!==this.head&&f!==this.tail&&(f=f.prev);for(var d=0;d<c.length;d++)f=function(a,b,c){var d=b===a.head?new e(c,null,b,a):new e(c,b,b.next,a);return null===d.next&&(a.tail=d),null===d.prev&&(a.head=d),a.length++,d}(this,f,c[d]);return g},d.prototype.reverse=function(){for(var a=this.head,b=this.tail,c=a;null!==c;c=c.prev){var d=c.prev;c.prev=c.next,c.next=d}return this.head=b,this.tail=a,this};try{c(37693)(d)}catch(a){}},41313:(a,b,c)=>{"use strict";c.d(b,{DV:()=>k,He:()=>function a(b,c){return Object.entries(b).reduce((b,[g,i])=>{if("string"!=typeof g)return b;let j=c?[...c,g]:[g];return(0,e.is)(i,d.V)||(0,e.is)(i,f.Xs)||(0,e.is)(i,f.Xs.Aliased)?b.push({path:j,field:i}):(0,e.is)(i,h.XI)?b.push(...a(i[h.XI.Symbol.Columns],j)):b.push(...a(i,j)),b},[])},Ll:()=>p,Lq:()=>q,XJ:()=>m,YD:()=>n,a6:()=>j,q:()=>l,zN:()=>o});var d=c(80228),e=c(46493),f=c(20862),g=c(96176),h=c(7284),i=c(19593);function j(a,b,c){let g={},i=a.reduce((a,{path:i,field:j},k)=>{let l;l=(0,e.is)(j,d.V)?j:(0,e.is)(j,f.Xs)?j.decoder:j.sql.decoder;let m=a;for(let[a,f]of i.entries())if(a<i.length-1)f in m||(m[f]={}),m=m[f];else{let a=b[k],n=m[f]=null===a?null:l.mapFromDriverValue(a);if(c&&(0,e.is)(j,d.V)&&2===i.length){let a=i[0];a in g?"string"==typeof g[a]&&g[a]!==(0,h.Io)(j.table)&&(g[a]=!1):g[a]=null===n&&(0,h.Io)(j.table)}}return a},{});if(c&&Object.keys(g).length>0)for(let[a,b]of Object.entries(g))"string"!=typeof b||c[b]||(i[a]=null);return i}function k(a,b){let c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(let[a,b]of c.entries())if(b!==d[a])return!1;return!0}function l(a,b){let c=Object.entries(b).filter(([,a])=>void 0!==a).map(([b,c])=>(0,e.is)(c,f.Xs)||(0,e.is)(c,d.V)?[b,c]:[b,new f.Iw(c,a[h.XI.Symbol.Columns][b])]);if(0===c.length)throw Error("No values to set");return Object.fromEntries(c)}function m(a,b){for(let c of b)for(let b of Object.getOwnPropertyNames(c.prototype))"constructor"!==b&&Object.defineProperty(a.prototype,b,Object.getOwnPropertyDescriptor(c.prototype,b)||Object.create(null))}function n(a){return a[h.XI.Symbol.Columns]}function o(a){return(0,e.is)(a,g.n)?a._.alias:(0,e.is)(a,f.Ss)?a[i.n].name:(0,e.is)(a,f.Xs)?void 0:a[h.XI.Symbol.IsAlias]?a[h.XI.Symbol.Name]:a[h.XI.Symbol.BaseName]}function p(a,b){return{name:"string"==typeof a&&a.length>0?a:"",config:"object"==typeof a?a:b}}function q(a){if("object"!=typeof a||null===a||"Object"!==a.constructor.name)return!1;if("logger"in a){let b=typeof a.logger;return"boolean"===b||"object"===b&&"function"==typeof a.logger.logQuery||"undefined"===b}if("schema"in a){let b=typeof a.logger;return"object"===b||"undefined"===b}if("casing"in a){let b=typeof a.logger;return"string"===b||"undefined"===b}if("mode"in a)return"default"===a.mode&&"planetscale"===a.mode&&void 0===a.mode;if("connection"in a){let b=typeof a.connection;return"string"===b||"object"===b||"undefined"===b}if("client"in a){let b=typeof a.client;return"object"===b||"function"===b||"undefined"===b}return 0===Object.keys(a).length}},41387:a=>{a.exports=a=>!!a&&a.constructor===Object},42560:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.getBody=e,b.setCookie=function(a,b){var c;let e=null!=(c=a.getHeader("Set-Cookie"))?c:[];Array.isArray(e)||(e=[e]);let{name:f,value:g,options:h}=b,i=(0,d.serialize)(f,g,h);e.push(i),a.setHeader("Set-Cookie",e)},b.toResponse=function(a){var b,c,e;let f=new Headers(null==(b=a.headers)?void 0:b.reduce((a,{key:b,value:c})=>(a[b]=c,a),{}));null==(c=a.cookies)||c.forEach(a=>{let{name:b,value:c,options:e}=a,g=(0,d.serialize)(b,c,e);f.has("Set-Cookie")?f.append("Set-Cookie",g):f.set("Set-Cookie",g)});let g=a.body;"application/json"===f.get("content-type")?g=JSON.stringify(a.body):"application/x-www-form-urlencoded"===f.get("content-type")&&(g=new URLSearchParams(a.body).toString());let h=new Response(g,{headers:f,status:a.redirect?302:null!=(e=a.status)?e:200});return a.redirect&&h.headers.set("Location",a.redirect),h};var d=c(24049);async function e(a){if(!("body"in a)||!a.body||"POST"!==a.method)return;let b=a.headers.get("content-type");return null!=b&&b.includes("application/json")?await a.json():null!=b&&b.includes("application/x-www-form-urlencoded")?Object.fromEntries(new URLSearchParams(await a.text())):void 0}},43793:(a,b,c)=>{a.exports=new(c(9447))({max:100})},45234:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(81630),e=c(55591),f=c(94735),g=c(69817),h=c(74855);b.default=async(a,b,c)=>{let i;switch(a.protocol){case"https:":i=e.get;break;case"http:":i=d.get;break;default:throw TypeError("Unsupported URL protocol.")}let{agent:j,headers:k}=c,l=i(a.href,{agent:j,timeout:b,headers:k}),[m]=await Promise.race([(0,f.once)(l,"response"),(0,f.once)(l,"timeout")]);if(!m)throw l.destroy(),new g.JWKSTimeout;if(200!==m.statusCode)throw new g.JOSEError("Expected 200 OK from the JSON Web Key Set HTTP response");let n=[];for await(let a of m)n.push(a);try{return JSON.parse(h.decoder.decode((0,h.concat)(...n)))}catch{throw new g.JOSEError("Failed to parse the JSON Web Key Set HTTP response as JSON")}}},45592:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decode=b.encode=void 0;let d=c(67040);b.encode=d.encode,b.decode=d.decode},45816:(a,b,c)=>{let d=c(41387);function e(a,b,...c){for(let f of c)if(d(f))for(let[c,g]of Object.entries(f))"__proto__"!==c&&"constructor"!==c&&(void 0===b[c]&&void 0!==g&&(b[c]=g),a&&d(b[c])&&d(g)&&e(!0,b[c],g));return b}a.exports=e.bind(void 0,!1),a.exports.deep=e.bind(void 0,!0)},46493:(a,b,c)=>{"use strict";c.d(b,{i:()=>d,is:()=>e});let d=Symbol.for("drizzle:entityKind");function e(a,b){if(!a||"object"!=typeof a)return!1;if(a instanceof b)return!0;if(!Object.prototype.hasOwnProperty.call(b,d))throw Error(`Class "${b.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let c=Object.getPrototypeOf(a).constructor;if(c)for(;c;){if(d in c&&c[d]===b[d])return!0;c=Object.getPrototypeOf(c)}return!1}Symbol.for("drizzle:hasOwnEntityKind")},46762:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decodeJwt=void 0;let d=c(45592),e=c(74855),f=c(16217),g=c(69817);b.decodeJwt=function(a){let b,c;if("string"!=typeof a)throw new g.JWTInvalid("JWTs must use Compact JWS serialization, JWT must be a string");let{1:h,length:i}=a.split(".");if(5===i)throw new g.JWTInvalid("Only JWTs using Compact JWS serialization can be decoded");if(3!==i)throw new g.JWTInvalid("Invalid JWT");if(!h)throw new g.JWTInvalid("JWTs must contain a payload");try{b=(0,d.decode)(h)}catch{throw new g.JWTInvalid("Failed to base64url decode the payload")}try{c=JSON.parse(e.decoder.decode(b))}catch{throw new g.JWTInvalid("Failed to parse the decoded payload as JSON")}if(!(0,f.default)(c))throw new g.JWTInvalid("Invalid JWT Claims Set");return c}},46886:(a,b,c)=>{"use strict";c.d(b,{dw:()=>k,p6:()=>l,qw:()=>i});var d=c(46493),e=c(41313),f=c(93352),g=c(91983);class h extends g.u{static [d.i]="PgDateBuilder";constructor(a){super(a,"date","PgDate")}build(a){return new i(a,this.config)}}class i extends f.Kl{static [d.i]="PgDate";getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}mapToDriverValue(a){return a.toISOString()}}class j extends g.u{static [d.i]="PgDateStringBuilder";constructor(a){super(a,"string","PgDateString")}build(a){return new k(a,this.config)}}class k extends f.Kl{static [d.i]="PgDateString";getSQLType(){return"date"}}function l(a,b){let{name:c,config:d}=(0,e.Ll)(a,b);return d?.mode==="date"?new h(c):new j(c)}},47025:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0});var e={encode:!0,decode:!0,getToken:!0};b.decode=l,b.encode=k,b.getToken=m;var f=c(91499),g=d(c(18386)),h=c(67041),i=c(91661),j=c(52920);async function k(a){let{token:b={},secret:c,maxAge:d=2592e3,salt:e=""}=a,g=await n(c,e);return await new f.EncryptJWT(b).setProtectedHeader({alg:"dir",enc:"A256GCM"}).setIssuedAt().setExpirationTime((Date.now()/1e3|0)+d).setJti((0,h.v4)()).encrypt(g)}async function l(a){let{token:b,secret:c,salt:d=""}=a;if(!b)return null;let e=await n(c,d),{payload:g}=await (0,f.jwtDecrypt)(b,e,{clockTolerance:15});return g}async function m(a){var b,c,d,e;let{req:f,secureCookie:g=null!=(b=null==(c=process.env.NEXTAUTH_URL)?void 0:c.startsWith("https://"))?b:!!process.env.VERCEL,cookieName:h=g?"__Secure-next-auth.session-token":"next-auth.session-token",raw:j,decode:k=l,logger:m=console,secret:n=null!=(d=process.env.NEXTAUTH_SECRET)?d:process.env.AUTH_SECRET}=a;if(!f)throw Error("Must pass `req` to JWT getToken()");let o=new i.SessionStore({name:h,options:{secure:g}},{cookies:f.cookies,headers:f.headers},m).value,p=f.headers instanceof Headers?f.headers.get("authorization"):null==(e=f.headers)?void 0:e.authorization;if(o||(null==p?void 0:p.split(" ")[0])!=="Bearer"||(o=decodeURIComponent(p.split(" ")[1])),!o)return null;if(j)return o;try{return await k({token:o,secret:n})}catch(a){return null}}async function n(a,b){return await (0,g.default)("sha256",a,b,`NextAuth.js Generated Encryption Key${b?` (${b})`:""}`,32)}Object.keys(j).forEach(function(a){!("default"===a||"__esModule"===a||Object.prototype.hasOwnProperty.call(e,a))&&(a in b&&b[a]===j[a]||Object.defineProperty(b,a,{enumerable:!0,get:function(){return j[a]}}))})},47076:(a,b,c)=>{var d=c(51117),e=c(32547);a.exports=function a(b,c){var f;this.next||(e(a.prototype),e(a.prototype,"function"==typeof Symbol&&Symbol.asyncIterator||"@asyncIterator",function(){return this})),e(this,"_invoke",function(a,e,g){function h(){return new c(function(e,f){!function a(e,f,g,h){try{var i=b[e](f),j=i.value;return j instanceof d?c.resolve(j.v).then(function(b){a("next",b,g,h)},function(b){a("throw",b,g,h)}):c.resolve(j).then(function(a){i.value=a,g(i)},function(b){return a("throw",b,g,h)})}catch(a){h(a)}}(a,g,e,f)})}return f=f?f.then(h,h):h()},!0)},a.exports.__esModule=!0,a.exports.default=a.exports},47093:(a,b,c)=>{var d=c(35538)();a.exports=d;try{regeneratorRuntime=d}catch(a){"object"==typeof globalThis?globalThis.regeneratorRuntime=d:Function("r","regeneratorRuntime = r")(d)}},47724:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=j;var d=c(49646),e=c(84592),f=c(49934),g=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=i(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&({}).hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}(c(15514)),h=c(65192);function i(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(i=function(a){return a?c:b})(a)}async function j(a){var b,c,i,j,l,m;let{options:n,query:o,body:p,method:q,cookies:r}=a,{logger:s,provider:t}=n,u=null!=(b=null==p?void 0:p.error)?b:null==o?void 0:o.error;if(u){let a=Error(u);throw s.error("OAUTH_CALLBACK_HANDLER_ERROR",{error:a,error_description:null==o?void 0:o.error_description,providerId:t.id}),s.debug("OAUTH_CALLBACK_HANDLER_ERROR",{body:p}),a}if(null!=(c=t.version)&&c.startsWith("1."))try{let a=await (0,f.oAuth1Client)(n),{oauth_token:b,oauth_verifier:c}=null!=o?o:{},d=await a.getOAuthAccessToken(b,f.oAuth1TokenStore.get(b),c),e=await a.get(t.profileUrl,d.oauth_token,d.oauth_token_secret);return"string"==typeof e&&(e=JSON.parse(e)),{...await k({profile:e,tokens:d,provider:t,logger:s}),cookies:[]}}catch(a){throw s.error("OAUTH_V1_GET_ACCESS_TOKEN_ERROR",a),a}null!=o&&o.oauth_token&&f.oAuth1TokenStore.delete(o.oauth_token);try{let a,b,c=await (0,e.openidClient)(n),f={},h=[];await g.state.use(r,h,n,f),await g.pkce.use(r,h,n,f),await g.nonce.use(r,h,n,f);let u={...c.callbackParams({url:`http://n?${new URLSearchParams(o)}`,body:p,method:q}),...null==(i=t.token)?void 0:i.params};if(null!=(j=t.token)&&j.request){let b=await t.token.request({provider:t,params:u,checks:f,client:c});a=new d.TokenSet(b.tokens)}else a=t.idToken?await c.callback(t.callbackUrl,u,f):await c.oauthCallback(t.callbackUrl,u,f);return Array.isArray(a.scope)&&(a.scope=a.scope.join(" ")),b=null!=(l=t.userinfo)&&l.request?await t.userinfo.request({provider:t,tokens:a,client:c}):t.idToken?a.claims():await c.userinfo(a,{params:null==(m=t.userinfo)?void 0:m.params}),{...await k({profile:b,provider:t,tokens:a,logger:s}),cookies:h}}catch(a){throw new h.OAuthCallbackError(a)}}async function k({profile:a,tokens:b,provider:c,logger:d}){try{var e;d.debug("PROFILE_DATA",{OAuthProfile:a});let f=await c.profile(a,b);if(f.email=null==(e=f.email)?void 0:e.toLowerCase(),!f.id)throw TypeError(`Profile id is missing in ${c.name} OAuth profile response`);return{profile:f,account:{provider:c.id,type:c.type,providerAccountId:f.id.toString(),...b},OAuthProfile:a}}catch(b){d.error("OAUTH_PARSE_PROFILE_ERROR",{error:b,OAuthProfile:a})}}},47878:(a,b,c)=>{"use strict";function d(a,...b){return a(...b)}c.d(b,{i:()=>d})},48228:(a,b,c)=>{let{createHash:d,randomBytes:e}=c(55511),f=c(1796),g=(a=32)=>f.encode(e(a));a.exports={random:g,state:g,nonce:g,codeVerifier:g,codeChallenge:a=>f.encode(d("sha256").update(a).digest())}},48291:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.AuthHandler=q;var e=n(c(90049)),f=c(693),g=n(c(8918)),h=d(c(15476)),i=c(80857),j=c(57049),k=c(91661),l=c(24049);function m(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(m=function(a){return a?c:b})(a)}function n(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=m(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&({}).hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}async function o(a){try{return await a.json()}catch(a){}}async function p(a){var b,c,d,e;if(a instanceof Request){let b=new URL(a.url),g=b.pathname.split("/").slice(3),h=Object.fromEntries(a.headers),i=Object.fromEntries(b.searchParams);return i.nextauth=g,{action:g[0],method:a.method,headers:h,body:await o(a),cookies:(0,l.parse)(null!=(c=a.headers.get("cookie"))?c:""),providerId:g[1],error:null!=(d=b.searchParams.get("error"))?d:g[1],origin:(0,f.detectOrigin)(null!=(e=h["x-forwarded-host"])?e:h.host,h["x-forwarded-proto"]),query:i}}let{headers:g}=a,h=null!=(b=null==g?void 0:g["x-forwarded-host"])?b:null==g?void 0:g.host;return a.origin=(0,f.detectOrigin)(h,null==g?void 0:g["x-forwarded-proto"]),a}async function q(a){var b,c,d,f,l,m,n;let{options:o,req:q}=a,r=await p(q);(0,e.setLogger)(o.logger,o.debug);let s=(0,j.assertConfig)({options:o,req:r});if(Array.isArray(s))s.forEach(e.default.warn);else if(s instanceof Error){if(e.default.error(s.code,s),!["signin","signout","error","verify-request"].includes(r.action)||"GET"!==r.method)return{status:500,headers:[{key:"Content-Type",value:"application/json"}],body:{message:"There is a problem with the server configuration. Check the server logs for more information."}};let{pages:a,theme:b}=o,c=(null==a?void 0:a.error)&&(null==(l=r.query)||null==(l=l.callbackUrl)?void 0:l.startsWith(a.error));return!(null!=a&&a.error)||c?(c&&e.default.error("AUTH_ON_ERROR_PAGE_ERROR",Error(`The error page ${null==a?void 0:a.error} should not require authentication`)),(0,h.default)({theme:b}).error({error:"configuration"})):{redirect:`${a.error}?error=Configuration`}}let{action:t,providerId:u,error:v,method:w="GET"}=r,{options:x,cookies:y}=await (0,i.init)({authOptions:o,action:t,providerId:u,origin:r.origin,callbackUrl:null!=(b=null==(c=r.body)?void 0:c.callbackUrl)?b:null==(d=r.query)?void 0:d.callbackUrl,csrfToken:null==(f=r.body)?void 0:f.csrfToken,cookies:r.cookies,isPost:"POST"===w}),z=new k.SessionStore(x.cookies.sessionToken,r,x.logger);if("GET"===w){let a=(0,h.default)({...x,query:r.query,cookies:y}),{pages:b}=x;switch(t){case"providers":return await g.providers(x.providers);case"session":{let a=await g.session({options:x,sessionStore:z});return a.cookies&&y.push(...a.cookies),{...a,cookies:y}}case"csrf":return{headers:[{key:"Content-Type",value:"application/json"},{key:"Cache-Control",value:"private, no-cache, no-store"},{key:"Pragma",value:"no-cache"},{key:"Expires",value:"0"}],body:{csrfToken:x.csrfToken},cookies:y};case"signin":if(b.signIn){let a=`${b.signIn}${b.signIn.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(x.callbackUrl)}`;return v&&(a=`${a}&error=${encodeURIComponent(v)}`),{redirect:a,cookies:y}}return a.signin();case"signout":if(b.signOut)return{redirect:b.signOut,cookies:y};return a.signout();case"callback":if(x.provider){let a=await g.callback({body:r.body,query:r.query,headers:r.headers,cookies:r.cookies,method:w,options:x,sessionStore:z});return a.cookies&&y.push(...a.cookies),{...a,cookies:y}}break;case"verify-request":if(b.verifyRequest)return{redirect:b.verifyRequest,cookies:y};return a.verifyRequest();case"error":if(["Signin","OAuthSignin","OAuthCallback","OAuthCreateAccount","EmailCreateAccount","Callback","OAuthAccountNotLinked","EmailSignin","CredentialsSignin","SessionRequired"].includes(v))return{redirect:`${x.url}/signin?error=${v}`,cookies:y};if(b.error)return{redirect:`${b.error}${b.error.includes("?")?"&":"?"}error=${v}`,cookies:y};return a.error({error:v})}}else if("POST"===w)switch(t){case"signin":if(x.csrfTokenVerified&&x.provider){let a=await g.signin({query:r.query,body:r.body,options:x});return a.cookies&&y.push(...a.cookies),{...a,cookies:y}}return{redirect:`${x.url}/signin?csrf=true`,cookies:y};case"signout":if(x.csrfTokenVerified){let a=await g.signout({options:x,sessionStore:z});return a.cookies&&y.push(...a.cookies),{...a,cookies:y}}return{redirect:`${x.url}/signout?csrf=true`,cookies:y};case"callback":if(x.provider){if("credentials"===x.provider.type&&!x.csrfTokenVerified)return{redirect:`${x.url}/signin?csrf=true`,cookies:y};let a=await g.callback({body:r.body,query:r.query,headers:r.headers,cookies:r.cookies,method:w,options:x,sessionStore:z});return a.cookies&&y.push(...a.cookies),{...a,cookies:y}}break;case"_log":if(o.logger)try{let{code:a,level:b,...c}=null!=(m=r.body)?m:{};e.default[b](a,c)}catch(a){e.default.error("LOGGER_ERROR",a)}return{};case"session":if(x.csrfTokenVerified){let a=await g.session({options:x,sessionStore:z,newSession:null==(n=r.body)?void 0:n.data,isUpdate:!0});return a.cookies&&y.push(...a.cookies),{...a,cookies:y}}return{status:400,body:{},cookies:y}}return{status:400,body:`Error: This action with HTTP ${w} is not supported by NextAuth.js`}}},48476:(a,b,c)=>{"use strict";var d=c(55511);function e(a,b){return b=h(a,b),function(a,b){if(void 0===(c="passthrough"!==b.algorithm?d.createHash(b.algorithm):new k).write&&(c.write=c.update,c.end=c.update),j(b,c).dispatch(a),c.update||c.end(""),c.digest)return c.digest("buffer"===b.encoding?void 0:b.encoding);var c,e=c.read();return"buffer"===b.encoding?e:e.toString(b.encoding)}(a,b)}(b=a.exports=e).sha1=function(a){return e(a)},b.keys=function(a){return e(a,{excludeValues:!0,algorithm:"sha1",encoding:"hex"})},b.MD5=function(a){return e(a,{algorithm:"md5",encoding:"hex"})},b.keysMD5=function(a){return e(a,{algorithm:"md5",encoding:"hex",excludeValues:!0})};var f=d.getHashes?d.getHashes().slice():["sha1","md5"];f.push("passthrough");var g=["buffer","hex","binary","base64"];function h(a,b){var c={};if(c.algorithm=(b=b||{}).algorithm||"sha1",c.encoding=b.encoding||"hex",c.excludeValues=!!b.excludeValues,c.algorithm=c.algorithm.toLowerCase(),c.encoding=c.encoding.toLowerCase(),c.ignoreUnknown=!0===b.ignoreUnknown,c.respectType=!1!==b.respectType,c.respectFunctionNames=!1!==b.respectFunctionNames,c.respectFunctionProperties=!1!==b.respectFunctionProperties,c.unorderedArrays=!0===b.unorderedArrays,c.unorderedSets=!1!==b.unorderedSets,c.unorderedObjects=!1!==b.unorderedObjects,c.replacer=b.replacer||void 0,c.excludeKeys=b.excludeKeys||void 0,void 0===a)throw Error("Object argument required.");for(var d=0;d<f.length;++d)f[d].toLowerCase()===c.algorithm.toLowerCase()&&(c.algorithm=f[d]);if(-1===f.indexOf(c.algorithm))throw Error('Algorithm "'+c.algorithm+'"  not supported. supported values: '+f.join(", "));if(-1===g.indexOf(c.encoding)&&"passthrough"!==c.algorithm)throw Error('Encoding "'+c.encoding+'"  not supported. supported values: '+g.join(", "));return c}function i(a){return"function"==typeof a&&null!=/^function\s+\w*\s*\(\s*\)\s*{\s+\[native code\]\s+}$/i.exec(Function.prototype.toString.call(a))}function j(a,b,c){c=c||[];var d=function(a){return b.update?b.update(a,"utf8"):b.write(a,"utf8")};return{dispatch:function(b){a.replacer&&(b=a.replacer(b));var c=typeof b;return null===b&&(c="null"),this["_"+c](b)},_object:function(b){var e=Object.prototype.toString.call(b),f=/\[object (.*)\]/i.exec(e);f=(f=f?f[1]:"unknown:["+e+"]").toLowerCase();var g=null;if((g=c.indexOf(b))>=0)return this.dispatch("[CIRCULAR:"+g+"]");if(c.push(b),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(b))return d("buffer:"),d(b);if("object"!==f&&"function"!==f&&"asyncfunction"!==f)if(this["_"+f])this["_"+f](b);else if(a.ignoreUnknown)return d("["+f+"]");else throw Error('Unknown object type "'+f+'"');else{var h=Object.keys(b);a.unorderedObjects&&(h=h.sort()),!1===a.respectType||i(b)||h.splice(0,0,"prototype","__proto__","constructor"),a.excludeKeys&&(h=h.filter(function(b){return!a.excludeKeys(b)})),d("object:"+h.length+":");var j=this;return h.forEach(function(c){j.dispatch(c),d(":"),a.excludeValues||j.dispatch(b[c]),d(",")})}},_array:function(b,e){e=void 0!==e?e:!1!==a.unorderedArrays;var f=this;if(d("array:"+b.length+":"),!e||b.length<=1)return b.forEach(function(a){return f.dispatch(a)});var g=[],h=b.map(function(b){var d=new k,e=c.slice();return j(a,d,e).dispatch(b),g=g.concat(e.slice(c.length)),d.read().toString()});return c=c.concat(g),h.sort(),this._array(h,!1)},_date:function(a){return d("date:"+a.toJSON())},_symbol:function(a){return d("symbol:"+a.toString())},_error:function(a){return d("error:"+a.toString())},_boolean:function(a){return d("bool:"+a.toString())},_string:function(a){d("string:"+a.length+":"),d(a.toString())},_function:function(b){d("fn:"),i(b)?this.dispatch("[native]"):this.dispatch(b.toString()),!1!==a.respectFunctionNames&&this.dispatch("function-name:"+String(b.name)),a.respectFunctionProperties&&this._object(b)},_number:function(a){return d("number:"+a.toString())},_xml:function(a){return d("xml:"+a.toString())},_null:function(){return d("Null")},_undefined:function(){return d("Undefined")},_regexp:function(a){return d("regex:"+a.toString())},_uint8array:function(a){return d("uint8array:"),this.dispatch(Array.prototype.slice.call(a))},_uint8clampedarray:function(a){return d("uint8clampedarray:"),this.dispatch(Array.prototype.slice.call(a))},_int8array:function(a){return d("uint8array:"),this.dispatch(Array.prototype.slice.call(a))},_uint16array:function(a){return d("uint16array:"),this.dispatch(Array.prototype.slice.call(a))},_int16array:function(a){return d("uint16array:"),this.dispatch(Array.prototype.slice.call(a))},_uint32array:function(a){return d("uint32array:"),this.dispatch(Array.prototype.slice.call(a))},_int32array:function(a){return d("uint32array:"),this.dispatch(Array.prototype.slice.call(a))},_float32array:function(a){return d("float32array:"),this.dispatch(Array.prototype.slice.call(a))},_float64array:function(a){return d("float64array:"),this.dispatch(Array.prototype.slice.call(a))},_arraybuffer:function(a){return d("arraybuffer:"),this.dispatch(new Uint8Array(a))},_url:function(a){return d("url:"+a.toString(),"utf8")},_map:function(b){d("map:");var c=Array.from(b);return this._array(c,!1!==a.unorderedSets)},_set:function(b){d("set:");var c=Array.from(b);return this._array(c,!1!==a.unorderedSets)},_file:function(a){return d("file:"),this.dispatch([a.name,a.size,a.type,a.lastModfied])},_blob:function(){if(a.ignoreUnknown)return d("[blob]");throw Error('Hashing Blob objects is currently not supported\n(see https://github.com/puleos/object-hash/issues/26)\nUse "options.replacer" or "options.ignoreUnknown"\n')},_domwindow:function(){return d("domwindow")},_bigint:function(a){return d("bigint:"+a.toString())},_process:function(){return d("process")},_timer:function(){return d("timer")},_pipe:function(){return d("pipe")},_tcp:function(){return d("tcp")},_udp:function(){return d("udp")},_tty:function(){return d("tty")},_statwatcher:function(){return d("statwatcher")},_securecontext:function(){return d("securecontext")},_connection:function(){return d("connection")},_zlib:function(){return d("zlib")},_context:function(){return d("context")},_nodescript:function(){return d("nodescript")},_httpparser:function(){return d("httpparser")},_dataview:function(){return d("dataview")},_signal:function(){return d("signal")},_fsevent:function(){return d("fsevent")},_tlswrap:function(){return d("tlswrap")}}}function k(){return{buf:"",write:function(a){this.buf+=a},end:function(a){this.buf+=a},read:function(){return this.buf}}}b.writeToStream=function(a,b,c){return void 0===c&&(c=b,b={}),j(b=h(a,b),c).dispatch(a)}},48689:(a,b,c)=>{"use strict";c.d(b,{AU:()=>m,B3:()=>B,KJ:()=>w,KL:()=>s,Pe:()=>u,RK:()=>A,RO:()=>o,RV:()=>r,Tq:()=>x,Uo:()=>k,eq:()=>i,gt:()=>n,kZ:()=>t,lt:()=>p,mj:()=>z,ne:()=>j,o8:()=>y,or:()=>l,q1:()=>C,t2:()=>v,wJ:()=>q});var d=c(80228),e=c(46493),f=c(7284),g=c(20862);function h(a,b){return!(0,g.eG)(b)||(0,g.qt)(a)||(0,e.is)(a,g.Iw)||(0,e.is)(a,g.Or)||(0,e.is)(a,d.V)||(0,e.is)(a,f.XI)||(0,e.is)(a,g.Ss)?a:new g.Iw(a,b)}let i=(a,b)=>(0,g.ll)`${a} = ${h(b,a)}`,j=(a,b)=>(0,g.ll)`${a} <> ${h(b,a)}`;function k(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new g.Xs(1===b.length?b:[new g.DJ("("),g.ll.join(b,new g.DJ(" and ")),new g.DJ(")")])}function l(...a){let b=a.filter(a=>void 0!==a);if(0!==b.length)return new g.Xs(1===b.length?b:[new g.DJ("("),g.ll.join(b,new g.DJ(" or ")),new g.DJ(")")])}function m(a){return(0,g.ll)`not ${a}`}let n=(a,b)=>(0,g.ll)`${a} > ${h(b,a)}`,o=(a,b)=>(0,g.ll)`${a} >= ${h(b,a)}`,p=(a,b)=>(0,g.ll)`${a} < ${h(b,a)}`,q=(a,b)=>(0,g.ll)`${a} <= ${h(b,a)}`;function r(a,b){return Array.isArray(b)?0===b.length?(0,g.ll)`false`:(0,g.ll)`${a} in ${b.map(b=>h(b,a))}`:(0,g.ll)`${a} in ${h(b,a)}`}function s(a,b){return Array.isArray(b)?0===b.length?(0,g.ll)`true`:(0,g.ll)`${a} not in ${b.map(b=>h(b,a))}`:(0,g.ll)`${a} not in ${h(b,a)}`}function t(a){return(0,g.ll)`${a} is null`}function u(a){return(0,g.ll)`${a} is not null`}function v(a){return(0,g.ll)`exists ${a}`}function w(a){return(0,g.ll)`not exists ${a}`}function x(a,b,c){return(0,g.ll)`${a} between ${h(b,a)} and ${h(c,a)}`}function y(a,b,c){return(0,g.ll)`${a} not between ${h(b,a)} and ${h(c,a)}`}function z(a,b){return(0,g.ll)`${a} like ${b}`}function A(a,b){return(0,g.ll)`${a} not like ${b}`}function B(a,b){return(0,g.ll)`${a} ilike ${b}`}function C(a,b){return(0,g.ll)`${a} not ilike ${b}`}},48764:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(79428),e=c(69817),f=d.Buffer.from([0]),g=d.Buffer.from([2]),h=d.Buffer.from([3]),i=d.Buffer.from([48]),j=d.Buffer.from([4]),k=a=>{if(a<128)return d.Buffer.from([a]);let b=d.Buffer.alloc(5);b.writeUInt32BE(a,1);let c=1;for(;0===b[c];)c++;return b[c-1]=128|5-c,b.slice(c-1)},l=new Map([["P-256",d.Buffer.from("06 08 2A 86 48 CE 3D 03 01 07".replace(/ /g,""),"hex")],["secp256k1",d.Buffer.from("06 05 2B 81 04 00 0A".replace(/ /g,""),"hex")],["P-384",d.Buffer.from("06 05 2B 81 04 00 22".replace(/ /g,""),"hex")],["P-521",d.Buffer.from("06 05 2B 81 04 00 23".replace(/ /g,""),"hex")],["ecPublicKey",d.Buffer.from("06 07 2A 86 48 CE 3D 02 01".replace(/ /g,""),"hex")],["X25519",d.Buffer.from("06 03 2B 65 6E".replace(/ /g,""),"hex")],["X448",d.Buffer.from("06 03 2B 65 6F".replace(/ /g,""),"hex")],["Ed25519",d.Buffer.from("06 03 2B 65 70".replace(/ /g,""),"hex")],["Ed448",d.Buffer.from("06 03 2B 65 71".replace(/ /g,""),"hex")]]);class m{constructor(){this.length=0,this.elements=[]}oidFor(a){let b=l.get(a);if(!b)throw new e.JOSENotSupported("Invalid or unsupported OID");this.elements.push(b),this.length+=b.length}zero(){this.elements.push(g,d.Buffer.from([1]),f),this.length+=3}one(){this.elements.push(g,d.Buffer.from([1]),d.Buffer.from([1])),this.length+=3}unsignedInteger(a){if(128&a[0]){let b=k(a.length+1);this.elements.push(g,b,f,a),this.length+=2+b.length+a.length}else{let b=0;for(;0===a[b]&&(128&a[b+1])==0;)b++;let c=k(a.length-b);this.elements.push(g,k(a.length-b),a.slice(b)),this.length+=1+c.length+a.length-b}}octStr(a){let b=k(a.length);this.elements.push(j,k(a.length),a),this.length+=1+b.length+a.length}bitStr(a){let b=k(a.length+1);this.elements.push(h,k(a.length+1),f,a),this.length+=1+b.length+a.length+1}add(a){this.elements.push(a),this.length+=a.length}end(a=i){let b=k(this.length);return d.Buffer.concat([a,b,...this.elements],1+b.length+this.length)}}b.default=m},49122:(a,b,c)=>{"use strict";c.d(b,{A:()=>au});var d=c(21820),e=c(29021);let f=new Map,g=new Map,h=Symbol("OriginError"),i={};class j extends Promise{constructor(a,b,c,d,e={}){let g,i;super((a,b)=>{g=a,i=b}),this.tagged=Array.isArray(a.raw),this.strings=a,this.args=b,this.handler=c,this.canceller=d,this.options=e,this.state=null,this.statement=null,this.resolve=a=>(this.active=!1,g(a)),this.reject=a=>(this.active=!1,i(a)),this.active=!1,this.cancelled=null,this.executed=!1,this.signature="",this[h]=this.handler.debug?Error():this.tagged&&function(a){if(f.has(a))return f.get(a);let b=Error.stackTraceLimit;return Error.stackTraceLimit=4,f.set(a,Error()),Error.stackTraceLimit=b,f.get(a)}(this.strings)}get origin(){return(this.handler.debug?this[h].stack:this.tagged&&g.has(this.strings)?g.get(this.strings):g.set(this.strings,this[h].stack).get(this.strings))||""}static get[Symbol.species](){return Promise}cancel(){return this.canceller&&(this.canceller(this),this.canceller=null)}simple(){return this.options.simple=!0,this.options.prepare=!1,this}async readable(){return this.simple(),this.streaming=!0,this}async writable(){return this.simple(),this.streaming=!0,this}cursor(a=1,b){let c;return(this.options.simple=!1,"function"==typeof a&&(b=a,a=1),this.cursorRows=a,"function"==typeof b)?(this.cursorFn=b,this):{[Symbol.asyncIterator]:()=>({next:()=>{if(this.executed&&!this.active)return{done:!0};c&&c();let a=new Promise((a,b)=>{this.cursorFn=b=>(a({value:b,done:!1}),new Promise(a=>c=a)),this.resolve=()=>(this.active=!1,a({done:!0})),this.reject=a=>(this.active=!1,b(a))});return this.execute(),a},return:()=>(c&&c(i),{done:!0})})}}describe(){return this.options.simple=!1,this.onlyDescribe=this.options.prepare=!0,this}stream(){throw Error(".stream has been renamed to .forEach")}forEach(a){return this.forEachFn=a,this.handle(),this}raw(){return this.isRaw=!0,this}values(){return this.isRaw="values",this}async handle(){!this.executed&&(this.executed=!0)&&await 1&&this.handler(this)}execute(){return this.handle(),this}then(){return this.handle(),super.then.apply(this,arguments)}catch(){return this.handle(),super.catch.apply(this,arguments)}finally(){return this.handle(),super.finally.apply(this,arguments)}}class k extends Error{constructor(a){super(a.message),this.name=this.constructor.name,Object.assign(this,a)}}let l={connection:function a(b,c,d){let{host:e,port:f}=d||c,g=Object.assign(Error("write "+b+" "+(c.path||e+":"+f)),{code:b,errno:b,address:c.path||e},c.path?{}:{port:f});return Error.captureStackTrace(g,a),g},postgres:function a(b){let c=new k(b);return Error.captureStackTrace(c,a),c},generic:function a(b,c){let d=Object.assign(Error(b+": "+c),{code:b});return Error.captureStackTrace(d,a),d},notSupported:function a(b){let c=Object.assign(Error(b+" (B) is not supported"),{code:"MESSAGE_NOT_SUPPORTED",name:b});return Error.captureStackTrace(c,a),c}};class m{then(){z()}catch(){z()}finally(){z()}}class n extends m{constructor(a){super(),this.value=F(a)}}class o extends m{constructor(a,b,c){super(),this.value=a,this.type=b,this.array=c}}class p extends m{constructor(a,b){super(),this.first=a,this.rest=b}build(a,b,c,d){let e=y.map(([b,c])=>({fn:c,i:a.search(b)})).sort((a,b)=>a.i-b.i).pop();return -1===e.i?E(this.first,d):e.fn(this.first,this.rest,b,c,d)}}function q(a,b,c,d){let e=a instanceof o?a.value:a;if(void 0===e&&(a instanceof o?a.value=d.transform.undefined:e=a=d.transform.undefined,void 0===e))throw l.generic("UNDEFINED_VALUE","Undefined values are not allowed");return"$"+c.push(a instanceof o?(b.push(a.value),a.array?a.array[a.type||G(a.value)]||a.type||function a(b){return Array.isArray(b)?a(b[0]):1009*("string"==typeof b)}(a.value):a.type):(b.push(a),G(a)))}let r=D({string:{to:25,from:null,serialize:a=>""+a},number:{to:0,from:[21,23,26,700,701],serialize:a=>""+a,parse:a=>+a},json:{to:114,from:[114,3802],serialize:a=>JSON.stringify(a),parse:a=>JSON.parse(a)},boolean:{to:16,from:16,serialize:a=>!0===a?"t":"f",parse:a=>"t"===a},date:{to:1184,from:[1082,1114,1184],serialize:a=>(a instanceof Date?a:new Date(a)).toISOString(),parse:a=>new Date(a)},bytea:{to:17,from:17,serialize:a=>"\\x"+Buffer.from(a).toString("hex"),parse:a=>Buffer.from(a.slice(2),"hex")}});function s(a,b,c,d,e,f){for(let g=1;g<a.strings.length;g++)b+=t(b,c,d,e,f)+a.strings[g],c=a.args[g];return b}function t(a,b,c,d,e){return b instanceof p?b.build(a,c,d,e):b instanceof j?u(b,c,d,e):b instanceof n?b.value:b&&b[0]instanceof j?b.reduce((a,b)=>a+" "+u(b,c,d,e),""):q(b,c,d,e)}function u(a,b,c,d){return a.fragment=!0,s(a,a.strings[0],a.args[0],b,c,d)}function v(a,b,c,d,e){return a.map(a=>"("+d.map(d=>t("values",a[d],b,c,e)).join(",")+")").join(",")}function w(a,b,c,d,e){let f=Array.isArray(a[0]),g=b.length?b.flat():Object.keys(f?a[0]:a);return v(f?a:[a],c,d,g,e)}function x(a,b,c,d,e){let f;return("string"==typeof a&&(a=[a].concat(b)),Array.isArray(a))?E(a,e):(b.length?b.flat():Object.keys(a)).map(b=>((f=a[b])instanceof j?u(f,c,d,e):f instanceof n?f.value:q(f,c,d,e))+" as "+F(e.transform.column.to?e.transform.column.to(b):b)).join(",")}let y=Object.entries({values:w,in:(...a)=>{let b=w(...a);return"()"===b?"(null)":b},select:x,as:x,returning:x,"\\(":x,update:(a,b,c,d,e)=>(b.length?b.flat():Object.keys(a)).map(b=>F(e.transform.column.to?e.transform.column.to(b):b)+"="+t("values",a[b],c,d,e)),insert(a,b,c,d,e){let f=b.length?b.flat():Object.keys(Array.isArray(a)?a[0]:a);return"("+E(f,e)+")values"+v(Array.isArray(a)?a:[a],c,d,f,e)}}).map(([a,b])=>[RegExp("((?:^|[\\s(])"+a+"(?:$|[\\s(]))(?![\\s\\S]*\\1)","i"),b]);function z(){throw l.generic("NOT_TAGGED_CALL","Query not called as a tagged template literal")}let A=r.serializers,B=r.parsers,C=function(a){let b=D(a||{});return{serializers:Object.assign({},A,b.serializers),parsers:Object.assign({},B,b.parsers)}};function D(a){return Object.keys(a).reduce((b,c)=>(a[c].from&&[].concat(a[c].from).forEach(d=>b.parsers[d]=a[c].parse),a[c].serialize&&(b.serializers[a[c].to]=a[c].serialize,a[c].from&&[].concat(a[c].from).forEach(d=>b.serializers[d]=a[c].serialize)),b),{parsers:{},serializers:{}})}function E(a,{transform:{column:b}}){return a.map(a=>F(b.to?b.to(a):a)).join(",")}let F=function(a){return'"'+a.replace(/"/g,'""').replace(/\./g,'"."')+'"'},G=function a(b){return b instanceof o?b.type:b instanceof Date?1184:b instanceof Uint8Array?17:!0===b||!1===b?16:"bigint"==typeof b?20:Array.isArray(b)?a(b[0]):0},H=/\\/g,I=/"/g,J=function a(b,c,d,e){if(!1===Array.isArray(b))return b;if(!b.length)return"{}";let f=b[0],g=1020===e?";":",";return Array.isArray(f)&&!f.type?"{"+b.map(b=>a(b,c,d,e)).join(g)+"}":"{"+b.map(a=>{if(void 0===a&&void 0===(a=d.transform.undefined))throw l.generic("UNDEFINED_VALUE","Undefined values are not allowed");return null===a?"null":'"'+(c?c(a.type?a.value:a):""+a).replace(H,"\\\\").replace(I,'\\"')+'"'}).join(g)+"}"},K={i:0,char:null,str:"",quoted:!1,last:0},L=a=>{let b=a[0];for(let c=1;c<a.length;c++)b+="_"===a[c]?a[++c].toUpperCase():a[c];return b},M=a=>{let b=a[0].toUpperCase();for(let c=1;c<a.length;c++)b+="_"===a[c]?a[++c].toUpperCase():a[c];return b},N=a=>a.replace(/_/g,"-"),O=a=>a.replace(/([A-Z])/g,"_$1").toLowerCase(),P=a=>(a.slice(0,1)+a.slice(1).replace(/([A-Z])/g,"_$1")).toLowerCase(),Q=a=>a.replace(/-/g,"_");function R(a){return function b(c,d){return"object"==typeof c&&null!==c&&(114===d.type||3802===d.type)?Array.isArray(c)?c.map(a=>b(a,d)):Object.entries(c).reduce((c,[e,f])=>Object.assign(c,{[a(e)]:b(f,d)}),{}):c}}L.column={from:L},L.value={from:R(L)},O.column={to:O};let S={...L};S.column.to=O,M.column={from:M},M.value={from:R(M)},P.column={to:P};let T={...M};T.column.to=P,N.column={from:N},N.value={from:R(N)},Q.column={to:Q};let U={...N};U.column.to=Q;var V=c(91645),W=c(34631),X=c(55511),Y=c(27910),Z=c(74998);class $ extends Array{constructor(){super(),Object.defineProperties(this,{count:{value:null,writable:!0},state:{value:null,writable:!0},command:{value:null,writable:!0},columns:{value:null,writable:!0},statement:{value:null,writable:!0}})}static get[Symbol.species](){return Array}}let _=function(a=[]){let b=a.slice(),c=0;return{get length(){return b.length-c},remove:a=>{let c=b.indexOf(a);return -1===c?null:(b.splice(c,1),a)},push:a=>(b.push(a),a),shift:()=>{let a=b[c++];return c===b.length?(c=0,b=[]):b[c-1]=void 0,a}}},aa=Buffer.allocUnsafe(256),ab=Object.assign(function(){return ab.i=0,ab},"BCcDdEFfHPpQSX".split("").reduce((a,b)=>{let c=b.charCodeAt(0);return a[b]=()=>(aa[0]=c,ab.i=5,ab),a},{}),{N:"\0",i:0,inc:a=>(ab.i+=a,ab),str(a){let b=Buffer.byteLength(a);return ac(b),ab.i+=aa.write(a,ab.i,b,"utf8"),ab},i16:a=>(ac(2),aa.writeUInt16BE(a,ab.i),ab.i+=2,ab),i32:(a,b)=>(b||0===b?aa.writeUInt32BE(a,b):(ac(4),aa.writeUInt32BE(a,ab.i),ab.i+=4),ab),z:a=>(ac(a),aa.fill(0,ab.i,ab.i+a),ab.i+=a,ab),raw:a=>(aa=Buffer.concat([aa.subarray(0,ab.i),a]),ab.i=aa.length,ab),end(a=1){aa.writeUInt32BE(ab.i-a,a);let b=aa.subarray(0,ab.i);return ab.i=0,aa=Buffer.allocUnsafe(256),b}});function ac(a){if(aa.length-ab.i<a){let b=aa,c=b.length;aa=Buffer.allocUnsafe(c+(c>>1)+a),b.copy(aa)}}let ad=function a(b,c={},{onopen:d=ak,onend:e=ak,onclose:f=ak}={}){let{ssl:g,max:h,user:k,host:m,port:n,database:o,parsers:p,transform:r,onnotice:t,onnotify:u,onparameter:v,max_pipeline:w,keep_alive:x,backoff:y,target_session_attrs:z}=b,A=_(),B=ae++,C={pid:null,secret:null},D=aq(aU,b.idle_timeout),E=aq(aU,b.max_lifetime),F=aq(function(){aS(l.connection("CONNECT_TIMEOUT",b,G)),G.destroy()},b.connect_timeout),G=null,H,I=new $,L=Buffer.alloc(0),M=b.fetch_types,N={},O={},P=Math.random().toString(36).slice(2),Q=1,R=0,S=0,T=0,U=0,aa=0,ac=0,ad=0,am=null,ar=null,as=!1,at=null,au=null,av=null,aw=null,ax=null,ay=null,az=null,aA=null,aB=null,aC=null,aD={queue:c.closed,idleTimer:D,connect(a){av=a,aP()},terminate:aV,execute:aG,cancel:aF,end:aU,count:0,id:B};return c.closed&&c.closed.push(aD),aD;async function aE(){let a;try{a=b.socket?await Promise.resolve(b.socket(b)):new V.Socket}catch(a){aR(a);return}return a.on("error",aR),a.on("close",aW),a.on("drain",aM),a}async function aF({pid:a,secret:b},c,d){try{H=ab().i32(16).i32(0x4d2162e).i32(a).i32(b).end(16),await aO(),G.once("error",d),G.once("close",c)}catch(a){d(a)}}function aG(a){if(as)return aT(a,l.connection("CONNECTION_DESTROYED",b));if(!a.cancelled)try{return a.state=C,aB?A.push(a):(aB=a).active=!0,function(a){let c=[],d=[],e=s(a,a.strings[0],a.args[0],c,d,b);a.tagged||a.args.forEach(a=>q(a,c,d,b)),a.prepare=b.prepare&&(!("prepare"in a.options)||a.options.prepare),a.string=e,a.signature=a.prepare&&d+e,a.onlyDescribe&&delete O[a.signature],a.parameters=a.parameters||c,a.prepared=a.prepare&&a.signature in O,a.describeFirst=a.onlyDescribe||c.length&&!a.prepared,a.statement=a.prepared?O[a.signature]:{string:e,types:d,name:a.prepare?P+Q++:""},"function"==typeof b.debug&&b.debug(B,e,c,d)}(a),aJ(function(a){var b;if(a.parameters.length>=65534)throw l.generic("MAX_PARAMETERS_EXCEEDED","Max number of parameters (65534) exceeded");return a.options.simple?ab().Q().str(a.statement.string+ab.N).end():a.describeFirst?Buffer.concat([aH(a),ag]):a.prepare?a.prepared?aI(a):Buffer.concat([aH(a),aI(a)]):(b=a,Buffer.concat([a4(b.statement.string,b.parameters,b.statement.types),aj,aI(b)]))}(a))&&!a.describeFirst&&!a.cursorFn&&A.length<w&&(!a.options.onexecute||a.options.onexecute(aD))}catch(a){return 0===A.length&&aJ(af),aS(a),!0}}function aH(a){return Buffer.concat([a4(a.statement.string,a.parameters,a.statement.types,a.statement.name),function(a,b=""){return ab().D().str("S").str(b+ab.N).end()}("S",a.statement.name)])}function aI(a){return Buffer.concat([function(a,c,d="",e=""){let f,g;return ab().B().str(e+ab.N).str(d+ab.N).i16(0).i16(a.length),a.forEach((d,e)=>{if(null===d)return ab.i32(0xffffffff);g=c[e],a[e]=d=g in b.serializers?b.serializers[g](d):""+d,f=ab.i,ab.inc(4).str(d).i32(ab.i-f-4,f)}),ab.i16(0),ab.end()}(a.parameters,a.statement.types,a.statement.name,a.cursorName),a.cursorFn?a5("",a.cursorRows):ai])}function aJ(a,b){return(ay=ay?Buffer.concat([ay,a]):Buffer.from(a),b||ay.length>=1024)?aK(b):(null===ar&&(ar=setImmediate(aK)),!0)}function aK(a){let b=G.write(ay,a);return null!==ar&&clearImmediate(ar),ay=ar=null,b}async function aL(){if(aJ(ah),!await new Promise(a=>G.once("data",b=>a(83===b[0])))&&"prefer"===g)return aQ();G.removeAllListeners(),(G=W.connect({socket:G,servername:V.isIP(G.host)?void 0:G.host,..."require"===g||"allow"===g||"prefer"===g?{rejectUnauthorized:!1}:"verify-full"===g?{}:"object"==typeof g?g:{}})).on("secureConnect",aQ),G.on("error",aR),G.on("close",aW),G.on("drain",aM)}function aM(){aB||d(aD)}function aN(c){if(!at||(at.push(c),!((S-=c.length)>0)))for(L=at?Buffer.concat(at,aa-S):0===L.length?c:Buffer.concat([L,c],L.length+c.length);L.length>4;){if((aa=L.readUInt32BE(1))>=L.length){S=aa-L.length,at=[L];break}try{!function(c,e=c[0]){(68===e?function(a){let b,c,d,e=7,f=aB.isRaw?Array(aB.statement.columns.length):{};for(let g=0;g<aB.statement.columns.length;g++)c=aB.statement.columns[g],b=a.readInt32BE(e),e+=4,d=-1===b?null:!0===aB.isRaw?a.subarray(e,e+=b):void 0===c.parser?a.toString("utf8",e,e+=b):!0===c.parser.array?c.parser(a.toString("utf8",e+1,e+=b)):c.parser(a.toString("utf8",e,e+=b)),aB.isRaw?f[g]=!0===aB.isRaw?d:r.value.from?r.value.from(d,c):d:f[c.name]=r.value.from?r.value.from(d,c):d;aB.forEachFn?aB.forEachFn(r.row.from?r.row.from(f):f,I):I[ad++]=r.row.from?r.row.from(f):f}:100===e?function(a){ax&&(ax.push(a.subarray(5))||G.pause())}:65===e?function(a){if(!u)return;let b=9;for(;0!==a[b++];);u(a.toString("utf8",9,b-1),a.toString("utf8",b,a.length-1))}:83===e?function(a){let[c,d]=a.toString("utf8",5,a.length-1).split(ab.N);N[c]=d,b.parameters[c]!==d&&(b.parameters[c]=d,v&&v(c,d))}:90===e?function(c){if(aB&&aB.options.simple&&aB.resolve(au||I),aB=au=null,I=new $,F.cancel(),av){if(z)if(N.in_hot_standby&&N.default_transaction_read_only){var e,f;if(e=z,f=N,"read-write"===e&&"on"===f.default_transaction_read_only||"read-only"===e&&"off"===f.default_transaction_read_only||"primary"===e&&"on"===f.in_hot_standby||"standby"===e&&"off"===f.in_hot_standby||"prefer-standby"===e&&"off"===f.in_hot_standby&&b.host[U])return aV()}else{let a=new j([`
      show transaction_read_only;
      select pg_catalog.pg_is_in_recovery()
    `],[],aG,null,{simple:!0});a.resolve=([[a],[b]])=>{N.default_transaction_read_only=a.transaction_read_only,N.in_hot_standby=b.pg_is_in_recovery?"on":"off"},a.execute();return}return M?(av.reserve&&(av=null),a2()):(av&&!av.reserve&&aG(av),b.shared.retries=U=0,void(av=null))}for(;A.length&&(aB=A.shift())&&(aB.active=!0,aB.cancelled);)a(b).cancel(aB.state,aB.cancelled.resolve,aB.cancelled.reject);aB||(aD.reserved?aD.reserved.release||73!==c[5]?aD.reserved():aw?aV():(aD.reserved=null,d(aD)):aw?aV():d(aD))}:67===e?function(a){ad=0;for(let b=a.length-1;b>0;b--)if(32===a[b]&&a[b+1]<58&&null===I.count&&(I.count=+a.toString("utf8",b+1,a.length-1)),a[b-1]>=65){I.command=a.toString("utf8",5,b),I.state=C;break}return(aC&&(aC(),aC=null),"BEGIN"!==I.command||1===h||aD.reserved)?aB.options.simple?aX():void(aB.cursorFn&&(I.count&&aB.cursorFn(I),aJ(af)),aB.resolve(I)):aS(l.generic("UNSAFE_TRANSACTION","Only use sql.begin, sql.reserved or max: 1"))}:50===e?aX:49===e?function(){aB.parsing=!1}:116===e?function(a){let b=a.readUInt16BE(5);for(let c=0;c<b;++c)aB.statement.types[c]||(aB.statement.types[c]=a.readUInt32BE(7+4*c));aB.prepare&&(O[aB.signature]=aB.statement),aB.describeFirst&&!aB.onlyDescribe&&(aJ(aI(aB)),aB.describeFirst=!1)}:84===e?function(a){let b;I.command&&((au=au||[I]).push(I=new $),I.count=null,aB.statement.columns=null);let c=a.readUInt16BE(5),d=7;aB.statement.columns=Array(c);for(let e=0;e<c;++e){for(b=d;0!==a[d++];);let c=a.readUInt32BE(d),f=a.readUInt16BE(d+4),g=a.readUInt32BE(d+6);aB.statement.columns[e]={name:r.column.from?r.column.from(a.toString("utf8",b,d-1)):a.toString("utf8",b,d-1),parser:p[g],table:c,number:f,type:g},d+=18}if(I.statement=aB.statement,aB.onlyDescribe)return aB.resolve(aB.statement),aJ(af)}:82===e?aY:110===e?function(){if(I.statement=aB.statement,I.statement.columns=[],aB.onlyDescribe)return aB.resolve(aB.statement),aJ(af)}:75===e?function(a){C.pid=a.readUInt32BE(5),C.secret=a.readUInt32BE(9)}:69===e?function(a){var b,c;aB&&(aB.cursorFn||aB.describeFirst)&&aJ(af);let d=l.postgres(an(a));aB&&aB.retried?aS(aB.retried):aB&&aB.prepared&&al.has(d.routine)?(b=aB,c=d,delete O[b.signature],b.retried=c,aG(b)):aS(d)}:115===e?a3:51===e?function(){I.count&&aB.cursorFn(I),aB.resolve(I)}:71===e?function(){ax=new Y.Writable({autoDestroy:!0,write(a,b,c){G.write(ab().d().raw(a).end(),c)},destroy(a,b){b(a),G.write(ab().f().str(a+ab.N).end()),ax=null},final(a){G.write(ab().c().end()),aC=a}}),aB.resolve(ax)}:78===e?function(a){t?t(an(a)):console.log(an(a))}:72===e?function(){ax=new Y.Readable({read(){G.resume()}}),aB.resolve(ax)}:99===e?function(){ax&&ax.push(null),ax=null}:73===e?function(){}:86===e?function(){aS(l.notSupported("FunctionCallResponse"))}:118===e?function(){aS(l.notSupported("NegotiateProtocolVersion"))}:87===e?function(){ax=new Y.Duplex({autoDestroy:!0,read(){G.resume()},write(a,b,c){G.write(ab().d().raw(a).end(),c)},destroy(a,b){b(a),G.write(ab().f().str(a+ab.N).end()),ax=null},final(a){G.write(ab().c().end()),aC=a}}),aB.resolve(ax)}:function(a){console.error("Postgres.js : Unknown Message:",a[0])})(c)}(L.subarray(0,aa+1))}catch(a){aB&&(aB.cursorFn||aB.describeFirst)&&aJ(af),aS(a)}L=L.subarray(aa+1),S=0,at=null}}async function aO(){if(as=!1,N={},G||(G=await aE()),G){if(F.start(),b.socket)return g?aL():aQ();if(G.on("connect",g?aL:aQ),b.path)return G.connect(b.path);G.ssl=g,G.connect(n[T],m[T]),G.host=m[T],G.port=n[T],T=(T+1)%n.length}}function aP(){setTimeout(aO,R?R+ac-Z.performance.now():0)}function aQ(){try{O={},M=b.fetch_types,P=Math.random().toString(36).slice(2),Q=1,E.start(),G.on("data",aN),x&&G.setKeepAlive&&G.setKeepAlive(!0,1e3*x);let a=H||ab().inc(4).i16(3).z(2).str(Object.entries(Object.assign({user:k,database:o,client_encoding:"UTF8"},b.connection)).filter(([,a])=>a).map(([a,b])=>a+ab.N+b).join(ab.N)).z(2).end(0);aJ(a)}catch(a){aR(a)}}function aR(a){if(aD.queue!==c.connecting||!b.host[U+1])for(aS(a);A.length;)aT(A.shift(),a)}function aS(a){ax&&(ax.destroy(a),ax=null),aB&&aT(aB,a),av&&(aT(av,a),av=null)}function aT(a,c){if(a.reserve)return a.reject(c);c&&"object"==typeof c||(c=Error(c)),"query"in c||"parameters"in c||Object.defineProperties(c,{stack:{value:c.stack+a.origin.replace(/.*\n/,"\n"),enumerable:b.debug},query:{value:a.string,enumerable:b.debug},parameters:{value:a.parameters,enumerable:b.debug},args:{value:a.args,enumerable:b.debug},types:{value:a.statement&&a.statement.types,enumerable:b.debug}}),a.reject(c)}function aU(){return aw||(aD.reserved||e(aD),aD.reserved||av||aB||0!==A.length?aw=new Promise(a=>az=a):(aV(),new Promise(a=>G&&"closed"!==G.readyState?G.once("close",a):a())))}function aV(){as=!0,(ax||aB||av||A.length)&&aR(l.connection("CONNECTION_DESTROYED",b)),clearImmediate(ar),G&&(G.removeListener("data",aN),G.removeListener("connect",aQ),"open"===G.readyState&&G.end(ab().X().end())),az&&(az(),aw=az=null)}async function aW(a){if(L=Buffer.alloc(0),S=0,at=null,clearImmediate(ar),G.removeListener("data",aN),G.removeListener("connect",aQ),D.cancel(),E.cancel(),F.cancel(),G.removeAllListeners(),G=null,av)return aP();!a&&(aB||A.length)&&aR(l.connection("CONNECTION_CLOSED",b,G)),R=Z.performance.now(),a&&b.shared.retries++,ac=("function"==typeof y?y(b.shared.retries):y)*1e3,f(aD,l.connection("CONNECTION_CLOSED",b,G))}function aX(){I.statement||(I.statement=aB.statement),I.columns=aB.statement.columns}async function aY(a,b=a.readUInt32BE(5)){(3===b?aZ:5===b?a$:10===b?a_:11===b?a0:12===b?function(a){a.toString("utf8",9).split(ab.N,1)[0].slice(2)!==am&&(aS(l.generic("SASL_SIGNATURE_MISMATCH","The server did not return the correct signature")),G.destroy())}:0!==b?function(a,b){console.error("Postgres.js : Unknown Auth:",b)}:ak)(a,b)}async function aZ(){let a=await a1();aJ(ab().p().str(a).z(1).end())}async function a$(a){let b="md5"+await ao(Buffer.concat([Buffer.from(await ao(await a1()+k)),a.subarray(9)]));aJ(ab().p().str(b).z(1).end())}async function a_(){aA=(await X.randomBytes(18)).toString("base64"),ab().p().str("SCRAM-SHA-256"+ab.N);let a=ab.i;aJ(ab.inc(4).str("n,,n=*,r="+aA).i32(ab.i-a-4,a).end())}async function a0(a){var b;let c=a.toString("utf8",9).split(",").reduce((a,b)=>(a[b[0]]=b.slice(2),a),{}),d=await X.pbkdf2Sync(await a1(),Buffer.from(c.s,"base64"),parseInt(c.i),32,"sha256"),e=await ap(d,"Client Key"),f="n=*,r="+aA+",r="+c.r+",s="+c.s+",i="+c.i+",c=biws,r="+c.r;am=(await ap(await ap(d,"Server Key"),f)).toString("base64");let g="c=biws,r="+c.r+",p="+(function(a,b){let c=Math.max(a.length,b.length),d=Buffer.allocUnsafe(c);for(let e=0;e<c;e++)d[e]=a[e]^b[e];return d})(e,Buffer.from(await ap(await (b=e,X.createHash("sha256").update(b).digest()),f))).toString("base64");aJ(ab().p().str(g).end())}function a1(){return Promise.resolve("function"==typeof b.pass?b.pass():b.pass)}async function a2(){M=!1,(await new j([`
      select b.oid, b.typarray
      from pg_catalog.pg_type a
      left join pg_catalog.pg_type b on b.oid = a.typelem
      where a.typcategory = 'A'
      group by b.oid, b.typarray
      order by b.oid
    `],[],aG)).forEach(({oid:a,typarray:c})=>(function(a,c){if(b.parsers[c]&&b.serializers[c])return;let d=b.parsers[a];b.shared.typeArrayMap[a]=c,b.parsers[c]=a=>(K.i=K.last=0,function a(b,c,d,e){let f=[],g=1020===e?";":",";for(;b.i<c.length;b.i++){if(b.char=c[b.i],b.quoted)"\\"===b.char?b.str+=c[++b.i]:'"'===b.char?(f.push(d?d(b.str):b.str),b.str="",b.quoted='"'===c[b.i+1],b.last=b.i+2):b.str+=b.char;else if('"'===b.char)b.quoted=!0;else if("{"===b.char)b.last=++b.i,f.push(a(b,c,d,e));else if("}"===b.char){b.quoted=!1,b.last<b.i&&f.push(d?d(c.slice(b.last,b.i)):c.slice(b.last,b.i)),b.last=b.i+1;break}else b.char===g&&"}"!==b.p&&'"'!==b.p&&(f.push(d?d(c.slice(b.last,b.i)):c.slice(b.last,b.i)),b.last=b.i+1);b.p=b.char}return b.last<b.i&&f.push(d?d(c.slice(b.last,b.i+1)):c.slice(b.last,b.i+1)),f}(K,a,d,c)),b.parsers[c].array=!0,b.serializers[c]=d=>J(d,b.serializers[a],b,c)})(a,c))}async function a3(){try{let a=await Promise.resolve(aB.cursorFn(I));ad=0,a===i?aJ(function(a=""){return Buffer.concat([ab().C().str("P").str(a+ab.N).end(),ab().S().end()])}(aB.portal)):(I=new $,aJ(a5("",aB.cursorRows)))}catch(a){aJ(af),aB.reject(a)}}function a4(a,b,c,d=""){return ab().P().str(d+ab.N).str(a+ab.N).i16(b.length),b.forEach((a,b)=>ab.i32(c[b]||0)),ab.end()}function a5(a="",b=0){return Buffer.concat([ab().E().str(a+ab.N).i32(b).end(),ag])}},ae=1,af=ab().S().end(),ag=ab().H().end(),ah=ab().i32(8).i32(0x4d2162f).end(8),ai=Buffer.concat([ab().E().str(ab.N).i32(0).end(),af]),aj=ab().D().str("S").str(ab.N).end(),ak=()=>{},al=new Set(["FetchPreparedStatement","RevalidateCachedQuery","transformAssignedExpr"]),am={83:"severity_local",86:"severity",67:"code",77:"message",68:"detail",72:"hint",80:"position",112:"internal_position",113:"internal_query",87:"where",115:"schema_name",116:"table_name",99:"column_name",100:"data type_name",110:"constraint_name",70:"file",76:"line",82:"routine"};function an(a){let b={},c=5;for(let d=5;d<a.length-1;d++)0===a[d]&&(b[am[a[c]]]=a.toString("utf8",c+1,d),c=d+1);return b}function ao(a){return X.createHash("md5").update(a).digest("hex")}function ap(a,b){return X.createHmac("sha256",a).update(b).digest()}function aq(a,b){let c;if(!(b="function"==typeof b?b():b))return{cancel:ak,start:ak};return{cancel(){c&&(clearTimeout(c),c=null)},start(){c&&clearTimeout(c),c=setTimeout(d,1e3*b,arguments)}};function d(b){a.apply(null,b),c=null}}let ar=()=>{};function as(a,b,c,d){let e,f,g,h=d.raw?Array(b.length):{};for(let i=0;i<b.length;i++)e=a[c++],f=b[i],g=110===e?null:117===e?void 0:void 0===f.parser?a.toString("utf8",c+4,c+=4+a.readUInt32BE(c)):!0===f.parser.array?f.parser(a.toString("utf8",c+5,c+=4+a.readUInt32BE(c))):f.parser(a.toString("utf8",c+4,c+=4+a.readUInt32BE(c))),d.raw?h[i]=!0===d.raw?g:d.value.from?d.value.from(g,f):g:h[f.name]=d.value.from?d.value.from(g,f):g;return{i:c,row:d.row.from?d.row.from(h):h}}function at(a,b,c=393216){return new Promise(async(d,e)=>{await a.begin(async a=>{let e;b||([{oid:b}]=await a`select lo_creat(-1) as oid`);let[{fd:f}]=await a`select lo_open(${b}, ${c}) as fd`,g={writable:i,readable:h,close:()=>a`select lo_close(${f})`.then(e),tell:()=>a`select lo_tell64(${f})`,read:b=>a`select loread(${f}, ${b}) as data`,write:b=>a`select lowrite(${f}, ${b})`,truncate:b=>a`select lo_truncate64(${f}, ${b})`,seek:(b,c=0)=>a`select lo_lseek64(${f}, ${b}, ${c})`,size:()=>a`
          select
            lo_lseek64(${f}, location, 0) as position,
            seek.size
          from (
            select
              lo_lseek64($1, 0, 2) as size,
              tell.location
            from (select lo_tell64($1) as location) tell
          ) seek
        `};return d(g),new Promise(async a=>e=a);async function h({highWaterMark:a=16384,start:b=0,end:c=1/0}={}){let d=c-b;return b&&await g.seek(b),new Y.Readable({highWaterMark:a,async read(a){let b=a>d?a-d:a;d-=a;let[{data:c}]=await g.read(b);this.push(c),c.length<a&&this.push(null)}})}async function i({highWaterMark:a=16384,start:b=0}={}){return b&&await g.seek(b),new Y.Writable({highWaterMark:a,write(a,b,c){g.write(a).then(()=>c(),c)}})}}).catch(e)})}Object.assign(av,{PostgresError:k,toPascal:M,pascal:T,toCamel:L,camel:S,toKebab:N,kebab:U,fromPascal:P,fromCamel:O,fromKebab:Q,BigInt:{to:20,from:[20],parse:a=>BigInt(a),serialize:a=>a.toString()}});let au=av;function av(a,b){let c=function(a,b){var c;if(a&&a.shared)return a;let e=process.env,f=(a&&"string"!=typeof a?a:b)||{},{url:g,multihost:h}=function(a){if(!a||"string"!=typeof a)return{url:{searchParams:new Map}};let b=a;b=decodeURIComponent((b=b.slice(b.indexOf("://")+3).split(/[?/]/)[0]).slice(b.indexOf("@")+1));let c=new URL(a.replace(b,b.split(",")[0]));return{url:{username:decodeURIComponent(c.username),password:decodeURIComponent(c.password),host:c.host,hostname:c.hostname,port:c.port,pathname:c.pathname,searchParams:c.searchParams},multihost:b.indexOf(",")>-1&&b}}(a),i=[...g.searchParams].reduce((a,[b,c])=>(a[b]=c,a),{}),j=f.hostname||f.host||h||g.hostname||e.PGHOST||"localhost",k=f.port||g.port||e.PGPORT||5432,l=f.user||f.username||g.username||e.PGUSERNAME||e.PGUSER||function(){try{return d.userInfo().username}catch(a){return process.env.USERNAME||process.env.USER||process.env.LOGNAME}}();f.no_prepare&&(f.prepare=!1),i.sslmode&&(i.ssl=i.sslmode,delete i.sslmode),"timeout"in f&&(console.log("The timeout option is deprecated, use idle_timeout instead"),f.idle_timeout=f.timeout),"system"===i.sslrootcert&&(i.ssl="verify-full");let m=["idle_timeout","connect_timeout","max_lifetime","max_pipeline","backoff","keep_alive"],n={max:10,ssl:!1,idle_timeout:null,connect_timeout:30,max_lifetime:ax,max_pipeline:100,backoff:aw,keep_alive:60,prepare:!0,debug:!1,fetch_types:!0,publications:"alltables",target_session_attrs:null};return{host:Array.isArray(j)?j:j.split(",").map(a=>a.split(":")[0]),port:Array.isArray(k)?k:j.split(",").map(a=>parseInt(a.split(":")[1]||k)),path:f.path||j.indexOf("/")>-1&&j+"/.s.PGSQL."+k,database:f.database||f.db||(g.pathname||"").slice(1)||e.PGDATABASE||l,user:l,pass:f.pass||f.password||g.password||e.PGPASSWORD||"",...Object.entries(n).reduce((a,[b,c])=>{let d=b in f?f[b]:b in i?"disable"!==i[b]&&"false"!==i[b]&&i[b]:e["PG"+b.toUpperCase()]||c;return a[b]="string"==typeof d&&m.includes(b)?+d:d,a},{}),connection:{application_name:e.PGAPPNAME||"postgres.js",...f.connection,...Object.entries(i).reduce((a,[b,c])=>(b in n||(a[b]=c),a),{})},types:f.types||{},target_session_attrs:function(a,b,c){let d=a.target_session_attrs||b.searchParams.get("target_session_attrs")||c.PGTARGETSESSIONATTRS;if(!d||["read-write","read-only","primary","standby","prefer-standby"].includes(d))return d;throw Error("target_session_attrs "+d+" is not supported")}(f,g,e),onnotice:f.onnotice,onnotify:f.onnotify,onclose:f.onclose,onparameter:f.onparameter,socket:f.socket,transform:{undefined:(c=f.transform||{undefined:void 0}).undefined,column:{from:"function"==typeof c.column?c.column:c.column&&c.column.from,to:c.column&&c.column.to},value:{from:"function"==typeof c.value?c.value:c.value&&c.value.from,to:c.value&&c.value.to},row:{from:"function"==typeof c.row?c.row:c.row&&c.row.from,to:c.row&&c.row.to}},parameters:{},shared:{retries:0,typeArrayMap:{}},...C(f.types)}}(a,b),f=c.no_subscribe||function(a,b){let c=new Map,d="postgresjs_"+Math.random().toString(36).slice(2),e={},f,g,h=!1,i=l.sql=a({...b,transform:{column:{},value:{},row:{}},max:1,fetch_types:!1,idle_timeout:null,max_lifetime:null,connection:{...b.connection,replication:"database"},onclose:async function(){h||(g=null,e.pid=e.secret=void 0,m(await n(i,d,b.publications)),c.forEach(a=>a.forEach(({onsubscribe:a})=>a())))},no_subscribe:!0}),j=i.end,k=i.close;return i.end=async()=>(h=!0,g&&await new Promise(a=>(g.once("close",a),g.end())),j()),i.close=async()=>(g&&await new Promise(a=>(g.once("close",a),g.end())),k()),l;async function l(a,h,j=ar,k=ar){a=function(a){let b=a.match(/^(\*|insert|update|delete)?:?([^.]+?\.?[^=]+)?=?(.+)?/i)||[];if(!b)throw Error("Malformed subscribe pattern: "+a);let[,c,d,e]=b;return(c||"*")+(d?":"+(-1===d.indexOf(".")?"public."+d:d):"")+(e?"="+e:"")}(a),f||(f=n(i,d,b.publications));let o={fn:h,onsubscribe:j},p=c.has(a)?c.get(a).add(o):c.set(a,new Set([o])).get(a),q=()=>{p.delete(o),0===p.size&&c.delete(a)};return f.then(a=>(m(a),j(),g&&g.on("error",k),{unsubscribe:q,state:e,sql:i}))}function m(a){g=a.stream,e.pid=a.state.pid,e.secret=a.state.secret}async function n(a,c,d){if(!d)throw Error("Missing publication names");let e=await a.unsafe(`CREATE_REPLICATION_SLOT ${c} TEMPORARY LOGICAL pgoutput NOEXPORT_SNAPSHOT`),[f]=e,g=await a.unsafe(`START_REPLICATION SLOT ${c} LOGICAL ${f.consistent_point} (proto_version '1', publication_names '${d}')`).writable(),h={lsn:Buffer.concat(f.consistent_point.split("/").map(a=>Buffer.from(("00000000"+a).slice(-8),"hex")))};return g.on("data",function(c){var d,e,f,j,k;119===c[0]?(d=c.subarray(25),e=h,f=a.options.parsers,j=i,k=b.transform,Object.entries({R:a=>{let b=1,c=e[a.readUInt32BE(b)]={schema:a.toString("utf8",b+=4,b=a.indexOf(0,b))||"pg_catalog",table:a.toString("utf8",b+1,b=a.indexOf(0,b+1)),columns:Array(a.readUInt16BE(b+=2)),keys:[]};b+=2;let d=0,g;for(;b<a.length;)(g=c.columns[d++]={key:a[b++],name:k.column.from?k.column.from(a.toString("utf8",b,b=a.indexOf(0,b))):a.toString("utf8",b,b=a.indexOf(0,b)),type:a.readUInt32BE(b+=1),parser:f[a.readUInt32BE(b)],atttypmod:a.readUInt32BE(b+=4)}).key&&c.keys.push(g),b+=4},Y:()=>{},O:()=>{},B:a=>{var b;b=a.readBigInt64BE(9),e.date=new Date(Date.UTC(2e3,0,1)+Number(b/BigInt(1e3))),e.lsn=a.subarray(1,9)},I:a=>{let b=1,c=e[a.readUInt32BE(b)],{row:d}=as(a,c.columns,b+=7,k);j(d,{command:"insert",relation:c})},D:a=>{let b=1,c=e[a.readUInt32BE(b)],d=75===a[b+=4];j(d||79===a[b]?as(a,c.columns,b+=3,k).row:null,{command:"delete",relation:c,key:d})},U:a=>{let b=1,c=e[a.readUInt32BE(b)],d=75===a[b+=4],f=d||79===a[b]?as(a,c.columns,b+=3,k):null;f&&(b=f.i);let{row:g}=as(a,c.columns,b+3,k);j(g,{command:"update",relation:c,key:d,old:f&&f.row})},T:()=>{},C:()=>{}}).reduce((a,[b,c])=>(a[b.charCodeAt(0)]=c,a),{})[d[0]](d)):107===c[0]&&c[17]&&(h.lsn=c.subarray(1,9),function(){let a=Buffer.alloc(34);a[0]=114,a.fill(h.lsn,1),a.writeBigInt64BE(BigInt(Date.now()-Date.UTC(2e3,0,1))*BigInt(1e3),25),g.write(a)}())}),g.on("error",function(a){console.error("Unexpected error during logical streaming - reconnecting",a)}),g.on("close",a.close),{stream:g,state:e.state};function i(a,b){let c=b.relation.schema+"."+b.relation.table;o("*",a,b),o("*:"+c,a,b),b.relation.keys.length&&o("*:"+c+"="+b.relation.keys.map(b=>a[b.name]),a,b),o(b.command,a,b),o(b.command+":"+c,a,b),b.relation.keys.length&&o(b.command+":"+c+"="+b.relation.keys.map(b=>a[b.name]),a,b)}}function o(a,b,d){c.has(a)&&c.get(a).forEach(({fn:c})=>c(b,d,a))}}(av,{...c}),g=!1,h=_(),m=_(),q=_(),r=_(),s=_(),t=_(),u=_(),v=_(),w={connecting:m,reserved:q,closed:r,ended:s,open:t,busy:u,full:v},x=[...Array(c.max)].map(()=>ad(c,w,{onopen:P,onend:O,onclose:Q})),y=z(function(a){return g?a.reject(l.connection("CONNECTION_ENDED",c,c)):t.length?I(t.shift(),a):r.length?N(r.shift(),a):void(u.length?I(u.shift(),a):h.push(a))});return Object.assign(y,{get parameters(){return c.parameters},largeObject:at.bind(null,y),subscribe:f,CLOSE:i,END:i,PostgresError:k,options:c,reserve:D,listen:A,begin:E,close:L,end:K}),y;function z(a){return a.debug=c.debug,Object.entries(c.types).reduce((a,[b,c])=>(a[b]=a=>new o(a,c.to),a),b),Object.assign(d,{types:b,typed:b,unsafe:function(b,c=[],d={}){return 2!=arguments.length||Array.isArray(c)||(d=c,c=[]),new j([b],c,a,J,{prepare:!1,...d,simple:"simple"in d?d.simple:0===c.length})},notify:B,array:function a(b,d){return Array.isArray(b)?new o(b,d||(b.length?G(b)||25:0),c.shared.typeArrayMap):a(Array.from(arguments))},json:H,file:function(b,c=[],d={}){return 2!=arguments.length||Array.isArray(c)||(d=c,c=[]),new j([],c,c=>{e.readFile(b,"utf8",(b,d)=>{if(b)return c.reject(b);c.strings=[d],a(c)})},J,{...d,simple:"simple"in d?d.simple:0===c.length})}}),d;function b(a,b){return new o(a,b)}function d(b,...e){return b&&Array.isArray(b.raw)?new j(b,e,a,J):"string"!=typeof b||e.length?new p(b,e):new n(c.transform.column.to?c.transform.column.to(b):b)}}async function A(a,b,d){let e={fn:b,onlisten:d},f=A.sql||(A.sql=av({...c,max:1,idle_timeout:null,max_lifetime:null,fetch_types:!1,onclose(){Object.entries(A.channels).forEach(([a,{listeners:b}])=>{delete A.channels[a],Promise.all(b.map(b=>A(a,b.fn,b.onlisten).catch(()=>{})))})},onnotify(a,b){a in A.channels&&A.channels[a].listeners.forEach(a=>a.fn(b))}})),g=A.channels||(A.channels={});if(a in g){g[a].listeners.push(e);let b=await g[a].result;return e.onlisten&&e.onlisten(),{state:b.state,unlisten:i}}g[a]={result:f`listen ${f.unsafe('"'+a.replace(/"/g,'""')+'"')}`,listeners:[e]};let h=await g[a].result;return e.onlisten&&e.onlisten(),{state:h.state,unlisten:i};async function i(){if(a in g!=!1&&(g[a].listeners=g[a].listeners.filter(a=>a!==e),!g[a].listeners.length))return delete g[a],f`unlisten ${f.unsafe('"'+a.replace(/"/g,'""')+'"')}`}}async function B(a,b){return await y`select pg_notify(${a}, ${""+b})`}async function D(){let a=_(),b=t.length?t.shift():await new Promise((a,b)=>{let c={reserve:a,reject:b};h.push(c),r.length&&N(r.shift(),c)});F(b,q),b.reserved=()=>a.length?b.execute(a.shift()):F(b,q),b.reserved.release=!0;let c=z(function(c){b.queue===v?a.push(c):b.execute(c)||F(b,v)});return c.release=()=>{b.reserved=null,P(b)},c}async function E(a,b){b||(b=a,a="");let c=_(),d=0,e,f=null;try{return await y.unsafe("begin "+a.replace(/[^a-z ]/ig,""),[],{onexecute:function(a){e=a,F(a,q),a.reserved=()=>c.length?a.execute(c.shift()):F(a,q)}}).execute(),await Promise.race([g(e,b),new Promise((a,b)=>e.onclose=b)])}catch(a){throw a}async function g(a,b,e){let h,i,j=z(function(b){b.catch(a=>h||(h=a)),a.queue===v?c.push(b):a.execute(b)||F(a,v)});j.savepoint=function b(c,e){return c&&Array.isArray(c.raw)?b(a=>a.apply(a,arguments)):(1==arguments.length&&(e=c,c=null),g(a,e,"s"+d+++(c?"_"+c:"")))},j.prepare=a=>f=a.replace(/[^a-z0-9$-_. ]/gi),e&&await j`savepoint ${j(e)}`;try{if(i=await new Promise((a,c)=>{let d=b(j);Promise.resolve(Array.isArray(d)?Promise.all(d):d).then(a,c)}),h)throw h}catch(a){throw await (e?j`rollback to ${j(e)}`:j`rollback`),a instanceof k&&"25P02"===a.code&&h||a}return e||(f?await j`prepare transaction '${j.unsafe(f)}'`:await j`commit`),i}}function F(a,b){return a.queue.remove(a),b.push(a),a.queue=b,b===t?a.idleTimer.start():a.idleTimer.cancel(),a}function H(a){return new o(a,3802)}function I(a,b){return a.execute(b)?F(a,u):F(a,v)}function J(a){return new Promise((b,d)=>{a.state?a.active?ad(c).cancel(a.state,b,d):a.cancelled={resolve:b,reject:d}:(h.remove(a),a.cancelled=!0,a.reject(l.generic("57014","canceling statement due to user request")),b())})}async function K({timeout:a=null}={}){let b;return g||(await 1,g=Promise.race([new Promise(c=>null!==a&&(b=setTimeout(M,1e3*a,c))),Promise.all(x.map(a=>a.end()).concat(A.sql?A.sql.end({timeout:0}):[],f.sql?f.sql.end({timeout:0}):[]))]).then(()=>clearTimeout(b)))}async function L(){await Promise.all(x.map(a=>a.end()))}async function M(a){for(await Promise.all(x.map(a=>a.terminate()));h.length;)h.shift().reject(l.connection("CONNECTION_DESTROYED",c));a()}function N(a,b){return F(a,m),a.connect(b),a}function O(a){F(a,s)}function P(a){if(0===h.length)return F(a,t);let b=Math.ceil(h.length/(m.length+1)),c=!0;for(;c&&h.length&&b-- >0;){let b=h.shift();if(b.reserve)return b.reserve(a);c=a.execute(b)}c?F(a,u):F(a,v)}function Q(a,b){F(a,r),a.reserved=null,a.onclose&&(a.onclose(b),a.onclose=null),c.onclose&&c.onclose(a.id),h.length&&N(a,h.shift())}}function aw(a){return(.5+Math.random()/2)*Math.min(3**a/100,20)}function ax(){return 60*(30+30*Math.random())}},49646:(a,b,c)=>{let d=c(53955),{OPError:e,RPError:f}=c(86915),g=c(23056),h=c(99064),{CLOCK_TOLERANCE:i,HTTP_OPTIONS:j}=c(60974),k=c(48228),{setDefaults:l}=c(81409);a.exports={Issuer:d,Strategy:g,TokenSet:h,errors:{OPError:e,RPError:f},custom:{setHttpOptionsDefaults:l,http_options:j,clock_tolerance:i},generators:k}},49934:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.oAuth1Client=function(a){var b,c;let e=a.provider,f=new d.OAuth(e.requestTokenUrl,e.accessTokenUrl,e.clientId,e.clientSecret,null!=(b=e.version)?b:"1.0",e.callbackUrl,null!=(c=e.encoding)?c:"HMAC-SHA1"),g=f.get.bind(f);f.get=async(...a)=>await new Promise((b,c)=>{g(...a,(a,d)=>{if(a)return c(a);b(d)})});let h=f.getOAuthAccessToken.bind(f);f.getOAuthAccessToken=async(...a)=>await new Promise((b,c)=>{h(...a,(a,d,e)=>{if(a)return c(a);b({oauth_token:d,oauth_token_secret:e})})});let i=f.getOAuthRequestToken.bind(f);return f.getOAuthRequestToken=async(a={})=>await new Promise((b,c)=>{i(a,(a,d,e,f)=>{if(a)return c(a);b({oauth_token:d,oauth_token_secret:e,params:f})})}),f},b.oAuth1TokenStore=void 0;var d=c(51774);b.oAuth1TokenStore=new Map},50023:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.deflate=b.inflate=void 0;let d=c(28354),e=c(74075),f=c(69817),g=(0,d.promisify)(e.inflateRaw),h=(0,d.promisify)(e.deflateRaw);b.inflate=a=>g(a,{maxOutputLength:25e4}).catch(()=>{throw new f.JWEDecompressionFailed}),b.deflate=a=>h(a)},51117:a=>{a.exports=function(a,b){this.v=a,this.k=b},a.exports.__esModule=!0,a.exports.default=a.exports},51153:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let c=/^(\d+|\d+\.\d+) ?(seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)$/i;b.default=a=>{let b=c.exec(a);if(!b)throw TypeError("Invalid time period format");let d=parseFloat(b[1]);switch(b[2].toLowerCase()){case"sec":case"secs":case"second":case"seconds":case"s":return Math.round(d);case"minute":case"minutes":case"min":case"mins":case"m":return Math.round(60*d);case"hour":case"hours":case"hr":case"hrs":case"h":return Math.round(3600*d);case"day":case"days":case"d":return Math.round(86400*d);case"week":case"weeks":case"w":return Math.round(604800*d);default:return Math.round(0x1e187e0*d)}}},51738:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=e;var d=c(78190);async function e(a){var b,c,e,f,g,h;let{options:i,sessionStore:j,newSession:k,isUpdate:l}=a,{adapter:m,jwt:n,events:o,callbacks:p,logger:q,session:{strategy:r,maxAge:s}}=i,t={body:{},headers:[{key:"Content-Type",value:"application/json"},...l?[]:[{key:"Cache-Control",value:"private, no-cache, no-store"},{key:"Pragma",value:"no-cache"},{key:"Expires",value:"0"}]].filter(Boolean),cookies:[]},u=j.value;if(!u)return t;if("jwt"===r)try{let a=await n.decode({...n,token:u});if(!a)throw Error("JWT invalid");let e=await p.jwt({token:a,...l&&{trigger:"update"},session:k}),f=(0,d.fromDate)(s),g=await p.session({session:{user:{name:null==a?void 0:a.name,email:null==a?void 0:a.email,image:null==a?void 0:a.picture},expires:f.toISOString()},token:e});t.body=g;let h=await n.encode({...n,token:e,maxAge:i.session.maxAge}),m=j.chunk(h,{expires:f});null==(b=t.cookies)||b.push(...m),await (null==(c=o.session)?void 0:c.call(o,{session:g,token:e}))}catch(a){q.error("JWT_SESSION_ERROR",a),null==(e=t.cookies)||e.push(...j.clean())}else try{let{getSessionAndUser:a,deleteSession:b,updateSession:c}=m,e=await a(u);if(e&&e.session.expires.valueOf()<Date.now()&&(await b(u),e=null),e){let{user:a,session:b}=e,h=i.session.updateAge,j=b.expires.valueOf()-1e3*s+1e3*h,m=(0,d.fromDate)(s);j<=Date.now()&&await c({sessionToken:u,expires:m});let n=await p.session({session:{user:{name:a.name,email:a.email,image:a.image},expires:b.expires.toISOString()},user:a,newSession:k,...l?{trigger:"update"}:{}});t.body=n,null==(f=t.cookies)||f.push({name:i.cookies.sessionToken.name,value:u,options:{...i.cookies.sessionToken.options,expires:m}}),await (null==(g=o.session)?void 0:g.call(o,{session:n}))}else u&&(null==(h=t.cookies)||h.push(...j.clean()))}catch(a){q.error("SESSION_ERROR",a)}return t}},51774:(a,b,c)=>{b.OAuth=c(83961).OAuth,b.OAuthEcho=c(83961).OAuthEcho,b.OAuth2=c(61479).OAuth2},51959:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0});let e=c(55511),f=c(28354),g=c(88311),h=c(26274),i=c(5839),j=c(22896),k=c(40295);d=e.verify.length>4&&k.oneShotCallback?(0,f.promisify)(e.verify):e.verify,b.default=async(a,b,c,f)=>{let k=(0,j.default)(a,b,"verify");if(a.startsWith("HS")){let b=await (0,i.default)(a,k,f);try{return e.timingSafeEqual(c,b)}catch{return!1}}let l=(0,g.default)(a),m=(0,h.default)(a,k);try{return await d(l,f,m,c)}catch{return!1}}},52349:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817),e=c(25066);b.default=(a,b)=>{let c;switch(a){case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":c=parseInt(a.slice(-3),10);break;case"A128GCM":case"A192GCM":case"A256GCM":c=parseInt(a.slice(1,4),10);break;default:throw new d.JOSENotSupported(`Content Encryption Algorithm ${a} is not supported either by JOSE or your javascript runtime`)}if(b instanceof Uint8Array){let a=b.byteLength<<3;if(a!==c)throw new d.JWEInvalid(`Invalid Content Encryption Key length. Expected ${c} bits, got ${a} bits`);return}if((0,e.default)(b)&&"secret"===b.type){let a=b.symmetricKeySize<<3;if(a!==c)throw new d.JWEInvalid(`Invalid Content Encryption Key length. Expected ${c} bits, got ${a} bits`);return}throw TypeError("Invalid Content Encryption Key type")}},52667:a=>{a.exports=function(){return':root{--border-width:1px;--border-radius:0.5rem;--color-error:#c94b4b;--color-info:#157efb;--color-info-hover:#0f6ddb;--color-info-text:#fff}.__next-auth-theme-auto,.__next-auth-theme-light{--color-background:#ececec;--color-background-hover:hsla(0,0%,93%,.8);--color-background-card:#fff;--color-text:#000;--color-primary:#444;--color-control-border:#bbb;--color-button-active-background:#f9f9f9;--color-button-active-border:#aaa;--color-separator:#ccc}.__next-auth-theme-dark{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}@media (prefers-color-scheme:dark){.__next-auth-theme-auto{--color-background:#161b22;--color-background-hover:rgba(22,27,34,.8);--color-background-card:#0d1117;--color-text:#fff;--color-primary:#ccc;--color-control-border:#555;--color-button-active-background:#060606;--color-button-active-border:#666;--color-separator:#444}a.button,button{background-color:var(--provider-dark-bg,var(--color-background));color:var(--provider-dark-color,var(--color-primary))}a.button:hover,button:hover{background-color:var(--provider-dark-bg-hover,var(--color-background-hover))!important}#provider-logo{display:none!important}#provider-logo-dark{display:block!important;width:25px}}html{box-sizing:border-box}*,:after,:before{box-sizing:inherit;margin:0;padding:0}body{background-color:var(--color-background);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;margin:0;padding:0}h1{font-weight:400}h1,p{color:var(--color-text);margin-bottom:1.5rem;padding:0 1rem}form{margin:0;padding:0}label{font-weight:500;margin-bottom:.25rem;text-align:left}input[type],label{color:var(--color-text);display:block}input[type]{background:var(--color-background-card);border:var(--border-width) solid var(--color-control-border);border-radius:var(--border-radius);box-sizing:border-box;font-size:1rem;padding:.5rem 1rem;width:100%}input[type]:focus{box-shadow:none}p{font-size:1.1rem;line-height:2rem}a.button{line-height:1rem;text-decoration:none}a.button:link,a.button:visited{background-color:var(--color-background);color:var(--color-primary)}button span{flex-grow:1}a.button,button{align-items:center;background-color:var(--provider-bg);border-color:rgba(0,0,0,.1);border-radius:var(--border-radius);color:var(--provider-color,var(--color-primary));display:flex;font-size:1.1rem;font-weight:500;justify-content:center;min-height:62px;padding:.75rem 1rem;position:relative;transition:all .1s ease-in-out}a.button:hover,button:hover{background-color:var(--provider-bg-hover,var(--color-background-hover));cursor:pointer}a.button:active,button:active{cursor:pointer}a.button #provider-logo,button #provider-logo{display:block;width:25px}a.button #provider-logo-dark,button #provider-logo-dark{display:none}#submitButton{background-color:var(--brand-color,var(--color-info));color:var(--button-text-color,var(--color-info-text));width:100%}#submitButton:hover{background-color:var(--button-hover-bg,var(--color-info-hover))!important}a.site{color:var(--color-primary);font-size:1rem;line-height:2rem;text-decoration:none}a.site:hover{text-decoration:underline}.page{box-sizing:border-box;display:grid;height:100%;margin:0;padding:0;place-items:center;position:absolute;width:100%}.page>div{text-align:center}.error a.button{margin-top:.5rem;padding-left:2rem;padding-right:2rem}.error .message{margin-bottom:1.5rem}.signin input[type=text]{display:block;margin-left:auto;margin-right:auto}.signin hr{border:0;border-top:1px solid var(--color-separator);display:block;margin:2rem auto 1rem;overflow:visible}.signin hr:before{background:var(--color-background-card);color:#888;content:"or";padding:0 .4rem;position:relative;top:-.7rem}.signin .error{background:#f5f5f5;background:var(--color-error);border-radius:.3rem;font-weight:500}.signin .error p{color:var(--color-info-text);font-size:.9rem;line-height:1.2rem;padding:.5rem 1rem;text-align:left}.signin form,.signin>div{display:block}.signin form input[type],.signin>div input[type]{margin-bottom:.5rem}.signin form button,.signin>div button{width:100%}.signin .provider+.provider{margin-top:1rem}.logo{display:inline-block;margin:1.25rem 0;max-height:70px;max-width:150px}.card{background-color:var(--color-background-card);border-radius:2rem;padding:1.25rem 2rem}.card .header{color:var(--color-primary)}.section-header{color:var(--color-text)}@media screen and (min-width:450px){.card{margin:2rem 0;width:368px}}@media screen and (max-width:450px){.card{margin:1rem 0;width:343px}}'}},52920:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},52963:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d={};Object.defineProperty(b,"default",{enumerable:!0,get:function(){return f.default}});var e=c(96434);Object.keys(e).forEach(function(a){!("default"===a||"__esModule"===a||Object.prototype.hasOwnProperty.call(d,a))&&(a in b&&b[a]===e[a]||Object.defineProperty(b,a,{enumerable:!0,get:function(){return e[a]}}))});var f=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=g(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&({}).hasOwnProperty.call(a,f)){var h=e?Object.getOwnPropertyDescriptor(a,f):null;h&&(h.get||h.set)?Object.defineProperty(d,f,h):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}(c(1093));function g(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(g=function(a){return a?c:b})(a)}Object.keys(f).forEach(function(a){!("default"===a||"__esModule"===a||Object.prototype.hasOwnProperty.call(d,a))&&(a in b&&b[a]===f[a]||Object.defineProperty(b,a,{enumerable:!0,get:function(){return f[a]}}))})},53110:(a,b,c)=>{"use strict";c.d(b,{s:()=>z});var d=c(92428),e=c(20197),f=c(80228),g=c(46493),h=c(87593),i=c(93352),j=c(94728),k=c(14880),l=c(66587),m=c(19831),n=c(62352),o=c(46886),p=c(29205),q=c(67969),r=c(6194),s=c(20862),t=c(48689),u=c(96176),v=c(7284),w=c(41313),x=c(19593),y=c(90921);class z{static [g.i]="PgDialect";casing;constructor(a){this.casing=new e.Yn(a?.casing)}async migrate(a,b,c){let d="string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e="string"==typeof c?"drizzle":c.migrationsSchema??"drizzle",f=(0,s.ll)`
			CREATE TABLE IF NOT EXISTS ${s.ll.identifier(e)}.${s.ll.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at bigint
			)
		`;await b.execute((0,s.ll)`CREATE SCHEMA IF NOT EXISTS ${s.ll.identifier(e)}`),await b.execute(f);let g=(await b.all((0,s.ll)`select id, hash, created_at from ${s.ll.identifier(e)}.${s.ll.identifier(d)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for await(let c of a)if(!g||Number(g.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(s.ll.raw(a));await b.execute((0,s.ll)`insert into ${s.ll.identifier(e)}.${s.ll.identifier(d)} ("hash", "created_at") values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`"${a}"`}escapeParam(a){return`$${a+1}`}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[(0,s.ll)`with `];for(let[c,d]of a.entries())b.push((0,s.ll)`${s.ll.identifier(d._.alias)} as (${d._.sql})`),c<a.length-1&&b.push((0,s.ll)`, `);return b.push((0,s.ll)` `),s.ll.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d}){let e=this.buildWithCTE(d),f=c?(0,s.ll)` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,g=b?(0,s.ll)` where ${b}`:void 0;return(0,s.ll)`${e}delete from ${a}${g}${f}`}buildUpdateSet(a,b){let c=a[v.XI.Symbol.Columns],d=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),e=d.length;return s.ll.join(d.flatMap((a,d)=>{let f=c[a],g=b[a]??s.ll.param(f.onUpdateFn(),f),h=(0,s.ll)`${s.ll.identifier(this.casing.getColumnCasing(f))} = ${g}`;return d<e-1?[h,s.ll.raw(", ")]:[h]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e,from:f,joins:g}){let h=this.buildWithCTE(e),i=a[q.mu.Symbol.Name],j=a[q.mu.Symbol.Schema],k=a[q.mu.Symbol.OriginalName],l=i===k?void 0:i,m=(0,s.ll)`${j?(0,s.ll)`${s.ll.identifier(j)}.`:void 0}${s.ll.identifier(k)}${l&&(0,s.ll)` ${s.ll.identifier(l)}`}`,n=this.buildUpdateSet(a,b),o=f&&s.ll.join([s.ll.raw(" from "),this.buildFromTable(f)]),p=this.buildJoins(g),r=d?(0,s.ll)` returning ${this.buildSelection(d,{isSingleTable:!f})}`:void 0,t=c?(0,s.ll)` where ${c}`:void 0;return(0,s.ll)`${h}update ${m} set ${n}${o}${p}${t}${r}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,d=a.flatMap(({field:a},d)=>{let e=[];if((0,g.is)(a,s.Xs.Aliased)&&a.isSelectionField)e.push(s.ll.identifier(a.fieldAlias));else if((0,g.is)(a,s.Xs.Aliased)||(0,g.is)(a,s.Xs)){let c=(0,g.is)(a,s.Xs.Aliased)?a.sql:a;b?e.push(new s.Xs(c.queryChunks.map(a=>(0,g.is)(a,i.Kl)?s.ll.identifier(this.casing.getColumnCasing(a)):a))):e.push(c),(0,g.is)(a,s.Xs.Aliased)&&e.push((0,s.ll)` as ${s.ll.identifier(a.fieldAlias)}`)}else(0,g.is)(a,f.V)&&(b?e.push(s.ll.identifier(this.casing.getColumnCasing(a))):e.push(a));return d<c-1&&e.push((0,s.ll)`, `),e});return s.ll.join(d)}buildJoins(a){if(!a||0===a.length)return;let b=[];for(let[c,d]of a.entries()){0===c&&b.push((0,s.ll)` `);let e=d.table,f=d.lateral?(0,s.ll)` lateral`:void 0;if((0,g.is)(e,q.mu)){let a=e[q.mu.Symbol.Name],c=e[q.mu.Symbol.Schema],g=e[q.mu.Symbol.OriginalName],h=a===g?void 0:d.alias;b.push((0,s.ll)`${s.ll.raw(d.joinType)} join${f} ${c?(0,s.ll)`${s.ll.identifier(c)}.`:void 0}${s.ll.identifier(g)}${h&&(0,s.ll)` ${s.ll.identifier(h)}`} on ${d.on}`)}else if((0,g.is)(e,s.Ss)){let a=e[x.n].name,c=e[x.n].schema,g=e[x.n].originalName,h=a===g?void 0:d.alias;b.push((0,s.ll)`${s.ll.raw(d.joinType)} join${f} ${c?(0,s.ll)`${s.ll.identifier(c)}.`:void 0}${s.ll.identifier(g)}${h&&(0,s.ll)` ${s.ll.identifier(h)}`} on ${d.on}`)}else b.push((0,s.ll)`${s.ll.raw(d.joinType)} join${f} ${e} on ${d.on}`);c<a.length-1&&b.push((0,s.ll)` `)}return s.ll.join(b)}buildFromTable(a){if((0,g.is)(a,v.XI)&&a[v.XI.Symbol.OriginalName]!==a[v.XI.Symbol.Name]){let b=(0,s.ll)`${s.ll.identifier(a[v.XI.Symbol.OriginalName])}`;return a[v.XI.Symbol.Schema]&&(b=(0,s.ll)`${s.ll.identifier(a[v.XI.Symbol.Schema])}.${b}`),(0,s.ll)`${b} ${s.ll.identifier(a[v.XI.Symbol.Name])}`}return a}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:d,having:e,table:h,joins:i,orderBy:j,groupBy:k,limit:l,offset:m,lockingClause:n,distinct:o,setOperators:p}){let q,r,t,z=c??(0,w.He)(b);for(let a of z){let b;if((0,g.is)(a.field,f.V)&&(0,v.Io)(a.field.table)!==((0,g.is)(h,u.n)?h._.alias:(0,g.is)(h,y.w)?h[x.n].name:(0,g.is)(h,s.Xs)?void 0:(0,v.Io)(h))&&(b=a.field.table,!i?.some(({alias:a})=>a===(b[v.XI.Symbol.IsAlias]?(0,v.Io)(b):b[v.XI.Symbol.BaseName])))){let b=(0,v.Io)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let A=!i||0===i.length,B=this.buildWithCTE(a);o&&(q=!0===o?(0,s.ll)` distinct`:(0,s.ll)` distinct on (${s.ll.join(o.on,(0,s.ll)`, `)})`);let C=this.buildSelection(z,{isSingleTable:A}),D=this.buildFromTable(h),E=this.buildJoins(i),F=d?(0,s.ll)` where ${d}`:void 0,G=e?(0,s.ll)` having ${e}`:void 0;j&&j.length>0&&(r=(0,s.ll)` order by ${s.ll.join(j,(0,s.ll)`, `)}`),k&&k.length>0&&(t=(0,s.ll)` group by ${s.ll.join(k,(0,s.ll)`, `)}`);let H="object"==typeof l||"number"==typeof l&&l>=0?(0,s.ll)` limit ${l}`:void 0,I=m?(0,s.ll)` offset ${m}`:void 0,J=s.ll.empty();if(n){let a=(0,s.ll)` for ${s.ll.raw(n.strength)}`;n.config.of&&a.append((0,s.ll)` of ${s.ll.join(Array.isArray(n.config.of)?n.config.of:[n.config.of],(0,s.ll)`, `)}`),n.config.noWait?a.append((0,s.ll)` no wait`):n.config.skipLocked&&a.append((0,s.ll)` skip locked`),J.append(a)}let K=(0,s.ll)`${B}select${q} ${C} from ${D}${E}${F}${t}${G}${r}${H}${I}${J}`;return p.length>0?this.buildSetOperations(K,p):K}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:d,limit:e,orderBy:f,offset:h}}){let j,k=(0,s.ll)`(${a.getSQL()}) `,l=(0,s.ll)`(${d.getSQL()})`;if(f&&f.length>0){let a=[];for(let b of f)if((0,g.is)(b,i.Kl))a.push(s.ll.identifier(b.name));else if((0,g.is)(b,s.Xs)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];(0,g.is)(c,i.Kl)&&(b.queryChunks[a]=s.ll.identifier(c.name))}a.push((0,s.ll)`${b}`)}else a.push((0,s.ll)`${b}`);j=(0,s.ll)` order by ${s.ll.join(a,(0,s.ll)`, `)} `}let m="object"==typeof e||"number"==typeof e&&e>=0?(0,s.ll)` limit ${e}`:void 0,n=s.ll.raw(`${b} ${c?"all ":""}`),o=h?(0,s.ll)` offset ${h}`:void 0;return(0,s.ll)`${k}${n}${l}${j}${m}${o}`}buildInsertQuery({table:a,values:b,onConflict:c,returning:d,withList:e,select:f,overridingSystemValue_:h}){let i=[],j=Object.entries(a[v.XI.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),k=j.map(([,a])=>s.ll.identifier(this.casing.getColumnCasing(a)));if(f)(0,g.is)(b,s.Xs)?i.push(b):i.push(b.getSQL());else for(let[a,c]of(i.push(s.ll.raw("values ")),b.entries())){let d=[];for(let[a,b]of j){let e=c[a];if(void 0===e||(0,g.is)(e,s.Iw)&&void 0===e.value)if(void 0!==b.defaultFn){let a=b.defaultFn(),c=(0,g.is)(a,s.Xs)?a:s.ll.param(a,b);d.push(c)}else if(b.default||void 0===b.onUpdateFn)d.push((0,s.ll)`default`);else{let a=b.onUpdateFn(),c=(0,g.is)(a,s.Xs)?a:s.ll.param(a,b);d.push(c)}else d.push(e)}i.push(d),a<b.length-1&&i.push((0,s.ll)`, `)}let l=this.buildWithCTE(e),m=s.ll.join(i),n=d?(0,s.ll)` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,o=c?(0,s.ll)` on conflict ${c}`:void 0,p=!0===h?(0,s.ll)`overriding system value `:void 0;return(0,s.ll)`${l}insert into ${a} ${k} ${p}${m}${o}${n}`}buildRefreshMaterializedViewQuery({view:a,concurrently:b,withNoData:c}){let d=b?(0,s.ll)` concurrently`:void 0,e=c?(0,s.ll)` with no data`:void 0;return(0,s.ll)`refresh materialized view${d} ${a}${e}`}prepareTyping(a){if((0,g.is)(a,j.kn)||(0,g.is)(a,k.iX))return"json";if((0,g.is)(a,l.Z5))return"decimal";if((0,g.is)(a,m.Xd))return"time";if((0,g.is)(a,n.KM)||(0,g.is)(a,n.xQ))return"timestamp";if((0,g.is)(a,o.qw)||(0,g.is)(a,o.dw))return"date";else if((0,g.is)(a,p.dL))return"uuid";else return"none"}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:b})}buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:e,tableConfig:i,queryConfig:j,tableAlias:k,nestedQueryRelation:l,joinOn:m}){let n,o=[],p,w,x=[],y,z=[];if(!0===j)o=Object.entries(i.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:(0,d.ug)(b,k),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let e=Object.fromEntries(Object.entries(i.columns).map(([a,b])=>[a,(0,d.ug)(b,k)]));if(j.where){let a="function"==typeof j.where?j.where(e,(0,r.mm)()):j.where;y=a&&(0,d.yY)(a,k)}let h=[],l=[];if(j.columns){let a=!1;for(let[b,c]of Object.entries(j.columns))void 0!==c&&b in i.columns&&(a||!0!==c||(a=!0),l.push(b));l.length>0&&(l=a?l.filter(a=>j.columns?.[a]===!0):Object.keys(i.columns).filter(a=>!l.includes(a)))}else l=Object.keys(i.columns);for(let a of l){let b=i.columns[a];h.push({tsKey:a,value:b})}let m=[];if(j.with&&(m=Object.entries(j.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:i.relations[a]}))),j.extras)for(let[a,b]of Object.entries("function"==typeof j.extras?j.extras(e,{sql:s.ll}):j.extras))h.push({tsKey:a,value:(0,d.Hs)(b,k)});for(let{tsKey:a,value:b}of h)o.push({dbKey:(0,g.is)(b,s.Xs.Aliased)?b.fieldAlias:i.columns[a].name,tsKey:a,field:(0,g.is)(b,f.V)?(0,d.ug)(b,k):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let n="function"==typeof j.orderBy?j.orderBy(e,(0,r.rl)()):j.orderBy??[];for(let{tsKey:e,queryConfig:h,relation:i}of(Array.isArray(n)||(n=[n]),x=n.map(a=>(0,g.is)(a,f.V)?(0,d.ug)(a,k):(0,d.yY)(a,k)),p=j.limit,w=j.offset,m)){let f=(0,r.W0)(b,c,i),j=c[(0,v.Lf)(i.referencedTable)],l=`${k}_${e}`,m=(0,t.Uo)(...f.fields.map((a,b)=>(0,t.eq)((0,d.ug)(f.references[b],l),(0,d.ug)(a,k)))),n=this.buildRelationalQueryWithoutPK({fullSchema:a,schema:b,tableNamesMap:c,table:a[j],tableConfig:b[j],queryConfig:(0,g.is)(i,r.pD)?!0===h?{limit:1}:{...h,limit:1}:h,tableAlias:l,joinOn:m,nestedQueryRelation:i}),p=(0,s.ll)`${s.ll.identifier(l)}.${s.ll.identifier("data")}`.as(e);z.push({on:(0,s.ll)`true`,table:new u.n(n.sql,{},l),alias:l,joinType:"left",lateral:!0}),o.push({dbKey:e,tsKey:e,field:p,relationTableTsKey:j,isJson:!0,selection:n.selection})}}if(0===o.length)throw new h.n({message:`No fields selected for table "${i.tsName}" ("${k}")`});if(y=(0,t.Uo)(m,y),l){let a=(0,s.ll)`json_build_array(${s.ll.join(o.map(({field:a,tsKey:b,isJson:c})=>c?(0,s.ll)`${s.ll.identifier(`${k}_${b}`)}.${s.ll.identifier("data")}`:(0,g.is)(a,s.Xs.Aliased)?a.sql:a),(0,s.ll)`, `)})`;(0,g.is)(l,r.iv)&&(a=(0,s.ll)`coalesce(json_agg(${a}${x.length>0?(0,s.ll)` order by ${s.ll.join(x,(0,s.ll)`, `)}`:void 0}), '[]'::json)`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:i.tsName,selection:o}];void 0!==p||void 0!==w||x.length>0?(n=this.buildSelectQuery({table:(0,d.oG)(e,k),fields:{},fieldsFlat:[{path:[],field:s.ll.raw("*")}],where:y,limit:p,offset:w,orderBy:x,setOperators:[]}),y=void 0,p=void 0,w=void 0,x=[]):n=(0,d.oG)(e,k),n=this.buildSelectQuery({table:(0,g.is)(n,q.mu)?n:new u.n(n,{},k),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:(0,g.is)(a,f.V)?(0,d.ug)(a,k):a})),joins:z,where:y,limit:p,offset:w,orderBy:x,setOperators:[]})}else n=this.buildSelectQuery({table:(0,d.oG)(e,k),fields:{},fieldsFlat:o.map(({field:a})=>({path:[],field:(0,g.is)(a,f.V)?(0,d.ug)(a,k):a})),joins:z,where:y,limit:p,offset:w,orderBy:x,setOperators:[]});return{tableTsKey:i.tsName,sql:n,selection:o}}}},53268:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817);b.default=function(a,b,c,e,f){let g;if(void 0!==f.crit&&void 0===e.crit)throw new a('"crit" (Critical) Header Parameter MUST be integrity protected');if(!e||void 0===e.crit)return new Set;if(!Array.isArray(e.crit)||0===e.crit.length||e.crit.some(a=>"string"!=typeof a||0===a.length))throw new a('"crit" (Critical) Header Parameter MUST be an array of non-empty strings when present');for(let h of(g=void 0!==c?new Map([...Object.entries(c),...b.entries()]):b,e.crit)){if(!g.has(h))throw new d.JOSENotSupported(`Extension Header Parameter "${h}" is not recognized`);if(void 0===f[h])throw new a(`Extension Header Parameter "${h}" is missing`);if(g.get(h)&&void 0===e[h])throw new a(`Extension Header Parameter "${h}" MUST be integrity protected`)}return new Set(e.crit)}},53759:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.default=i;var e=d(c(47724)),f=d(c(91729)),g=c(78190),h=d(c(88123));async function i(a){var b,c,d,i,j,k;let{options:l,query:m,body:n,method:o,headers:p,sessionStore:q}=a,{provider:r,adapter:s,url:t,callbackUrl:u,pages:v,jwt:w,events:x,callbacks:y,session:{strategy:z,maxAge:A},logger:B}=l,C=[],D="jwt"===z;if("oauth"===r.type)try{let{profile:d,account:g,OAuthProfile:h,cookies:i}=await (0,e.default)({query:m,body:n,method:o,options:l,cookies:a.cookies});i.length&&C.push(...i);try{if(B.debug("OAUTH_CALLBACK_RESPONSE",{profile:d,account:g,OAuthProfile:h}),!d||!g||!h)return{redirect:`${t}/signin`,cookies:C};let a=d;if(s){let{getUserByAccount:b}=s,c=await b({providerAccountId:g.providerAccountId,provider:r.id});c&&(a=c)}try{let b=await y.signIn({user:a,account:g,profile:h});if(!b)return{redirect:`${t}/error?error=AccessDenied`,cookies:C};if("string"==typeof b)return{redirect:b,cookies:C}}catch(a){return{redirect:`${t}/error?error=${encodeURIComponent(a.message)}`,cookies:C}}let{user:e,session:i,isNewUser:j}=await (0,f.default)({sessionToken:q.value,profile:d,account:g,options:l});if(D){let a={name:e.name,email:e.email,picture:e.image,sub:null==(c=e.id)?void 0:c.toString()},b=await y.jwt({token:a,user:e,account:g,profile:h,isNewUser:j,trigger:j?"signUp":"signIn"}),d=await w.encode({...w,token:b}),f=new Date;f.setTime(f.getTime()+1e3*A);let i=q.chunk(d,{expires:f});C.push(...i)}else C.push({name:l.cookies.sessionToken.name,value:i.sessionToken,options:{...l.cookies.sessionToken.options,expires:i.expires}});if(await (null==(b=x.signIn)?void 0:b.call(x,{user:e,account:g,profile:d,isNewUser:j})),j&&v.newUser)return{redirect:`${v.newUser}${v.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(u)}`,cookies:C};return{redirect:u,cookies:C}}catch(a){if("AccountNotLinkedError"===a.name)return{redirect:`${t}/error?error=OAuthAccountNotLinked`,cookies:C};if("CreateUserError"===a.name)return{redirect:`${t}/error?error=OAuthCreateAccount`,cookies:C};return B.error("OAUTH_CALLBACK_HANDLER_ERROR",a),{redirect:`${t}/error?error=Callback`,cookies:C}}}catch(a){if("OAuthCallbackError"===a.name)return B.error("OAUTH_CALLBACK_ERROR",{error:a,providerId:r.id}),{redirect:`${t}/error?error=OAuthCallback`,cookies:C};return B.error("OAUTH_CALLBACK_ERROR",a),{redirect:`${t}/error?error=Callback`,cookies:C}}if("email"===r.type)try{let a=null==m?void 0:m.token,b=null==m?void 0:m.email;if(!a)return{redirect:`${t}/error?error=configuration`,cookies:C};let c=await s.useVerificationToken({identifier:b,token:(0,g.hashToken)(a,l)});if(!c||c.expires.valueOf()<Date.now()||b&&c.identifier!==b)return{redirect:`${t}/error?error=Verification`,cookies:C};let e=await (0,h.default)({email:c.identifier,adapter:s}),j={providerAccountId:e.email,type:"email",provider:r.id};try{let a=await y.signIn({user:e,account:j});if(!a)return{redirect:`${t}/error?error=AccessDenied`,cookies:C};if("string"==typeof a)return{redirect:a,cookies:C}}catch(a){return{redirect:`${t}/error?error=${encodeURIComponent(a.message)}`,cookies:C}}let{user:k,session:n,isNewUser:o}=await (0,f.default)({sessionToken:q.value,profile:e,account:j,options:l});if(D){let a={name:k.name,email:k.email,picture:k.image,sub:null==(i=k.id)?void 0:i.toString()},b=await y.jwt({token:a,user:k,account:j,isNewUser:o,trigger:o?"signUp":"signIn"}),c=await w.encode({...w,token:b}),d=new Date;d.setTime(d.getTime()+1e3*A);let e=q.chunk(c,{expires:d});C.push(...e)}else C.push({name:l.cookies.sessionToken.name,value:n.sessionToken,options:{...l.cookies.sessionToken.options,expires:n.expires}});if(await (null==(d=x.signIn)?void 0:d.call(x,{user:k,account:j,isNewUser:o})),o&&v.newUser)return{redirect:`${v.newUser}${v.newUser.includes("?")?"&":"?"}callbackUrl=${encodeURIComponent(u)}`,cookies:C};return{redirect:u,cookies:C}}catch(a){if("CreateUserError"===a.name)return{redirect:`${t}/error?error=EmailCreateAccount`,cookies:C};return B.error("CALLBACK_EMAIL_ERROR",a),{redirect:`${t}/error?error=Callback`,cookies:C}}if("credentials"===r.type&&"POST"===o){let a;try{if(!(a=await r.authorize(n,{query:m,body:n,headers:p,method:o})))return{status:401,redirect:`${t}/error?${new URLSearchParams({error:"CredentialsSignin",provider:r.id})}`,cookies:C}}catch(a){return{status:401,redirect:`${t}/error?error=${encodeURIComponent(a.message)}`,cookies:C}}let b={providerAccountId:a.id,type:"credentials",provider:r.id};try{let c=await y.signIn({user:a,account:b,credentials:n});if(!c)return{status:403,redirect:`${t}/error?error=AccessDenied`,cookies:C};if("string"==typeof c)return{redirect:c,cookies:C}}catch(a){return{redirect:`${t}/error?error=${encodeURIComponent(a.message)}`,cookies:C}}let c={name:a.name,email:a.email,picture:a.image,sub:null==(j=a.id)?void 0:j.toString()},d=await y.jwt({token:c,user:a,account:b,isNewUser:!1,trigger:"signIn"}),e=await w.encode({...w,token:d}),f=new Date;f.setTime(f.getTime()+1e3*A);let g=q.chunk(e,{expires:f});return C.push(...g),await (null==(k=x.signIn)?void 0:k.call(x,{user:a,account:b})),{redirect:u,cookies:C}}return{status:500,body:`Error: Callback for provider type ${r.type} not supported`,cookies:C}}},53811:(a,b)=>{"use strict";b.A=function(a){return{id:"github",name:"GitHub",type:"oauth",authorization:{url:"https://github.com/login/oauth/authorize",params:{scope:"read:user user:email"}},token:"https://github.com/login/oauth/access_token",userinfo:{url:"https://api.github.com/user",async request({client:a,tokens:b}){let c=await a.userinfo(b.access_token);if(!c.email){let a=await fetch("https://api.github.com/user/emails",{headers:{Authorization:`token ${b.access_token}`}});if(a.ok){var d;let b=await a.json();c.email=(null!=(d=b.find(a=>a.primary))?d:b[0]).email}}return c}},profile(a){var b;return{id:a.id.toString(),name:null!=(b=a.name)?b:a.login,email:a.email,image:a.avatar_url}},style:{logo:"/github.svg",bg:"#24292f",text:"#fff"},options:a}}},53955:(a,b,c)=>{let{inspect:d}=c(28354),e=c(79551),{RPError:f}=c(86915),g=c(38783),h=c(43793),i=c(32347),j=c(20331),k=c(81409),l=c(33734),{keystore:m}=c(81365),n=["https://login.microsoftonline.com/common/.well-known/openid-configuration","https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/organizations/v2.0/.well-known/openid-configuration","https://login.microsoftonline.com/consumers/v2.0/.well-known/openid-configuration"],o=Symbol(),p={claim_types_supported:["normal"],claims_parameter_supported:!1,grant_types_supported:["authorization_code","implicit"],request_parameter_supported:!1,request_uri_parameter_supported:!0,require_request_uri_registration:!1,response_modes_supported:["query","fragment"],token_endpoint_auth_methods_supported:["client_secret_basic"]};class q{#b;constructor(a={}){let b=a[o];delete a[o],["introspection","revocation"].forEach(b=>{a[`${b}_endpoint`]&&void 0===a[`${b}_endpoint_auth_methods_supported`]&&void 0===a[`${b}_endpoint_auth_signing_alg_values_supported`]&&(a.token_endpoint_auth_methods_supported&&(a[`${b}_endpoint_auth_methods_supported`]=a.token_endpoint_auth_methods_supported),a.token_endpoint_auth_signing_alg_values_supported&&(a[`${b}_endpoint_auth_signing_alg_values_supported`]=a.token_endpoint_auth_signing_alg_values_supported))}),this.#b=new Map,Object.entries(a).forEach(([a,b])=>{this.#b.set(a,b),this[a]||Object.defineProperty(this,a,{get(){return this.#b.get(a)},enumerable:!0})}),h.set(this.issuer,this);let c=g(this,b);Object.defineProperties(this,{Client:{value:c,enumerable:!0},FAPI1Client:{value:class extends c{},enumerable:!0},FAPI2Client:{value:class extends c{},enumerable:!0}})}get metadata(){return l(Object.fromEntries(this.#b.entries()))}static async webfinger(a){let b=j(a),{host:c}=e.parse(b),d=`https://${c}/.well-known/webfinger`,g=i(await k.call(this,{method:"GET",url:d,responseType:"json",searchParams:{resource:b,rel:"http://openid.net/specs/connect/1.0/issuer"},headers:{Accept:"application/json"}})),l=Array.isArray(g.links)&&g.links.find(a=>"object"==typeof a&&"http://openid.net/specs/connect/1.0/issuer"===a.rel&&a.href);if(!l)throw new f({message:"no issuer found in webfinger response",body:g});if("string"!=typeof l.href||!l.href.startsWith("https://"))throw new f({printf:["invalid issuer location %s",l.href],body:g});let m=l.href;if(h.has(m))return h.get(m);let n=await this.discover(m);if(n.issuer!==m)throw h.del(n.issuer),new f("discovered issuer mismatch, expected %s, got: %s",m,n.issuer);return n}static async discover(a){let b=function(a){let b=e.parse(a);if(b.pathname.includes("/.well-known/"))return a;{let a;return a=b.pathname.endsWith("/")?`${b.pathname}.well-known/openid-configuration`:`${b.pathname}/.well-known/openid-configuration`,e.format({...b,pathname:a})}}(a),c=i(await k.call(this,{method:"GET",responseType:"json",url:b,headers:{Accept:"application/json"}}));return new q({...p,...c,[o]:!!n.find(a=>b.startsWith(a))})}async reloadJwksUri(){await m.call(this,!0)}[d.custom](){return`${this.constructor.name} ${d(this.metadata,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}}a.exports=q},54449:(a,b,c)=>{var d=c(35653).default,e=c(87818);a.exports=function(a,b){if(b&&("object"==d(b)||"function"==typeof b))return b;if(void 0!==b)throw TypeError("Derived constructors may only return object or undefined");return e(a)},a.exports.__esModule=!0,a.exports.default=a.exports},55307:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.flattenedDecrypt=void 0;let d=c(67040),e=c(36165),f=c(50023),g=c(69817),h=c(1842),i=c(16217),j=c(7706),k=c(74855),l=c(2678),m=c(53268),n=c(35642);b.flattenedDecrypt=async function(a,b,c){var o;let p,q,r,s,t,u,v;if(!(0,i.default)(a))throw new g.JWEInvalid("Flattened JWE must be an object");if(void 0===a.protected&&void 0===a.header&&void 0===a.unprotected)throw new g.JWEInvalid("JOSE Header missing");if("string"!=typeof a.iv)throw new g.JWEInvalid("JWE Initialization Vector missing or incorrect type");if("string"!=typeof a.ciphertext)throw new g.JWEInvalid("JWE Ciphertext missing or incorrect type");if("string"!=typeof a.tag)throw new g.JWEInvalid("JWE Authentication Tag missing or incorrect type");if(void 0!==a.protected&&"string"!=typeof a.protected)throw new g.JWEInvalid("JWE Protected Header incorrect type");if(void 0!==a.encrypted_key&&"string"!=typeof a.encrypted_key)throw new g.JWEInvalid("JWE Encrypted Key incorrect type");if(void 0!==a.aad&&"string"!=typeof a.aad)throw new g.JWEInvalid("JWE AAD incorrect type");if(void 0!==a.header&&!(0,i.default)(a.header))throw new g.JWEInvalid("JWE Shared Unprotected Header incorrect type");if(void 0!==a.unprotected&&!(0,i.default)(a.unprotected))throw new g.JWEInvalid("JWE Per-Recipient Unprotected Header incorrect type");if(a.protected)try{let b=(0,d.decode)(a.protected);p=JSON.parse(k.decoder.decode(b))}catch{throw new g.JWEInvalid("JWE Protected Header is invalid")}if(!(0,h.default)(p,a.header,a.unprotected))throw new g.JWEInvalid("JWE Protected, JWE Unprotected Header, and JWE Per-Recipient Unprotected Header Parameter names must be disjoint");let w={...p,...a.header,...a.unprotected};if((0,m.default)(g.JWEInvalid,new Map,null==c?void 0:c.crit,p,w),void 0!==w.zip){if(!p||!p.zip)throw new g.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==w.zip)throw new g.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:x,enc:y}=w;if("string"!=typeof x||!x)throw new g.JWEInvalid("missing JWE Algorithm (alg) in JWE Header");if("string"!=typeof y||!y)throw new g.JWEInvalid("missing JWE Encryption Algorithm (enc) in JWE Header");let z=c&&(0,n.default)("keyManagementAlgorithms",c.keyManagementAlgorithms),A=c&&(0,n.default)("contentEncryptionAlgorithms",c.contentEncryptionAlgorithms);if(z&&!z.has(x))throw new g.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(A&&!A.has(y))throw new g.JOSEAlgNotAllowed('"enc" (Encryption Algorithm) Header Parameter not allowed');if(void 0!==a.encrypted_key)try{q=(0,d.decode)(a.encrypted_key)}catch{throw new g.JWEInvalid("Failed to base64url decode the encrypted_key")}let B=!1;"function"==typeof b&&(b=await b(p,a),B=!0);try{r=await (0,j.default)(x,b,q,w,c)}catch(a){if(a instanceof TypeError||a instanceof g.JWEInvalid||a instanceof g.JOSENotSupported)throw a;r=(0,l.default)(y)}try{s=(0,d.decode)(a.iv)}catch{throw new g.JWEInvalid("Failed to base64url decode the iv")}try{t=(0,d.decode)(a.tag)}catch{throw new g.JWEInvalid("Failed to base64url decode the tag")}let C=k.encoder.encode(null!=(o=a.protected)?o:"");u=void 0!==a.aad?(0,k.concat)(C,k.encoder.encode("."),k.encoder.encode(a.aad)):C;try{v=(0,d.decode)(a.ciphertext)}catch{throw new g.JWEInvalid("Failed to base64url decode the ciphertext")}let D=await (0,e.default)(y,r,v,s,t,u);"DEF"===w.zip&&(D=await ((null==c?void 0:c.inflateRaw)||f.inflate)(D));let E={plaintext:D};if(void 0!==a.protected&&(E.protectedHeader=p),void 0!==a.aad)try{E.additionalAuthenticatedData=(0,d.decode)(a.aad)}catch{throw new g.JWEInvalid("Failed to base64url decode the aad")}return(void 0!==a.unprotected&&(E.sharedUnprotectedHeader=a.unprotected),void 0!==a.header&&(E.unprotectedHeader=a.header),B)?{...E,key:b}:E}},55618:(a,b,c)=>{var d=c(28665);a.exports=function(a,b,c){return(b=d(b))in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a},a.exports.__esModule=!0,a.exports.default=a.exports},57049:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.assertConfig=function(a){var b,c,d,j,k,l,m;let n,o,p,{options:q,req:r}=a,s=[];if(!h&&(r.origin||s.push("NEXTAUTH_URL"),q.secret,q.debug&&s.push("DEBUG_ENABLED")),!q.secret)return new e.MissingSecret("Please define a `secret` in production.");if(!(null!=(b=r.query)&&b.nextauth)&&!r.action)return new e.MissingAPIRoute("Cannot find [...nextauth].{js,ts} in `/pages/api/auth`. Make sure the filename is written correctly.");let t=null==(c=r.query)?void 0:c.callbackUrl,u=(0,f.default)(r.origin);if(t&&!i(t,u.base))return new e.InvalidCallbackUrl(`Invalid callback URL. Received: ${t}`);let{callbackUrl:v}=(0,g.defaultCookies)(null!=(d=q.useSecureCookies)?d:u.base.startsWith("https://")),w=null==(j=r.cookies)?void 0:j[null!=(k=null==(l=q.cookies)||null==(l=l.callbackUrl)?void 0:l.name)?k:v.name];if(w&&!i(w,u.base))return new e.InvalidCallbackUrl(`Invalid callback URL. Received: ${w}`);for(let a of q.providers)"credentials"===a.type?n=!0:"email"===a.type?o=!0:"twitter"===a.id&&"2.0"===a.version&&(p=!0);if(n){let a=(null==(m=q.session)?void 0:m.strategy)==="database",b=!q.providers.some(a=>"credentials"!==a.type);if(a&&b)return new e.UnsupportedStrategy("Signin in with credentials only supported if JWT strategy is enabled");if(q.providers.some(a=>"credentials"===a.type&&!a.authorize))return new e.MissingAuthorize("Must define an authorize() handler to use credentials authentication provider")}if(o){let{adapter:a}=q;if(!a)return new e.MissingAdapter("E-mail login requires an adapter.");let b=["createVerificationToken","useVerificationToken","getUserByEmail"].filter(b=>!a[b]);if(b.length)return new e.MissingAdapterMethods(`Required adapter methods were missing: ${b.join(", ")}`)}return h||(p&&s.push("TWITTER_OAUTH_2_BETA"),h=!0),s};var e=c(65192),f=d(c(98278)),g=c(91661);let h=!1;function i(a,b){try{return/^https?:/.test(new URL(a,a.startsWith("/")?b:void 0).protocol)}catch(a){return!1}}},57117:a=>{function b(){try{var c=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(a.exports=b=function(){return!!c},a.exports.__esModule=!0,a.exports.default=a.exports)()}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},57583:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.defaultCallbacks=void 0,b.defaultCallbacks={signIn:()=>!0,redirect:({url:a,baseUrl:b})=>a.startsWith("/")?`${b}${a}`:new URL(a).origin===b?a:b,session:({session:a})=>a,jwt:({token:a})=>a}},57789:(a,b,c)=>{"use strict";c.d(b,{yf:()=>i});var d=c(46493),e=c(41313),f=c(93352);class g extends f.pe{static [d.i]="PgVarcharBuilder";constructor(a,b){super(a,"string","PgVarchar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new h(a,this.config)}}class h extends f.Kl{static [d.i]="PgVarchar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function i(a,b={}){let{name:c,config:d}=(0,e.Ll)(a,b);return new g(c,d)}},59940:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){var b;let{csrfToken:c,providers:d,callbackUrl:h,theme:i,email:j,error:k}=a,l=d.filter(a=>"oauth"===a.type||"email"===a.type||"credentials"===a.type&&!!a.credentials);"undefined"!=typeof document&&i.buttonText&&document.documentElement.style.setProperty("--button-text-color",i.buttonText),"undefined"!=typeof document&&i.brandColor&&document.documentElement.style.setProperty("--brand-color",i.brandColor);let m={Signin:"Try signing in with a different account.",OAuthSignin:"Try signing in with a different account.",OAuthCallback:"Try signing in with a different account.",OAuthCreateAccount:"Try signing in with a different account.",EmailCreateAccount:"Try signing in with a different account.",Callback:"Try signing in with a different account.",OAuthAccountNotLinked:"To confirm your identity, sign in with the same account you used originally.",EmailSignin:"The e-mail could not be sent.",CredentialsSignin:"Sign in failed. Check the details you provided are correct.",SessionRequired:"Please sign in to access this page.",default:"Unable to sign in."},n=k&&(null!=(b=m[k])?b:m.default),o="https://authjs.dev/img/providers";return(0,e.h)("div",{className:"signin"},i.brandColor&&(0,e.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${i.brandColor}
        }
      `}}),i.buttonText&&(0,e.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${i.buttonText}
        }
      `}}),(0,e.h)("div",{className:"card"},i.logo&&(0,e.h)("img",{src:i.logo,alt:"Logo",className:"logo"}),n&&(0,e.h)("div",{className:"error"},(0,e.h)("p",null,n)),l.map((a,b)=>{let d,i,k,m,n,p;if("oauth"===a.type){var q;({bg:d="",text:i="",logo:k="",bgDark:n=d,textDark:p=i,logoDark:m=""}=null!=(q=a.style)?q:{}),k=k.startsWith("/")?`${o}${k}`:k,(m=m.startsWith("/")?`${o}${m}`:m||k)||(m=k)}return(0,e.h)("div",{key:a.id,className:"provider"},"oauth"===a.type&&(0,e.h)("form",{action:a.signinUrl,method:"POST"},(0,e.h)("input",{type:"hidden",name:"csrfToken",value:c}),h&&(0,e.h)("input",{type:"hidden",name:"callbackUrl",value:h}),(0,e.h)("button",{type:"submit",className:"button",style:{"--provider-bg":d,"--provider-dark-bg":n,"--provider-color":i,"--provider-dark-color":p,"--provider-bg-hover":g(d,.8),"--provider-dark-bg-hover":g(n,.8)}},k&&(0,e.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo",src:`${k.startsWith("/")?o:""}${k}`}),m&&(0,e.h)("img",{loading:"lazy",height:24,width:24,id:"provider-logo-dark",src:`${k.startsWith("/")?o:""}${m}`}),(0,e.h)("span",null,"Sign in with ",a.name))),("email"===a.type||"credentials"===a.type)&&b>0&&"email"!==l[b-1].type&&"credentials"!==l[b-1].type&&(0,e.h)("hr",null),"email"===a.type&&(0,e.h)("form",{action:a.signinUrl,method:"POST"},(0,e.h)("input",{type:"hidden",name:"csrfToken",value:c}),(0,e.h)("label",{className:"section-header",htmlFor:`input-email-for-${a.id}-provider`},"Email"),(0,e.h)("input",{id:`input-email-for-${a.id}-provider`,autoFocus:!0,type:"email",name:"email",value:j,placeholder:"email@example.com",required:!0}),(0,e.h)("button",{id:"submitButton",type:"submit"},"Sign in with ",a.name)),"credentials"===a.type&&(0,e.h)("form",{action:a.callbackUrl,method:"POST"},(0,e.h)("input",{type:"hidden",name:"csrfToken",value:c}),Object.keys(a.credentials).map(b=>{var c,d,g;return(0,e.h)("div",{key:`input-group-${a.id}`},(0,e.h)("label",{className:"section-header",htmlFor:`input-${b}-for-${a.id}-provider`},null!=(c=a.credentials[b].label)?c:b),(0,e.h)("input",(0,f.default)({name:b,id:`input-${b}-for-${a.id}-provider`,type:null!=(d=a.credentials[b].type)?d:"text",placeholder:null!=(g=a.credentials[b].placeholder)?g:""},a.credentials[b])))}),(0,e.h)("button",{type:"submit"},"Sign in with ",a.name)),("email"===a.type||"credentials"===a.type)&&b+1<l.length&&(0,e.h)("hr",null))})))};var e=c(21274),f=d(c(31999));function g(a,b=1){if(!a)return;3===(a=a.replace(/^#/,"")).length&&(a=a[0]+a[0]+a[1]+a[1]+a[2]+a[2]);let c=parseInt(a,16);return b=Math.min(Math.max(b,0),1),`rgba(${c>>16&255}, ${c>>8&255}, ${255&c}, ${b})`}},60974:a=>{let b=Symbol();a.exports={CLOCK_TOLERANCE:Symbol(),HTTP_OPTIONS:b}},61479:(a,b,c)=>{var d=c(11723),e=(c(55511),c(55591)),f=c(81630),g=c(79551),h=c(15394);b.OAuth2=function(a,b,c,d,e,f){this._clientId=a,this._clientSecret=b,this._baseSite=c,this._authorizeUrl=d||"/oauth/authorize",this._accessTokenUrl=e||"/oauth/access_token",this._accessTokenName="access_token",this._authMethod="Bearer",this._customHeaders=f||{},this._useAuthorizationHeaderForGET=!1,this._agent=void 0},b.OAuth2.prototype.setAgent=function(a){this._agent=a},b.OAuth2.prototype.setAccessTokenName=function(a){this._accessTokenName=a},b.OAuth2.prototype.setAuthMethod=function(a){this._authMethod=a},b.OAuth2.prototype.useAuthorizationHeaderforGET=function(a){this._useAuthorizationHeaderForGET=a},b.OAuth2.prototype._getAccessTokenUrl=function(){return this._baseSite+this._accessTokenUrl},b.OAuth2.prototype.buildAuthHeader=function(a){return this._authMethod+" "+a},b.OAuth2.prototype._chooseHttpLibrary=function(a){var b=e;return"https:"!=a.protocol&&(b=f),b},b.OAuth2.prototype._request=function(a,b,c,e,f,h){var i=g.parse(b,!0);"https:"!=i.protocol||i.port||(i.port=443);var j=this._chooseHttpLibrary(i),k={};for(var l in this._customHeaders)k[l]=this._customHeaders[l];if(c)for(var l in c)k[l]=c[l];k.Host=i.host,k["User-Agent"]||(k["User-Agent"]="Node-oauth"),e?Buffer.isBuffer(e)?k["Content-Length"]=e.length:k["Content-Length"]=Buffer.byteLength(e):k["Content-length"]=0,!f||"Authorization"in k||(i.query||(i.query={}),i.query[this._accessTokenName]=f);var m=d.stringify(i.query);m&&(m="?"+m);var n={host:i.hostname,port:i.port,path:i.pathname+m,method:a,headers:k};this._executeRequest(j,n,e,h)},b.OAuth2.prototype._executeRequest=function(a,b,c,d){var e=h.isAnEarlyCloseHost(b.host),f=!1;function g(a,b){f||(f=!0,a.statusCode>=200&&a.statusCode<=299||301==a.statusCode||302==a.statusCode?d(null,b,a):d({statusCode:a.statusCode,data:b}))}var i="";this._agent&&(b.agent=this._agent);var j=a.request(b);j.on("response",function(a){a.on("data",function(a){i+=a}),a.on("close",function(b){e&&g(a,i)}),a.addListener("end",function(){g(a,i)})}),j.on("error",function(a){f=!0,d(a)}),("POST"==b.method||"PUT"==b.method)&&c&&j.write(c),j.end()},b.OAuth2.prototype.getAuthorizeUrl=function(a){var a=a||{};return a.client_id=this._clientId,this._baseSite+this._authorizeUrl+"?"+d.stringify(a)},b.OAuth2.prototype.getOAuthAccessToken=function(a,b,c){var b=b||{};b.client_id=this._clientId,b.client_secret=this._clientSecret;var e="refresh_token"===b.grant_type?"refresh_token":"code";b[e]=a;var f=d.stringify(b);this._request("POST",this._getAccessTokenUrl(),{"Content-Type":"application/x-www-form-urlencoded"},f,null,function(a,b,e){if(a)c(a);else{try{f=JSON.parse(b)}catch(a){f=d.parse(b)}var f,g=f.access_token,h=f.refresh_token;delete f.refresh_token,c(null,g,h,f)}})},b.OAuth2.prototype.getProtectedResource=function(a,b,c){this._request("GET",a,{},"",b,c)},b.OAuth2.prototype.get=function(a,b,c){if(this._useAuthorizationHeaderForGET){var d={Authorization:this.buildAuthHeader(b)};b=null}else d={};this._request("GET",a,d,"",b,c)}},61721:a=>{let b=/(\w+)=("[^"]*")/g;a.exports=a=>{let c={};try{for(;null!==b.exec(a);)RegExp.$1&&RegExp.$2&&(c[RegExp.$1]=RegExp.$2.slice(1,-1))}catch(a){}return c}},62352:(a,b,c)=>{"use strict";c.d(b,{KM:()=>i,vE:()=>l,xQ:()=>k});var d=c(46493),e=c(41313),f=c(93352),g=c(91983);class h extends g.u{static [d.i]="PgTimestampBuilder";constructor(a,b,c){super(a,"date","PgTimestamp"),this.config.withTimezone=b,this.config.precision=c}build(a){return new i(a,this.config)}}class i extends f.Kl{static [d.i]="PgTimestamp";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":` (${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}mapFromDriverValue=a=>new Date(this.withTimezone?a:a+"+0000");mapToDriverValue=a=>a.toISOString()}class j extends g.u{static [d.i]="PgTimestampStringBuilder";constructor(a,b,c){super(a,"string","PgTimestampString"),this.config.withTimezone=b,this.config.precision=c}build(a){return new k(a,this.config)}}class k extends f.Kl{static [d.i]="PgTimestampString";withTimezone;precision;constructor(a,b){super(a,b),this.withTimezone=b.withTimezone,this.precision=b.precision}getSQLType(){let a=void 0===this.precision?"":`(${this.precision})`;return`timestamp${a}${this.withTimezone?" with time zone":""}`}}function l(a,b={}){let{name:c,config:d}=(0,e.Ll)(a,b);return d?.mode==="string"?new j(c,d.withTimezone??!1,d.precision):new h(c,d?.withTimezone??!1,d?.precision)}},62564:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.jwtDecrypt=void 0;let d=c(8697),e=c(19267),f=c(69817);b.jwtDecrypt=async function(a,b,c){let g=await (0,d.compactDecrypt)(a,b,c),h=(0,e.default)(g.protectedHeader,g.plaintext,c),{protectedHeader:i}=g;if(void 0!==i.iss&&i.iss!==h.iss)throw new f.JWTClaimValidationFailed('replicated "iss" claim header parameter mismatch',"iss","mismatch");if(void 0!==i.sub&&i.sub!==h.sub)throw new f.JWTClaimValidationFailed('replicated "sub" claim header parameter mismatch',"sub","mismatch");if(void 0!==i.aud&&JSON.stringify(i.aud)!==JSON.stringify(h.aud))throw new f.JWTClaimValidationFailed('replicated "aud" claim header parameter mismatch',"aud","mismatch");let j={payload:h,protectedHeader:i};return"function"==typeof b?{...j,key:g.key}:j}},63667:a=>{"use strict";a.exports=JSON.parse('{"name":"openid-client","version":"5.7.1","description":"OpenID Connect Relying Party (RP, Client) implementation for Node.js runtime, supports passportjs","keywords":["auth","authentication","basic","certified","client","connect","dynamic","electron","hybrid","identity","implicit","oauth","oauth2","oidc","openid","passport","relying party","strategy"],"homepage":"https://github.com/panva/openid-client","repository":"panva/openid-client","funding":{"url":"https://github.com/sponsors/panva"},"license":"MIT","author":"Filip Skokan <panva.ip@gmail.com>","exports":{"types":"./types/index.d.ts","import":"./lib/index.mjs","require":"./lib/index.js"},"main":"./lib/index.js","types":"./types/index.d.ts","files":["lib","types/index.d.ts"],"scripts":{"format":"npx prettier --loglevel silent --write ./lib ./test ./certification ./types","test":"mocha test/**/*.test.js"},"dependencies":{"jose":"^4.15.9","lru-cache":"^6.0.0","object-hash":"^2.2.0","oidc-token-hash":"^5.0.3"},"devDependencies":{"@types/node":"^16.18.106","@types/passport":"^1.0.16","base64url":"^3.0.1","chai":"^4.5.0","mocha":"^10.7.3","nock":"^13.5.5","prettier":"^2.8.8","readable-mock-req":"^0.2.2","sinon":"^9.2.4","timekeeper":"^2.3.1"},"standard-version":{"scripts":{"postchangelog":"sed -i \'\' -e \'s/### \\\\[/## [/g\' CHANGELOG.md"},"types":[{"type":"feat","section":"Features"},{"type":"fix","section":"Fixes"},{"type":"chore","hidden":true},{"type":"docs","hidden":true},{"type":"style","hidden":true},{"type":"refactor","section":"Refactor","hidden":false},{"type":"perf","section":"Performance","hidden":false},{"type":"test","hidden":true}]}}')},65191:a=>{a.exports=function(a,...b){let c={};for(let d of b)void 0!==a[d]&&(c[d]=a[d]);return c}},65192:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.UnsupportedStrategy=b.UnknownError=b.OAuthCallbackError=b.MissingSecret=b.MissingAuthorize=b.MissingAdapterMethods=b.MissingAdapter=b.MissingAPIRoute=b.InvalidCallbackUrl=b.AccountNotLinkedError=void 0,b.adapterErrorHandler=function(a,b){if(a)return Object.keys(a).reduce(function(c,d){return c[d]=(0,f.default)(e.default.mark(function c(){var f,g,h,i,j,k=arguments;return e.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:for(c.prev=0,g=Array(f=k.length),h=0;h<f;h++)g[h]=k[h];return b.debug("adapter_".concat(d),{args:g}),i=a[d],c.next=6,i.apply(void 0,g);case 6:return c.abrupt("return",c.sent);case 9:throw c.prev=9,c.t0=c.catch(0),b.error("adapter_error_".concat(d),c.t0),(j=new o(c.t0)).name="".concat(q(d),"Error"),j;case 15:case"end":return c.stop()}},c,null,[[0,9]])})),c},{})},b.capitalize=q,b.eventsErrorHandler=function(a,b){return Object.keys(a).reduce(function(c,d){return c[d]=(0,f.default)(e.default.mark(function c(){var f,g=arguments;return e.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,f=a[d],c.next=4,f.apply(void 0,g);case 4:return c.abrupt("return",c.sent);case 7:c.prev=7,c.t0=c.catch(0),b.error("".concat(p(d),"_EVENT_ERROR"),c.t0);case 10:case"end":return c.stop()}},c,null,[[0,7]])})),c},{})},b.upperSnake=p;var e=d(c(47093)),f=d(c(42)),g=d(c(55618)),h=d(c(70356)),i=d(c(94758)),j=d(c(54449)),k=d(c(77979)),l=d(c(3420));function m(a,b,c){return b=(0,k.default)(b),(0,j.default)(a,n()?Reflect.construct(b,c||[],(0,k.default)(a).constructor):b.apply(a,c))}function n(){try{var a=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(a){}return(n=function(){return!!a})()}var o=b.UnknownError=function(a){function b(a){var c,d;return(0,h.default)(this,b),(d=m(this,b,[null!=(c=null==a?void 0:a.message)?c:a])).name="UnknownError",d.code=a.code,a instanceof Error&&(d.stack=a.stack),d}return(0,l.default)(b,a),(0,i.default)(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,d(c(9492)).default)(Error));function p(a){return a.replace(/([A-Z])/g,"_$1").toUpperCase()}function q(a){return"".concat(a[0].toUpperCase()).concat(a.slice(1))}b.OAuthCallbackError=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","OAuthCallbackError"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.AccountNotLinkedError=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","AccountNotLinkedError"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingAPIRoute=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingAPIRouteError"),(0,g.default)(a,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingSecret=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingSecretError"),(0,g.default)(a,"code","NO_SECRET"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingAuthorize=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingAuthorizeError"),(0,g.default)(a,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingAdapter=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingAdapterError"),(0,g.default)(a,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.MissingAdapterMethods=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","MissingAdapterMethodsError"),(0,g.default)(a,"code","MISSING_ADAPTER_METHODS_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.UnsupportedStrategy=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","UnsupportedStrategyError"),(0,g.default)(a,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o),b.InvalidCallbackUrl=function(a){function b(){var a;(0,h.default)(this,b);for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return a=m(this,b,[].concat(d)),(0,g.default)(a,"name","InvalidCallbackUrl"),(0,g.default)(a,"code","INVALID_CALLBACK_URL_ERROR"),a}return(0,l.default)(b,a),(0,i.default)(b)}(o)},65315:(a,b,c)=>{"use strict";c.d(b,{b:()=>j});var d=c(92428),e=c(80228),f=c(46493),g=c(20862),h=c(96176),i=c(19593);class j{static [f.i]="SelectionProxyHandler";config;constructor(a){this.config={...a}}get(a,b){if("_"===b)return{...a._,selectedFields:new Proxy(a._.selectedFields,this)};if(b===i.n)return{...a[i.n],selectedFields:new Proxy(a[i.n].selectedFields,this)};if("symbol"==typeof b)return a[b];let c=((0,f.is)(a,h.n)?a._.selectedFields:(0,f.is)(a,g.Ss)?a[i.n].selectedFields:a)[b];if((0,f.is)(c,g.Xs.Aliased)){if("sql"===this.config.sqlAliasedBehavior&&!c.isSelectionField)return c.sql;let a=c.clone();return a.isSelectionField=!0,a}if((0,f.is)(c,g.Xs)){if("sql"===this.config.sqlBehavior)return c;throw Error(`You tried to reference "${b}" field from a subquery, which is a raw SQL field, but it doesn't have an alias declared. Please add an alias to the field using ".as('alias')" method.`)}return(0,f.is)(c,e.V)?this.config.alias?new Proxy(c,new d.Ht(new Proxy(c.table,new d.h_(this.config.alias,this.config.replaceOriginalName??!1)))):c:"object"!=typeof c||null===c?c:new Proxy(c,new j(this.config))}}},65560:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.GeneralEncrypt=void 0;let d=c(93695),e=c(69817),f=c(2678),g=c(1842),h=c(70338),i=c(67040),j=c(53268);class k{constructor(a,b,c){this.parent=a,this.key=b,this.options=c}setUnprotectedHeader(a){if(this.unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this.unprotectedHeader=a,this}addRecipient(...a){return this.parent.addRecipient(...a)}encrypt(...a){return this.parent.encrypt(...a)}done(){return this.parent}}class l{constructor(a){this._recipients=[],this._plaintext=a}addRecipient(a,b){let c=new k(this,a,{crit:null==b?void 0:b.crit});return this._recipients.push(c),c}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}async encrypt(a){var b,c,k;let l;if(!this._recipients.length)throw new e.JWEInvalid("at least one recipient must be added");if(a={deflateRaw:null==a?void 0:a.deflateRaw},1===this._recipients.length){let[b]=this._recipients,c=await new d.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(b.unprotectedHeader).encrypt(b.key,{...b.options,...a}),e={ciphertext:c.ciphertext,iv:c.iv,recipients:[{}],tag:c.tag};return c.aad&&(e.aad=c.aad),c.protected&&(e.protected=c.protected),c.unprotected&&(e.unprotected=c.unprotected),c.encrypted_key&&(e.recipients[0].encrypted_key=c.encrypted_key),c.header&&(e.recipients[0].header=c.header),e}for(let a=0;a<this._recipients.length;a++){let b=this._recipients[a];if(!(0,g.default)(this._protectedHeader,this._unprotectedHeader,b.unprotectedHeader))throw new e.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let c={...this._protectedHeader,...this._unprotectedHeader,...b.unprotectedHeader},{alg:d}=c;if("string"!=typeof d||!d)throw new e.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("dir"===d||"ECDH-ES"===d)throw new e.JWEInvalid('"dir" and "ECDH-ES" alg may only be used with a single recipient');if("string"!=typeof c.enc||!c.enc)throw new e.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if(l){if(l!==c.enc)throw new e.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter must be the same for all recipients')}else l=c.enc;if((0,j.default)(e.JWEInvalid,new Map,b.options.crit,this._protectedHeader,c),void 0!==c.zip&&(!this._protectedHeader||!this._protectedHeader.zip))throw new e.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected')}let m=(0,f.default)(l),n={ciphertext:"",iv:"",recipients:[],tag:""};for(let e=0;e<this._recipients.length;e++){let f=this._recipients[e],g={};n.recipients.push(g);let j=({...this._protectedHeader,...this._unprotectedHeader,...f.unprotectedHeader}).alg.startsWith("PBES2")?2048+e:void 0;if(0===e){let b=await new d.FlattenedEncrypt(this._plaintext).setAdditionalAuthenticatedData(this._aad).setContentEncryptionKey(m).setProtectedHeader(this._protectedHeader).setSharedUnprotectedHeader(this._unprotectedHeader).setUnprotectedHeader(f.unprotectedHeader).setKeyManagementParameters({p2c:j}).encrypt(f.key,{...f.options,...a,[d.unprotected]:!0});n.ciphertext=b.ciphertext,n.iv=b.iv,n.tag=b.tag,b.aad&&(n.aad=b.aad),b.protected&&(n.protected=b.protected),b.unprotected&&(n.unprotected=b.unprotected),g.encrypted_key=b.encrypted_key,b.header&&(g.header=b.header);continue}let{encryptedKey:o,parameters:p}=await (0,h.default)((null==(b=f.unprotectedHeader)?void 0:b.alg)||(null==(c=this._protectedHeader)?void 0:c.alg)||(null==(k=this._unprotectedHeader)?void 0:k.alg),l,f.key,m,{p2c:j});g.encrypted_key=(0,i.encode)(o),(f.unprotectedHeader||p)&&(g.header={...f.unprotectedHeader,...p})}return n}}b.GeneralEncrypt=l},65828:(a,b,c)=>{"use strict";c.d(b,{Pe:()=>j});var d=c(20862),e=c(46493),f=c(93352);class g{constructor(a,b){this.unique=a,this.name=b}static [e.i]="PgIndexBuilderOn";on(...a){return new h(a.map(a=>{if((0,e.is)(a,d.Xs))return a;let b=new f.ae(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!1,this.name)}onOnly(...a){return new h(a.map(a=>{if((0,e.is)(a,d.Xs))return a;let b=new f.ae(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=a.defaultConfig,b}),this.unique,!0,this.name)}using(a,...b){return new h(b.map(a=>{if((0,e.is)(a,d.Xs))return a;let b=new f.ae(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),b}),this.unique,!0,this.name,a)}}class h{static [e.i]="PgIndexBuilder";config;constructor(a,b,c,d,e="btree"){this.config={name:d,columns:a,unique:b,only:c,method:e}}concurrently(){return this.config.concurrently=!0,this}with(a){return this.config.with=a,this}where(a){return this.config.where=a,this}build(a){return new i(this.config,a)}}class i{static [e.i]="PgIndex";config;constructor(a,b){this.config={...a,table:b}}}function j(a){return new g(!1,a)}},65859:a=>{a.exports=()=>Math.floor(Date.now()/1e3)},66084:function(a,b,c){(function(a,b){var c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i,d=/^(area|base|br|col|embed|hr|img|input|link|meta|param|source|track|wbr)$/,e=/[\s\n\\/='"\0<>]/,f=/^xlink:?./,g=/["&<]/;function h(a){if(!1===g.test(a+=""))return a;for(var b=0,c=0,d="",e="";c<a.length;c++){switch(a.charCodeAt(c)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 60:e="&lt;";break;default:continue}c!==b&&(d+=a.slice(b,c)),d+=e,b=c+1}return c!==b&&(d+=a.slice(b,c)),d}var i=function(a,b){return String(a).replace(/(\n+)/g,"$1"+(b||"	"))},j=function(a,b,c){return String(a).length>(b||40)||!c&&-1!==String(a).indexOf("\n")||-1!==String(a).indexOf("<")},k={},l=/([A-Z])/g;function m(a){var b="";for(var d in a){var e=a[d];null!=e&&""!==e&&(b&&(b+=" "),b+="-"==d[0]?d:k[d]||(k[d]=d.replace(l,"-$1").toLowerCase()),b="number"==typeof e&&!1===c.test(d)?b+": "+e+"px;":b+": "+e+";")}return b||void 0}function n(a,b){return Array.isArray(b)?b.reduce(n,a):null!=b&&!1!==b&&a.push(b),a}function o(){this.__d=!0}function p(a,b){return{__v:a,context:b,props:a.props,setState:o,forceUpdate:o,__d:!0,__h:[]}}function q(a,b){var c=a.contextType,d=c&&b[c.__c];return null!=c?d?d.props.value:c.__:b}var r=[],s={shallow:!0};v.render=v;var t=function(a,b){return v(a,b,s)},u=[];function v(a,c,g){c=c||{};var k=b.options.__s;b.options.__s=!0;var l,o=b.h(b.Fragment,null);return o.__k=[a],l=g&&(g.pretty||g.voidElements||g.sortAttributes||g.shallow||g.allAttributes||g.xml||g.attributeHook)?function a(c,g,k,l,o,s){if(null==c||"boolean"==typeof c)return"";if("object"!=typeof c)return"function"==typeof c?"":h(c);var t=k.pretty,u=t&&"string"==typeof t?t:"	";if(Array.isArray(c)){for(var v="",w=0;w<c.length;w++)t&&w>0&&(v+="\n"),v+=a(c[w],g,k,l,o,s);return v}if(void 0!==c.constructor)return"";var x,y=c.type,z=c.props,A=!1;if("function"==typeof y){if(A=!0,!k.shallow||!l&&!1!==k.renderRootComponent){if(y===b.Fragment){var B=[];return n(B,c.props.children),a(B,g,k,!1!==k.shallowHighOrder,o,s)}var C,D=c.__c=p(c,g);b.options.__b&&b.options.__b(c);var E=b.options.__r;if(y.prototype&&"function"==typeof y.prototype.render){var F=q(y,g);(D=c.__c=new y(z,F)).__v=c,D._dirty=D.__d=!0,D.props=z,null==D.state&&(D.state={}),null==D._nextState&&null==D.__s&&(D._nextState=D.__s=D.state),D.context=F,y.getDerivedStateFromProps?D.state=Object.assign({},D.state,y.getDerivedStateFromProps(D.props,D.state)):D.componentWillMount&&(D.componentWillMount(),D.state=D._nextState!==D.state?D._nextState:D.__s!==D.state?D.__s:D.state),E&&E(c),C=D.render(D.props,D.state,D.context)}else for(var G=q(y,g),H=0;D.__d&&H++<25;)D.__d=!1,E&&E(c),C=y.call(c.__c,z,G);return D.getChildContext&&(g=Object.assign({},g,D.getChildContext())),b.options.diffed&&b.options.diffed(c),a(C,g,k,!1!==k.shallowHighOrder,o,s)}y=(x=y).displayName||x!==Function&&x.name||function(a){var b=(Function.prototype.toString.call(a).match(/^\s*function\s+([^( ]+)/)||"")[1];if(!b){for(var c=-1,d=r.length;d--;)if(r[d]===a){c=d;break}c<0&&(c=r.push(a)-1),b="UnnamedComponent"+c}return b}(x)}var I,J,K="<"+y;if(z){var L=Object.keys(z);k&&!0===k.sortAttributes&&L.sort();for(var M=0;M<L.length;M++){var N=L[M],O=z[N];if("children"!==N){if(!e.test(N)&&(k&&k.allAttributes||"key"!==N&&"ref"!==N&&"__self"!==N&&"__source"!==N)){if("defaultValue"===N)N="value";else if("defaultChecked"===N)N="checked";else if("defaultSelected"===N)N="selected";else if("className"===N){if(void 0!==z.class)continue;N="class"}else o&&f.test(N)&&(N=N.toLowerCase().replace(/^xlink:?/,"xlink:"));if("htmlFor"===N){if(z.for)continue;N="for"}"style"===N&&O&&"object"==typeof O&&(O=m(O)),"a"===N[0]&&"r"===N[1]&&"boolean"==typeof O&&(O=String(O));var P=k.attributeHook&&k.attributeHook(N,O,g,k,A);if(P||""===P)K+=P;else if("dangerouslySetInnerHTML"===N)J=O&&O.__html;else if("textarea"===y&&"value"===N)I=O;else if((O||0===O||""===O)&&"function"!=typeof O){if(!(!0!==O&&""!==O||(O=N,k&&k.xml))){K=K+" "+N;continue}if("value"===N){if("select"===y){s=O;continue}"option"===y&&s==O&&void 0===z.selected&&(K+=" selected")}K=K+" "+N+'="'+h(O)+'"'}}}else I=O}}if(t){var Q=K.replace(/\n\s*/," ");Q===K||~Q.indexOf("\n")?t&&~K.indexOf("\n")&&(K+="\n"):K=Q}if(K+=">",e.test(y))throw Error(y+" is not a valid HTML tag name in "+K);var R,S=d.test(y)||k.voidElements&&k.voidElements.test(y),T=[];if(J)t&&j(J)&&(J="\n"+u+i(J,u)),K+=J;else if(null!=I&&n(R=[],I).length){for(var U=t&&~K.indexOf("\n"),V=!1,W=0;W<R.length;W++){var X=R[W];if(null!=X&&!1!==X){var Y=a(X,g,k,!0,"svg"===y||"foreignObject"!==y&&o,s);if(t&&!U&&j(Y)&&(U=!0),Y)if(t){var Z=Y.length>0&&"<"!=Y[0];V&&Z?T[T.length-1]+=Y:T.push(Y),V=Z}else T.push(Y)}}if(t&&U)for(var $=T.length;$--;)T[$]="\n"+u+i(T[$],u)}if(T.length||J)K+=T.join("");else if(k&&k.xml)return K.substring(0,K.length-1)+" />";return!S||R||J?(t&&~K.indexOf("\n")&&(K+="\n"),K=K+"</"+y+">"):K=K.replace(/>$/," />"),K}(a,c,g):function a(c,g,i,j,k){if(null==c||!0===c||!1===c||""===c)return"";if("object"!=typeof c)return"function"==typeof c?"":h(c);if(x(c)){var l="";k.__k=c;for(var n=0;n<c.length;n++)l+=a(c[n],g,i,j,k),c[n]=w(c[n]);return l}if(void 0!==c.constructor)return"";c.__=k,b.options.__b&&b.options.__b(c);var o=c.type,r=c.props;if("function"==typeof o){if(o===b.Fragment)A=r.children;else{var s,t,u,v,z,A=o.prototype&&"function"==typeof o.prototype.render?(s=g,u=q(t=c.type,s),v=new t(c.props,u),c.__c=v,v.__v=c,v.__d=!0,v.props=c.props,null==v.state&&(v.state={}),null==v.__s&&(v.__s=v.state),v.context=u,t.getDerivedStateFromProps?v.state=y({},v.state,t.getDerivedStateFromProps(v.props,v.state)):v.componentWillMount&&(v.componentWillMount(),v.state=v.__s!==v.state?v.__s:v.state),(z=b.options.__r)&&z(c),v.render(v.props,v.state,v.context)):function(a,c){var d,e=p(a,c),f=q(a.type,c);a.__c=e;for(var g=b.options.__r,h=0;e.__d&&h++<25;)e.__d=!1,g&&g(a),d=a.type.call(e,a.props,f);return d}(c,g),B=c.__c;B.getChildContext&&(g=y({},g,B.getChildContext()))}var C=a(A=null!=A&&A.type===b.Fragment&&null==A.key?A.props.children:A,g,i,j,c);return b.options.diffed&&b.options.diffed(c),c.__=void 0,b.options.unmount&&b.options.unmount(c),C}var D,E,F="<";if(F+=o,r)for(var G in D=r.children,r){var H,I,J,K=r[G];if(!("key"===G||"ref"===G||"__self"===G||"__source"===G||"children"===G||"className"===G&&"class"in r||"htmlFor"===G&&"for"in r||e.test(G))){if(I=G="className"===(H=G)?"class":"htmlFor"===H?"for":"defaultValue"===H?"value":"defaultChecked"===H?"checked":"defaultSelected"===H?"selected":i&&f.test(H)?H.toLowerCase().replace(/^xlink:?/,"xlink:"):H,J=K,K="style"===I&&null!=J&&"object"==typeof J?m(J):"a"===I[0]&&"r"===I[1]&&"boolean"==typeof J?String(J):J,"dangerouslySetInnerHTML"===G)E=K&&K.__html;else if("textarea"===o&&"value"===G)D=K;else if((K||0===K||""===K)&&"function"!=typeof K){if(!0===K||""===K){K=G,F=F+" "+G;continue}if("value"===G){if("select"===o){j=K;continue}"option"!==o||j!=K||"selected"in r||(F+=" selected")}F=F+" "+G+'="'+h(K)+'"'}}}var L=F;if(F+=">",e.test(o))throw Error(o+" is not a valid HTML tag name in "+F);var M="",N=!1;if(E)M+=E,N=!0;else if("string"==typeof D)M+=h(D),N=!0;else if(x(D)){c.__k=D;for(var O=0;O<D.length;O++){var P=D[O];if(D[O]=w(P),null!=P&&!1!==P){var Q=a(P,g,"svg"===o||"foreignObject"!==o&&i,j,c);Q&&(M+=Q,N=!0)}}}else if(null!=D&&!1!==D&&!0!==D){c.__k=[w(D)];var R=a(D,g,"svg"===o||"foreignObject"!==o&&i,j,c);R&&(M+=R,N=!0)}if(b.options.diffed&&b.options.diffed(c),c.__=void 0,b.options.unmount&&b.options.unmount(c),N)F+=M;else if(d.test(o))return L+" />";return F+"</"+o+">"}(a,c,!1,void 0,o),b.options.__c&&b.options.__c(a,u),b.options.__s=k,u.length=0,l}function w(a){return null==a||"boolean"==typeof a?null:"string"==typeof a||"number"==typeof a||"bigint"==typeof a?b.h(null,null,a):a}var x=Array.isArray,y=Object.assign;v.shallowRender=t,a.default=v,a.render=v,a.renderToStaticMarkup=v,a.renderToString=v,a.shallowRender=t})(b,c(21274))},66587:(a,b,c)=>{"use strict";c.d(b,{Z5:()=>h,_:()=>j,sH:()=>i});var d=c(46493),e=c(41313),f=c(93352);class g extends f.pe{static [d.i]="PgNumericBuilder";constructor(a,b,c){super(a,"string","PgNumeric"),this.config.precision=b,this.config.scale=c}build(a){return new h(a,this.config)}}class h extends f.Kl{static [d.i]="PgNumeric";precision;scale;constructor(a,b){super(a,b),this.precision=b.precision,this.scale=b.scale}getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`numeric(${this.precision}, ${this.scale})`:void 0===this.precision?"numeric":`numeric(${this.precision})`}}function i(a,b){let{name:c,config:d}=(0,e.Ll)(a,b);return new g(c,d?.precision,d?.scale)}let j=i},66840:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.EmbeddedJWK=void 0;let d=c(80518),e=c(16217),f=c(69817);b.EmbeddedJWK=async function(a,b){let c={...a,...null==b?void 0:b.header};if(!(0,e.default)(c.jwk))throw new f.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a JSON object');let g=await (0,d.importJWK)({...c.jwk,ext:!0},c.alg,!0);if(g instanceof Uint8Array||"public"!==g.type)throw new f.JWSInvalid('"jwk" (JSON Web Key) Header Parameter must be a public key');return g}},67040:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decode=b.encode=b.encodeBase64=b.decodeBase64=void 0;let d=c(79428),e=c(74855);d.Buffer.isEncoding("base64url")?b.encode=a=>d.Buffer.from(a).toString("base64url"):b.encode=a=>d.Buffer.from(a).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"),b.decodeBase64=a=>d.Buffer.from(a,"base64"),b.encodeBase64=a=>d.Buffer.from(a).toString("base64"),b.decode=a=>d.Buffer.from(function(a){let b=a;return b instanceof Uint8Array&&(b=e.decoder.decode(b)),b}(a),"base64")},67041:(a,b,c)=>{"use strict";let d,e;c.r(b),c.d(b,{NIL:()=>w,parse:()=>r,stringify:()=>n,v1:()=>q,v3:()=>t,v4:()=>u,v5:()=>v,validate:()=>l,version:()=>x});var f=c(55511),g=c.n(f);let h=new Uint8Array(256),i=h.length;function j(){return i>h.length-16&&(g().randomFillSync(h),i=0),h.slice(i,i+=16)}let k=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(a){return"string"==typeof a&&k.test(a)},m=[];for(let a=0;a<256;++a)m.push((a+256).toString(16).substr(1));let n=function(a,b=0){let c=(m[a[b+0]]+m[a[b+1]]+m[a[b+2]]+m[a[b+3]]+"-"+m[a[b+4]]+m[a[b+5]]+"-"+m[a[b+6]]+m[a[b+7]]+"-"+m[a[b+8]]+m[a[b+9]]+"-"+m[a[b+10]]+m[a[b+11]]+m[a[b+12]]+m[a[b+13]]+m[a[b+14]]+m[a[b+15]]).toLowerCase();if(!l(c))throw TypeError("Stringified UUID is invalid");return c},o=0,p=0,q=function(a,b,c){let f=b&&c||0,g=b||Array(16),h=(a=a||{}).node||d,i=void 0!==a.clockseq?a.clockseq:e;if(null==h||null==i){let b=a.random||(a.rng||j)();null==h&&(h=d=[1|b[0],b[1],b[2],b[3],b[4],b[5]]),null==i&&(i=e=(b[6]<<8|b[7])&16383)}let k=void 0!==a.msecs?a.msecs:Date.now(),l=void 0!==a.nsecs?a.nsecs:p+1,m=k-o+(l-p)/1e4;if(m<0&&void 0===a.clockseq&&(i=i+1&16383),(m<0||k>o)&&void 0===a.nsecs&&(l=0),l>=1e4)throw Error("uuid.v1(): Can't create more than 10M uuids/sec");o=k,p=l,e=i;let q=((0xfffffff&(k+=122192928e5))*1e4+l)%0x100000000;g[f++]=q>>>24&255,g[f++]=q>>>16&255,g[f++]=q>>>8&255,g[f++]=255&q;let r=k/0x100000000*1e4&0xfffffff;g[f++]=r>>>8&255,g[f++]=255&r,g[f++]=r>>>24&15|16,g[f++]=r>>>16&255,g[f++]=i>>>8|128,g[f++]=255&i;for(let a=0;a<6;++a)g[f+a]=h[a];return b||n(g)},r=function(a){let b;if(!l(a))throw TypeError("Invalid UUID");let c=new Uint8Array(16);return c[0]=(b=parseInt(a.slice(0,8),16))>>>24,c[1]=b>>>16&255,c[2]=b>>>8&255,c[3]=255&b,c[4]=(b=parseInt(a.slice(9,13),16))>>>8,c[5]=255&b,c[6]=(b=parseInt(a.slice(14,18),16))>>>8,c[7]=255&b,c[8]=(b=parseInt(a.slice(19,23),16))>>>8,c[9]=255&b,c[10]=(b=parseInt(a.slice(24,36),16))/0x10000000000&255,c[11]=b/0x100000000&255,c[12]=b>>>24&255,c[13]=b>>>16&255,c[14]=b>>>8&255,c[15]=255&b,c};function s(a,b,c){function d(a,d,e,f){if("string"==typeof a&&(a=function(a){a=unescape(encodeURIComponent(a));let b=[];for(let c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b}(a)),"string"==typeof d&&(d=r(d)),16!==d.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let g=new Uint8Array(16+a.length);if(g.set(d),g.set(a,d.length),(g=c(g))[6]=15&g[6]|b,g[8]=63&g[8]|128,e){f=f||0;for(let a=0;a<16;++a)e[f+a]=g[a];return e}return n(g)}try{d.name=a}catch(a){}return d.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",d.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",d}let t=s("v3",48,function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),g().createHash("md5").update(a).digest()}),u=function(a,b,c){let d=(a=a||{}).random||(a.rng||j)();if(d[6]=15&d[6]|64,d[8]=63&d[8]|128,b){c=c||0;for(let a=0;a<16;++a)b[c+a]=d[a];return b}return n(d)},v=s("v5",80,function(a){return Array.isArray(a)?a=Buffer.from(a):"string"==typeof a&&(a=Buffer.from(a,"utf8")),g().createHash("sha1").update(a).digest()}),w="00000000-0000-0000-0000-000000000000",x=function(a){if(!l(a))throw TypeError("Invalid UUID");return parseInt(a.substr(14,1),16)}},67109:(a,b)=>{function c(a){for(var b,c,d="",e=-1;++e<a.length;)b=a.charCodeAt(e),c=e+1<a.length?a.charCodeAt(e+1):0,55296<=b&&b<=56319&&56320<=c&&c<=57343&&(b=65536+((1023&b)<<10)+(1023&c),e++),b<=127?d+=String.fromCharCode(b):b<=2047?d+=String.fromCharCode(192|b>>>6&31,128|63&b):b<=65535?d+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|63&b):b<=2097151&&(d+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|63&b));return d}function d(a){for(var b=Array(a.length>>2),c=0;c<b.length;c++)b[c]=0;for(var c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<24-c%32;return b}function e(a,b){a[b>>5]|=128<<24-b%32,a[(b+64>>9<<4)+15]=b;for(var c=Array(80),d=0x67452301,e=-0x10325477,h=-0x67452302,i=0x10325476,j=-0x3c2d1e10,k=0;k<a.length;k+=16){for(var l=d,m=e,n=h,o=i,p=j,q=0;q<80;q++){q<16?c[q]=a[k+q]:c[q]=g(c[q-3]^c[q-8]^c[q-14]^c[q-16],1);var r,s,t,u,v,w=f(f(g(d,5),(r=q,s=e,t=h,u=i,r<20?s&t|~s&u:r<40?s^t^u:r<60?s&t|s&u|t&u:s^t^u)),f(f(j,c[q]),(v=q)<20?0x5a827999:v<40?0x6ed9eba1:v<60?-0x70e44324:-0x359d3e2a));j=i,i=h,h=g(e,30),e=d,d=w}d=f(d,l),e=f(e,m),h=f(h,n),i=f(i,o),j=f(j,p)}return[d,e,h,i,j]}function f(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function g(a,b){return a<<b|a>>>32-b}b.HMACSHA1=function(a,b){return function(a){for(var b="",c=a.length,d=0;d<c;d+=3)for(var e=a.charCodeAt(d)<<16|(d+1<c?a.charCodeAt(d+1)<<8:0)|(d+2<c?a.charCodeAt(d+2):0),f=0;f<4;f++)8*d+6*f>8*a.length?b+="=":b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(e>>>6*(3-f)&63);return b}(function(a,b){var c=d(a);c.length>16&&(c=e(c,8*a.length));for(var f=Array(16),g=Array(16),h=0;h<16;h++)f[h]=0x36363636^c[h],g[h]=0x5c5c5c5c^c[h];for(var i=e(f.concat(d(b)),512+8*b.length),j=e(g.concat(i),672),k="",l=0;l<32*j.length;l+=8)k+=String.fromCharCode(j[l>>5]>>>24-l%32&255);return k}(c(a),c(b)))}},67310:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(79428),e=c(55511),f=c(67040),g=c(69817),h=c(69558),i=c(85633),j=c(48764),k=c(40295);b.default=a=>{if(k.jwkImport&&"oct"!==a.kty)return a.d?(0,e.createPrivateKey)({format:"jwk",key:a}):(0,e.createPublicKey)({format:"jwk",key:a});switch(a.kty){case"oct":return(0,e.createSecretKey)((0,f.decode)(a.k));case"RSA":{let b=new j.default,c=void 0!==a.d,f=d.Buffer.from(a.n,"base64"),g=d.Buffer.from(a.e,"base64");c?(b.zero(),b.unsignedInteger(f),b.unsignedInteger(g),b.unsignedInteger(d.Buffer.from(a.d,"base64")),b.unsignedInteger(d.Buffer.from(a.p,"base64")),b.unsignedInteger(d.Buffer.from(a.q,"base64")),b.unsignedInteger(d.Buffer.from(a.dp,"base64")),b.unsignedInteger(d.Buffer.from(a.dq,"base64")),b.unsignedInteger(d.Buffer.from(a.qi,"base64"))):(b.unsignedInteger(f),b.unsignedInteger(g));let h={key:b.end(),format:"der",type:"pkcs1"},k=c?(0,e.createPrivateKey)(h):(0,e.createPublicKey)(h);return(0,i.setModulusLength)(k,f.length<<3),k}case"EC":{let b=new j.default,c=void 0!==a.d,f=d.Buffer.concat([d.Buffer.alloc(1,4),d.Buffer.from(a.x,"base64"),d.Buffer.from(a.y,"base64")]);if(c){b.zero();let c=new j.default;c.oidFor("ecPublicKey"),c.oidFor(a.crv),b.add(c.end());let g=new j.default;g.one(),g.octStr(d.Buffer.from(a.d,"base64"));let i=new j.default;i.bitStr(f);let k=i.end(d.Buffer.from([161]));g.add(k);let l=g.end(),m=new j.default;m.add(l);let n=m.end(d.Buffer.from([4]));b.add(n);let o=b.end(),p=(0,e.createPrivateKey)({key:o,format:"der",type:"pkcs8"});return(0,h.setCurve)(p,a.crv),p}let g=new j.default;g.oidFor("ecPublicKey"),g.oidFor(a.crv),b.add(g.end()),b.bitStr(f);let i=b.end(),k=(0,e.createPublicKey)({key:i,format:"der",type:"spki"});return(0,h.setCurve)(k,a.crv),k}case"OKP":{let b=new j.default;if(void 0!==a.d){b.zero();let c=new j.default;c.oidFor(a.crv),b.add(c.end());let f=new j.default;f.octStr(d.Buffer.from(a.d,"base64"));let g=f.end(d.Buffer.from([4]));b.add(g);let h=b.end();return(0,e.createPrivateKey)({key:h,format:"der",type:"pkcs8"})}let c=new j.default;c.oidFor(a.crv),b.add(c.end()),b.bitStr(d.Buffer.from(a.x,"base64"));let f=b.end();return(0,e.createPublicKey)({key:f,format:"der",type:"spki"})}default:throw new g.JOSENotSupported('Invalid or unsupported JWK "kty" (Key Type) Parameter value')}}},67969:(a,b,c)=>{"use strict";c.d(b,{mu:()=>aQ,cJ:()=>aR});var d=c(46493),e=c(7284),f=c(41313),g=c(93352),h=c(6766);class i extends h.p{static [d.i]="PgBigInt53Builder";constructor(a){super(a,"number","PgBigInt53")}build(a){return new j(a,this.config)}}class j extends g.Kl{static [d.i]="PgBigInt53";getSQLType(){return"bigint"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class k extends h.p{static [d.i]="PgBigInt64Builder";constructor(a){super(a,"bigint","PgBigInt64")}build(a){return new l(a,this.config)}}class l extends g.Kl{static [d.i]="PgBigInt64";getSQLType(){return"bigint"}mapFromDriverValue(a){return BigInt(a)}}function m(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return"number"===d.mode?new i(c):new k(c)}class n extends g.pe{static [d.i]="PgBigSerial53Builder";constructor(a){super(a,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new o(a,this.config)}}class o extends g.Kl{static [d.i]="PgBigSerial53";getSQLType(){return"bigserial"}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class p extends g.pe{static [d.i]="PgBigSerial64Builder";constructor(a){super(a,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(a){return new q(a,this.config)}}class q extends g.Kl{static [d.i]="PgBigSerial64";getSQLType(){return"bigserial"}mapFromDriverValue(a){return BigInt(a)}}function r(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return"number"===d.mode?new n(c):new p(c)}var s=c(4396);class t extends g.pe{static [d.i]="PgCharBuilder";constructor(a,b){super(a,"string","PgChar"),this.config.length=b.length,this.config.enumValues=b.enum}build(a){return new u(a,this.config)}}class u extends g.Kl{static [d.i]="PgChar";length=this.config.length;enumValues=this.config.enumValues;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function v(a,b={}){let{name:c,config:d}=(0,f.Ll)(a,b);return new t(c,d)}class w extends g.pe{static [d.i]="PgCidrBuilder";constructor(a){super(a,"string","PgCidr")}build(a){return new x(a,this.config)}}class x extends g.Kl{static [d.i]="PgCidr";getSQLType(){return"cidr"}}function y(a){return new w(a??"")}class z extends g.pe{static [d.i]="PgCustomColumnBuilder";constructor(a,b,c){super(a,"custom","PgCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new A(a,this.config)}}class A extends g.Kl{static [d.i]="PgCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function B(a){return(b,c)=>{let{name:d,config:e}=(0,f.Ll)(b,c);return new z(d,e,a)}}var C=c(46886);class D extends g.pe{static [d.i]="PgDoublePrecisionBuilder";constructor(a){super(a,"number","PgDoublePrecision")}build(a){return new E(a,this.config)}}class E extends g.Kl{static [d.i]="PgDoublePrecision";getSQLType(){return"double precision"}mapFromDriverValue(a){return"string"==typeof a?Number.parseFloat(a):a}}function F(a){return new D(a??"")}class G extends g.pe{static [d.i]="PgInetBuilder";constructor(a){super(a,"string","PgInet")}build(a){return new H(a,this.config)}}class H extends g.Kl{static [d.i]="PgInet";getSQLType(){return"inet"}}function I(a){return new G(a??"")}var J=c(84266);class K extends g.pe{static [d.i]="PgIntervalBuilder";constructor(a,b){super(a,"string","PgInterval"),this.config.intervalConfig=b}build(a){return new L(a,this.config)}}class L extends g.Kl{static [d.i]="PgInterval";fields=this.config.intervalConfig.fields;precision=this.config.intervalConfig.precision;getSQLType(){let a=this.fields?` ${this.fields}`:"",b=this.precision?`(${this.precision})`:"";return`interval${a}${b}`}}function M(a,b={}){let{name:c,config:d}=(0,f.Ll)(a,b);return new K(c,d)}var N=c(14880),O=c(94728);class P extends g.pe{static [d.i]="PgLineBuilder";constructor(a){super(a,"array","PgLine")}build(a){return new Q(a,this.config)}}class Q extends g.Kl{static [d.i]="PgLine";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c),Number.parseFloat(d)]}mapToDriverValue(a){return`{${a[0]},${a[1]},${a[2]}}`}}class R extends g.pe{static [d.i]="PgLineABCBuilder";constructor(a){super(a,"json","PgLineABC")}build(a){return new S(a,this.config)}}class S extends g.Kl{static [d.i]="PgLineABC";getSQLType(){return"line"}mapFromDriverValue(a){let[b,c,d]=a.slice(1,-1).split(",");return{a:Number.parseFloat(b),b:Number.parseFloat(c),c:Number.parseFloat(d)}}mapToDriverValue(a){return`{${a.a},${a.b},${a.c}}`}}function T(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return d?.mode&&"tuple"!==d.mode?new R(c):new P(c)}class U extends g.pe{static [d.i]="PgMacaddrBuilder";constructor(a){super(a,"string","PgMacaddr")}build(a){return new V(a,this.config)}}class V extends g.Kl{static [d.i]="PgMacaddr";getSQLType(){return"macaddr"}}function W(a){return new U(a??"")}class X extends g.pe{static [d.i]="PgMacaddr8Builder";constructor(a){super(a,"string","PgMacaddr8")}build(a){return new Y(a,this.config)}}class Y extends g.Kl{static [d.i]="PgMacaddr8";getSQLType(){return"macaddr8"}}function Z(a){return new X(a??"")}var $=c(66587);class _ extends g.pe{static [d.i]="PgPointTupleBuilder";constructor(a){super(a,"array","PgPointTuple")}build(a){return new aa(a,this.config)}}class aa extends g.Kl{static [d.i]="PgPointTuple";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return[Number.parseFloat(b),Number.parseFloat(c)]}return[a.x,a.y]}mapToDriverValue(a){return`(${a[0]},${a[1]})`}}class ab extends g.pe{static [d.i]="PgPointObjectBuilder";constructor(a){super(a,"json","PgPointObject")}build(a){return new ac(a,this.config)}}class ac extends g.Kl{static [d.i]="PgPointObject";getSQLType(){return"point"}mapFromDriverValue(a){if("string"==typeof a){let[b,c]=a.slice(1,-1).split(",");return{x:Number.parseFloat(b),y:Number.parseFloat(c)}}return a}mapToDriverValue(a){return`(${a.x},${a.y})`}}function ad(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return d?.mode&&"tuple"!==d.mode?new ab(c):new _(c)}function ae(a,b){let c=new DataView(new ArrayBuffer(8));for(let d=0;d<8;d++)c.setUint8(d,a[b+d]);return c.getFloat64(0,!0)}function af(a){let b=function(a){let b=[];for(let c=0;c<a.length;c+=2)b.push(Number.parseInt(a.slice(c,c+2),16));return new Uint8Array(b)}(a),c=0,d=b[0];c+=1;let e=new DataView(b.buffer),f=e.getUint32(c,1===d);if(c+=4,0x20000000&f&&(e.getUint32(c,1===d),c+=4),(65535&f)==1){let a=ae(b,c),d=ae(b,c+=8);return c+=8,[a,d]}throw Error("Unsupported geometry type")}class ag extends g.pe{static [d.i]="PgGeometryBuilder";constructor(a){super(a,"array","PgGeometry")}build(a){return new ah(a,this.config)}}class ah extends g.Kl{static [d.i]="PgGeometry";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){return af(a)}mapToDriverValue(a){return`point(${a[0]} ${a[1]})`}}class ai extends g.pe{static [d.i]="PgGeometryObjectBuilder";constructor(a){super(a,"json","PgGeometryObject")}build(a){return new aj(a,this.config)}}class aj extends g.Kl{static [d.i]="PgGeometryObject";getSQLType(){return"geometry(point)"}mapFromDriverValue(a){let b=af(a);return{x:b[0],y:b[1]}}mapToDriverValue(a){return`point(${a.x} ${a.y})`}}function ak(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return d?.mode&&"tuple"!==d.mode?new ai(c):new ag(c)}class al extends g.pe{static [d.i]="PgRealBuilder";constructor(a,b){super(a,"number","PgReal"),this.config.length=b}build(a){return new am(a,this.config)}}class am extends g.Kl{static [d.i]="PgReal";constructor(a,b){super(a,b)}getSQLType(){return"real"}mapFromDriverValue=a=>"string"==typeof a?Number.parseFloat(a):a}function an(a){return new al(a??"")}class ao extends g.pe{static [d.i]="PgSerialBuilder";constructor(a){super(a,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new ap(a,this.config)}}class ap extends g.Kl{static [d.i]="PgSerial";getSQLType(){return"serial"}}function aq(a){return new ao(a??"")}class ar extends h.p{static [d.i]="PgSmallIntBuilder";constructor(a){super(a,"number","PgSmallInt")}build(a){return new as(a,this.config)}}class as extends g.Kl{static [d.i]="PgSmallInt";getSQLType(){return"smallint"}mapFromDriverValue=a=>"string"==typeof a?Number(a):a}function at(a){return new ar(a??"")}class au extends g.pe{static [d.i]="PgSmallSerialBuilder";constructor(a){super(a,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(a){return new av(a,this.config)}}class av extends g.Kl{static [d.i]="PgSmallSerial";getSQLType(){return"smallserial"}}function aw(a){return new au(a??"")}var ax=c(29745),ay=c(19831),az=c(62352),aA=c(29205),aB=c(57789);class aC extends g.pe{static [d.i]="PgBinaryVectorBuilder";constructor(a,b){super(a,"string","PgBinaryVector"),this.config.dimensions=b.dimensions}build(a){return new aD(a,this.config)}}class aD extends g.Kl{static [d.i]="PgBinaryVector";dimensions=this.config.dimensions;getSQLType(){return`bit(${this.dimensions})`}}function aE(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return new aC(c,d)}class aF extends g.pe{static [d.i]="PgHalfVectorBuilder";constructor(a,b){super(a,"array","PgHalfVector"),this.config.dimensions=b.dimensions}build(a){return new aG(a,this.config)}}class aG extends g.Kl{static [d.i]="PgHalfVector";dimensions=this.config.dimensions;getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function aH(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return new aF(c,d)}class aI extends g.pe{static [d.i]="PgSparseVectorBuilder";constructor(a,b){super(a,"string","PgSparseVector"),this.config.dimensions=b.dimensions}build(a){return new aJ(a,this.config)}}class aJ extends g.Kl{static [d.i]="PgSparseVector";dimensions=this.config.dimensions;getSQLType(){return`sparsevec(${this.dimensions})`}}function aK(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return new aI(c,d)}class aL extends g.pe{static [d.i]="PgVectorBuilder";constructor(a,b){super(a,"array","PgVector"),this.config.dimensions=b.dimensions}build(a){return new aM(a,this.config)}}class aM extends g.Kl{static [d.i]="PgVector";dimensions=this.config.dimensions;getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){return a.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}function aN(a,b){let{name:c,config:d}=(0,f.Ll)(a,b);return new aL(c,d)}let aO=Symbol.for("drizzle:PgInlineForeignKeys"),aP=Symbol.for("drizzle:EnableRLS");class aQ extends e.XI{static [d.i]="PgTable";static Symbol=Object.assign({},e.XI.Symbol,{InlineForeignKeys:aO,EnableRLS:aP});[aO]=[];[aP]=!1;[e.XI.Symbol.ExtraConfigBuilder]=void 0}let aR=(a,b,c)=>(function(a,b,c,d,f=a){let g=new aQ(a,d,f),h="function"==typeof b?b({bigint:m,bigserial:r,boolean:s.zM,char:v,cidr:y,customType:B,date:C.p6,doublePrecision:F,inet:I,integer:J.nd,interval:M,json:N.Pq,jsonb:O.Fx,line:T,macaddr:W,macaddr8:Z,numeric:$.sH,point:ad,geometry:ak,real:an,serial:aq,smallint:at,smallserial:aw,text:ax.Qq,time:ay.kB,timestamp:az.vE,uuid:aA.uR,varchar:aB.yf,bit:aE,halfvec:aH,sparsevec:aK,vector:aN}):b,i=Object.fromEntries(Object.entries(h).map(([a,b])=>{b.setName(a);let c=b.build(g);return g[aO].push(...b.buildForeignKeys(c,g)),[a,c]})),j=Object.fromEntries(Object.entries(h).map(([a,b])=>(b.setName(a),[a,b.buildExtraConfigColumn(g)]))),k=Object.assign(g,i);return k[e.XI.Symbol.Columns]=i,k[e.XI.Symbol.ExtraConfigColumns]=j,c&&(k[aQ.Symbol.ExtraConfigBuilder]=c),Object.assign(k,{enableRLS:()=>(k[aQ.Symbol.EnableRLS]=!0,k)})})(a,b,c,void 0)},69301:(a,b)=>{"use strict";async function c(a){var b,c;let{options:d,sessionStore:e}=a,{adapter:f,events:g,jwt:h,callbackUrl:i,logger:j,session:k}=d,l=null==e?void 0:e.value;if(!l)return{redirect:i};if("jwt"===k.strategy)try{let a=await h.decode({...h,token:l});await (null==(b=g.signOut)?void 0:b.call(g,{token:a}))}catch(a){j.error("SIGNOUT_ERROR",a)}else try{let a=await f.deleteSession(l);await (null==(c=g.signOut)?void 0:c.call(g,{session:a}))}catch(a){j.error("SIGNOUT_ERROR",a)}return{redirect:i,cookies:e.clean()}}Object.defineProperty(b,"__esModule",{value:!0}),b.default=c},69531:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FlattenedSign=void 0;let d=c(67040),e=c(5839),f=c(1842),g=c(69817),h=c(74855),i=c(84634),j=c(53268);class k{constructor(a){if(!(a instanceof Uint8Array))throw TypeError("payload must be an instance of Uint8Array");this._payload=a}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}async sign(a,b){let c;if(!this._protectedHeader&&!this._unprotectedHeader)throw new g.JWSInvalid("either setProtectedHeader or setUnprotectedHeader must be called before #sign()");if(!(0,f.default)(this._protectedHeader,this._unprotectedHeader))throw new g.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let k={...this._protectedHeader,...this._unprotectedHeader},l=(0,j.default)(g.JWSInvalid,new Map([["b64",!0]]),null==b?void 0:b.crit,this._protectedHeader,k),m=!0;if(l.has("b64")&&"boolean"!=typeof(m=this._protectedHeader.b64))throw new g.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:n}=k;if("string"!=typeof n||!n)throw new g.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');(0,i.default)(n,a,"sign");let o=this._payload;m&&(o=h.encoder.encode((0,d.encode)(o))),c=this._protectedHeader?h.encoder.encode((0,d.encode)(JSON.stringify(this._protectedHeader))):h.encoder.encode("");let p=(0,h.concat)(c,h.encoder.encode("."),o),q=await (0,e.default)(n,a,p),r={signature:(0,d.encode)(q),payload:""};return m&&(r.payload=h.decoder.decode(o)),this._unprotectedHeader&&(r.header=this._unprotectedHeader),this._protectedHeader&&(r.protected=h.decoder.decode(c)),r}}b.FlattenedSign=k},69558:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.setCurve=b.weakMap=void 0;let d=c(79428),e=c(55511),f=c(69817),g=c(72927),h=c(25066),i=c(94415),j=c(89722),k=d.Buffer.from([42,134,72,206,61,3,1,7]),l=d.Buffer.from([43,129,4,0,34]),m=d.Buffer.from([43,129,4,0,35]),n=d.Buffer.from([43,129,4,0,10]);b.weakMap=new WeakMap;let o=(a,c)=>{var d;let p;if((0,g.isCryptoKey)(a))p=e.KeyObject.from(a);else if((0,h.default)(a))p=a;else throw TypeError((0,i.default)(a,...j.types));if("secret"===p.type)throw TypeError('only "private" or "public" type keys can be used for this operation');switch(p.asymmetricKeyType){case"ed25519":case"ed448":return`Ed${p.asymmetricKeyType.slice(2)}`;case"x25519":case"x448":return`X${p.asymmetricKeyType.slice(1)}`;case"ec":{if(b.weakMap.has(p))return b.weakMap.get(p);let a=null==(d=p.asymmetricKeyDetails)?void 0:d.namedCurve;if(a||"private"!==p.type){if(!a){let b=p.export({format:"der",type:"spki"}),c=b[1]<128?14:15,d=b[c],e=b.slice(c+1,c+1+d);if(e.equals(k))a="prime256v1";else if(e.equals(l))a="secp384r1";else if(e.equals(m))a="secp521r1";else if(e.equals(n))a="secp256k1";else throw new f.JOSENotSupported("Unsupported key curve for this operation")}}else a=o((0,e.createPublicKey)(p),!0);if(c)return a;let g=(a=>{switch(a){case"prime256v1":return"P-256";case"secp384r1":return"P-384";case"secp521r1":return"P-521";case"secp256k1":return"secp256k1";default:throw new f.JOSENotSupported("Unsupported key curve for this operation")}})(a);return b.weakMap.set(p,g),g}default:throw TypeError("Invalid asymmetric key type for this operation")}};b.setCurve=function(a,c){b.weakMap.set(a,c)},b.default=o},69817:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.JWSSignatureVerificationFailed=b.JWKSTimeout=b.JWKSMultipleMatchingKeys=b.JWKSNoMatchingKey=b.JWKSInvalid=b.JWKInvalid=b.JWTInvalid=b.JWSInvalid=b.JWEInvalid=b.JWEDecompressionFailed=b.JWEDecryptionFailed=b.JOSENotSupported=b.JOSEAlgNotAllowed=b.JWTExpired=b.JWTClaimValidationFailed=b.JOSEError=void 0;class c extends Error{static get code(){return"ERR_JOSE_GENERIC"}constructor(a){var b;super(a),this.code="ERR_JOSE_GENERIC",this.name=this.constructor.name,null==(b=Error.captureStackTrace)||b.call(Error,this,this.constructor)}}b.JOSEError=c;class d extends c{static get code(){return"ERR_JWT_CLAIM_VALIDATION_FAILED"}constructor(a,b="unspecified",c="unspecified"){super(a),this.code="ERR_JWT_CLAIM_VALIDATION_FAILED",this.claim=b,this.reason=c}}b.JWTClaimValidationFailed=d;class e extends c{static get code(){return"ERR_JWT_EXPIRED"}constructor(a,b="unspecified",c="unspecified"){super(a),this.code="ERR_JWT_EXPIRED",this.claim=b,this.reason=c}}b.JWTExpired=e;class f extends c{constructor(){super(...arguments),this.code="ERR_JOSE_ALG_NOT_ALLOWED"}static get code(){return"ERR_JOSE_ALG_NOT_ALLOWED"}}b.JOSEAlgNotAllowed=f;class g extends c{constructor(){super(...arguments),this.code="ERR_JOSE_NOT_SUPPORTED"}static get code(){return"ERR_JOSE_NOT_SUPPORTED"}}b.JOSENotSupported=g;class h extends c{constructor(){super(...arguments),this.code="ERR_JWE_DECRYPTION_FAILED",this.message="decryption operation failed"}static get code(){return"ERR_JWE_DECRYPTION_FAILED"}}b.JWEDecryptionFailed=h;class i extends c{constructor(){super(...arguments),this.code="ERR_JWE_DECOMPRESSION_FAILED",this.message="decompression operation failed"}static get code(){return"ERR_JWE_DECOMPRESSION_FAILED"}}b.JWEDecompressionFailed=i;class j extends c{constructor(){super(...arguments),this.code="ERR_JWE_INVALID"}static get code(){return"ERR_JWE_INVALID"}}b.JWEInvalid=j;class k extends c{constructor(){super(...arguments),this.code="ERR_JWS_INVALID"}static get code(){return"ERR_JWS_INVALID"}}b.JWSInvalid=k;class l extends c{constructor(){super(...arguments),this.code="ERR_JWT_INVALID"}static get code(){return"ERR_JWT_INVALID"}}b.JWTInvalid=l;class m extends c{constructor(){super(...arguments),this.code="ERR_JWK_INVALID"}static get code(){return"ERR_JWK_INVALID"}}b.JWKInvalid=m;class n extends c{constructor(){super(...arguments),this.code="ERR_JWKS_INVALID"}static get code(){return"ERR_JWKS_INVALID"}}b.JWKSInvalid=n;class o extends c{constructor(){super(...arguments),this.code="ERR_JWKS_NO_MATCHING_KEY",this.message="no applicable key found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_NO_MATCHING_KEY"}}b.JWKSNoMatchingKey=o;class p extends c{constructor(){super(...arguments),this.code="ERR_JWKS_MULTIPLE_MATCHING_KEYS",this.message="multiple matching keys found in the JSON Web Key Set"}static get code(){return"ERR_JWKS_MULTIPLE_MATCHING_KEYS"}}b.JWKSMultipleMatchingKeys=p,Symbol.asyncIterator;class q extends c{constructor(){super(...arguments),this.code="ERR_JWKS_TIMEOUT",this.message="request timed out"}static get code(){return"ERR_JWKS_TIMEOUT"}}b.JWKSTimeout=q;class r extends c{constructor(){super(...arguments),this.code="ERR_JWS_SIGNATURE_VERIFICATION_FAILED",this.message="signature verification failed"}static get code(){return"ERR_JWS_SIGNATURE_VERIFICATION_FAILED"}}b.JWSSignatureVerificationFailed=r},69978:(a,b)=>{"use strict";function c(a,b="algorithm.name"){return TypeError(`CryptoKey does not support this operation, its ${b} must be ${a}`)}function d(a,b){return a.name===b}function e(a){return parseInt(a.name.slice(4),10)}function f(a,b){if(b.length&&!b.some(b=>a.usages.includes(b))){let a="CryptoKey does not support this operation, its usages must include ";if(b.length>2){let c=b.pop();a+=`one of ${b.join(", ")}, or ${c}.`}else 2===b.length?a+=`one of ${b[0]} or ${b[1]}.`:a+=`${b[0]}.`;throw TypeError(a)}}Object.defineProperty(b,"__esModule",{value:!0}),b.checkEncCryptoKey=b.checkSigCryptoKey=void 0,b.checkSigCryptoKey=function(a,b,...g){switch(b){case"HS256":case"HS384":case"HS512":{if(!d(a.algorithm,"HMAC"))throw c("HMAC");let f=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==f)throw c(`SHA-${f}`,"algorithm.hash");break}case"RS256":case"RS384":case"RS512":{if(!d(a.algorithm,"RSASSA-PKCS1-v1_5"))throw c("RSASSA-PKCS1-v1_5");let f=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==f)throw c(`SHA-${f}`,"algorithm.hash");break}case"PS256":case"PS384":case"PS512":{if(!d(a.algorithm,"RSA-PSS"))throw c("RSA-PSS");let f=parseInt(b.slice(2),10);if(e(a.algorithm.hash)!==f)throw c(`SHA-${f}`,"algorithm.hash");break}case"EdDSA":if("Ed25519"!==a.algorithm.name&&"Ed448"!==a.algorithm.name)throw c("Ed25519 or Ed448");break;case"ES256":case"ES384":case"ES512":{if(!d(a.algorithm,"ECDSA"))throw c("ECDSA");let e=function(a){switch(a){case"ES256":return"P-256";case"ES384":return"P-384";case"ES512":return"P-521";default:throw Error("unreachable")}}(b);if(a.algorithm.namedCurve!==e)throw c(e,"algorithm.namedCurve");break}default:throw TypeError("CryptoKey does not support this operation")}f(a,g)},b.checkEncCryptoKey=function(a,b,...g){switch(b){case"A128GCM":case"A192GCM":case"A256GCM":{if(!d(a.algorithm,"AES-GCM"))throw c("AES-GCM");let e=parseInt(b.slice(1,4),10);if(a.algorithm.length!==e)throw c(e,"algorithm.length");break}case"A128KW":case"A192KW":case"A256KW":{if(!d(a.algorithm,"AES-KW"))throw c("AES-KW");let e=parseInt(b.slice(1,4),10);if(a.algorithm.length!==e)throw c(e,"algorithm.length");break}case"ECDH":switch(a.algorithm.name){case"ECDH":case"X25519":case"X448":break;default:throw c("ECDH, X25519, or X448")}break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":if(!d(a.algorithm,"PBKDF2"))throw c("PBKDF2");break;case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":{if(!d(a.algorithm,"RSA-OAEP"))throw c("RSA-OAEP");let f=parseInt(b.slice(9),10)||1;if(e(a.algorithm.hash)!==f)throw c(`SHA-${f}`,"algorithm.hash");break}default:throw TypeError("CryptoKey does not support this operation")}f(a,g)}},70338:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(98781),e=c(75598),f=c(90070),g=c(11434),h=c(67040),i=c(2678),j=c(69817),k=c(94421),l=c(84634),m=c(37009);b.default=async function(a,b,c,n,o={}){let p,q,r;switch((0,l.default)(a,c,"encrypt"),a){case"dir":r=c;break;case"ECDH-ES":case"ECDH-ES+A128KW":case"ECDH-ES+A192KW":case"ECDH-ES+A256KW":{if(!e.ecdhAllowed(c))throw new j.JOSENotSupported("ECDH with the provided key is not allowed or not supported by your javascript runtime");let{apu:f,apv:g}=o,{epk:l}=o;l||(l=(await e.generateEpk(c)).privateKey);let{x:m,y:s,crv:t,kty:u}=await (0,k.exportJWK)(l),v=await e.deriveKey(c,l,"ECDH-ES"===a?b:a,"ECDH-ES"===a?(0,i.bitLength)(b):parseInt(a.slice(-5,-2),10),f,g);if(q={epk:{x:m,crv:t,kty:u}},"EC"===u&&(q.epk.y=s),f&&(q.apu=(0,h.encode)(f)),g&&(q.apv=(0,h.encode)(g)),"ECDH-ES"===a){r=v;break}r=n||(0,i.default)(b);let w=a.slice(-6);p=await (0,d.wrap)(w,v,r);break}case"RSA1_5":case"RSA-OAEP":case"RSA-OAEP-256":case"RSA-OAEP-384":case"RSA-OAEP-512":r=n||(0,i.default)(b),p=await (0,g.encrypt)(a,c,r);break;case"PBES2-HS256+A128KW":case"PBES2-HS384+A192KW":case"PBES2-HS512+A256KW":{r=n||(0,i.default)(b);let{p2c:d,p2s:e}=o;({encryptedKey:p,...q}=await (0,f.encrypt)(a,c,r,d,e));break}case"A128KW":case"A192KW":case"A256KW":r=n||(0,i.default)(b),p=await (0,d.wrap)(a,c,r);break;case"A128GCMKW":case"A192GCMKW":case"A256GCMKW":{r=n||(0,i.default)(b);let{iv:d}=o;({encryptedKey:p,...q}=await (0,m.wrap)(a,c,r,d));break}default:throw new j.JOSENotSupported('Invalid or unsupported "alg" (JWE Algorithm) header value')}return{cek:r,encryptedKey:p,parameters:q}}},70356:a=>{a.exports=function(a,b){if(!(a instanceof b))throw TypeError("Cannot call a class as a function")},a.exports.__esModule=!0,a.exports.default=a.exports},72026:(a,b,c)=>{let{inspect:d}=c(28354),{RPError:e,OPError:f}=c(86915),g=c(65859);class h{#f;#g;#h;#i;#j;#k;#l;#m;#n;constructor({client:a,exchangeBody:b,clientAssertionPayload:c,response:d,maxAge:f,DPoP:h}){if(["verification_uri","user_code","device_code"].forEach(a=>{if("string"!=typeof d[a]||!d[a])throw new e(`expected ${a} string to be returned by Device Authorization Response, got %j`,d[a])}),!Number.isSafeInteger(d.expires_in))throw new e("expected expires_in number to be returned by Device Authorization Response, got %j",d.expires_in);this.#k=g()+d.expires_in,this.#g=a,this.#i=h,this.#m=f,this.#j=b,this.#h=c,this.#n=d,this.#l=1e3*d.interval||5e3}abort(){this.#f=!0}async poll({signal:a}={}){let b;if(a&&a.aborted||this.#f)throw new e("polling aborted");if(this.expired())throw new e("the device code %j has expired and the device authorization session has concluded",this.device_code);await new Promise(a=>setTimeout(a,this.#l));try{b=await this.#g.grant({...this.#j,grant_type:"urn:ietf:params:oauth:grant-type:device_code",device_code:this.device_code},{clientAssertionPayload:this.#h,DPoP:this.#i})}catch(b){switch(b instanceof f&&b.error){case"slow_down":this.#l+=5e3;case"authorization_pending":return this.poll({signal:a});default:throw b}}return"id_token"in b&&(await this.#g.decryptIdToken(b),await this.#g.validateIdToken(b,void 0,"token",this.#m)),b}get device_code(){return this.#n.device_code}get user_code(){return this.#n.user_code}get verification_uri(){return this.#n.verification_uri}get verification_uri_complete(){return this.#n.verification_uri_complete}get expires_in(){return Math.max.apply(null,[this.#k-g(),0])}expired(){return 0===this.expires_in}[d.custom](){return`${this.constructor.name} ${d(this.#n,{depth:1/0,colors:process.stdout.isTTY,compact:!1,sorted:!0})}`}}a.exports=h},72402:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.createLocalJWKSet=b.LocalJWKSet=b.isJWKSLike=void 0;let d=c(80518),e=c(69817),f=c(16217);function g(a){return a&&"object"==typeof a&&Array.isArray(a.keys)&&a.keys.every(h)}function h(a){return(0,f.default)(a)}b.isJWKSLike=g;class i{constructor(a){if(this._cached=new WeakMap,!g(a))throw new e.JWKSInvalid("JSON Web Key Set malformed");this._jwks=function(a){return"function"==typeof structuredClone?structuredClone(a):JSON.parse(JSON.stringify(a))}(a)}async getKey(a,b){let{alg:c,kid:d}={...a,...null==b?void 0:b.header},f=function(a){switch("string"==typeof a&&a.slice(0,2)){case"RS":case"PS":return"RSA";case"ES":return"EC";case"Ed":return"OKP";default:throw new e.JOSENotSupported('Unsupported "alg" value for a JSON Web Key Set')}}(c),g=this._jwks.keys.filter(a=>{let b=f===a.kty;if(b&&"string"==typeof d&&(b=d===a.kid),b&&"string"==typeof a.alg&&(b=c===a.alg),b&&"string"==typeof a.use&&(b="sig"===a.use),b&&Array.isArray(a.key_ops)&&(b=a.key_ops.includes("verify")),b&&"EdDSA"===c&&(b="Ed25519"===a.crv||"Ed448"===a.crv),b)switch(c){case"ES256":b="P-256"===a.crv;break;case"ES256K":b="secp256k1"===a.crv;break;case"ES384":b="P-384"===a.crv;break;case"ES512":b="P-521"===a.crv}return b}),{0:h,length:i}=g;if(0===i)throw new e.JWKSNoMatchingKey;if(1!==i){let a=new e.JWKSMultipleMatchingKeys,{_cached:b}=this;throw a[Symbol.asyncIterator]=async function*(){for(let a of g)try{yield await j(b,a,c)}catch{continue}},a}return j(this._cached,h,c)}}async function j(a,b,c){let f=a.get(b)||a.set(b,{}).get(b);if(void 0===f[c]){let a=await (0,d.importJWK)({...b,ext:!0},c);if(a instanceof Uint8Array||"public"!==a.type)throw new e.JWKSInvalid("JSON Web Key Set members must be public keys");f[c]=a}return f[c]}b.LocalJWKSet=i,b.createLocalJWKSet=function(a){let b=new i(a);return async function(a,c){return b.getKey(a,c)}}},72927:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.isCryptoKey=void 0;let d=c(55511),e=c(28354);b.default=d.webcrypto,b.isCryptoKey=e.types.isCryptoKey?a=>e.types.isCryptoKey(a):a=>!1},72965:(a,b,c)=>{"use strict";c.d(b,{Am:()=>f,Wx:()=>g});var d=c(46493),e=c(35071);function f(a){return new i(a)}function g(a,b){return`${a[e.E]}_${b.join("_")}_unique`}class h{constructor(a,b){this.name=b,this.columns=a}static [d.i]="PgUniqueConstraintBuilder";columns;nullsNotDistinctConfig=!1;nullsNotDistinct(){return this.nullsNotDistinctConfig=!0,this}build(a){return new j(a,this.columns,this.nullsNotDistinctConfig,this.name)}}class i{static [d.i]="PgUniqueOnConstraintBuilder";name;constructor(a){this.name=a}on(...a){return new h(a,this.name)}}class j{constructor(a,b,c,d){this.table=a,this.columns=b,this.name=d??g(this.table,this.columns.map(a=>a.name)),this.nullsNotDistinct=c}static [d.i]="PgUniqueConstraint";columns;name;nullsNotDistinct=!1;getName(){return this.name}}},74855:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.concatKdf=b.lengthAndInput=b.uint32be=b.uint64be=b.p2s=b.concat=b.decoder=b.encoder=void 0;let d=c(28162);function e(...a){let b=new Uint8Array(a.reduce((a,{length:b})=>a+b,0)),c=0;return a.forEach(a=>{b.set(a,c),c+=a.length}),b}function f(a,b,c){if(b<0||b>=0x100000000)throw RangeError(`value must be >= 0 and <= ${0x100000000-1}. Received ${b}`);a.set([b>>>24,b>>>16,b>>>8,255&b],c)}function g(a){let b=new Uint8Array(4);return f(b,a),b}b.encoder=new TextEncoder,b.decoder=new TextDecoder,b.concat=e,b.p2s=function(a,c){return e(b.encoder.encode(a),new Uint8Array([0]),c)},b.uint64be=function(a){let b=Math.floor(a/0x100000000),c=new Uint8Array(8);return f(c,b,0),f(c,a%0x100000000,4),c},b.uint32be=g,b.lengthAndInput=function(a){return e(g(a.length),a)},b.concatKdf=async function(a,b,c){let e=Math.ceil((b>>3)/32),f=new Uint8Array(32*e);for(let b=0;b<e;b++){let e=new Uint8Array(4+a.length+c.length);e.set(g(b+1)),e.set(a,4),e.set(c,4+a.length),f.set(await (0,d.default)("sha256",e),32*b)}return f.slice(0,b>>3)}},75598:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.ecdhAllowed=b.generateEpk=b.deriveKey=void 0;let d=c(55511),e=c(28354),f=c(69558),g=c(74855),h=c(69817),i=c(72927),j=c(69978),k=c(25066),l=c(94415),m=c(89722),n=(0,e.promisify)(d.generateKeyPair);b.deriveKey=async function(a,b,c,e,f=new Uint8Array(0),h=new Uint8Array(0)){let n,o;if((0,i.isCryptoKey)(a))(0,j.checkEncCryptoKey)(a,"ECDH"),n=d.KeyObject.from(a);else if((0,k.default)(a))n=a;else throw TypeError((0,l.default)(a,...m.types));if((0,i.isCryptoKey)(b))(0,j.checkEncCryptoKey)(b,"ECDH","deriveBits"),o=d.KeyObject.from(b);else if((0,k.default)(b))o=b;else throw TypeError((0,l.default)(b,...m.types));let p=(0,g.concat)((0,g.lengthAndInput)(g.encoder.encode(c)),(0,g.lengthAndInput)(f),(0,g.lengthAndInput)(h),(0,g.uint32be)(e)),q=(0,d.diffieHellman)({privateKey:o,publicKey:n});return(0,g.concatKdf)(q,e,p)},b.generateEpk=async function(a){let b;if((0,i.isCryptoKey)(a))b=d.KeyObject.from(a);else if((0,k.default)(a))b=a;else throw TypeError((0,l.default)(a,...m.types));switch(b.asymmetricKeyType){case"x25519":return n("x25519");case"x448":return n("x448");case"ec":return n("ec",{namedCurve:(0,f.default)(b)});default:throw new h.JOSENotSupported("Invalid or unsupported EPK")}},b.ecdhAllowed=a=>["P-256","P-384","P-521","X25519","X448"].includes((0,f.default)(a))},75783:(a,b)=>{"use strict";b.A=function(a){return{id:"google",name:"Google",type:"oauth",wellKnown:"https://accounts.google.com/.well-known/openid-configuration",authorization:{params:{scope:"openid email profile"}},idToken:!0,checks:["pkce","state"],profile:a=>({id:a.sub,name:a.name,email:a.email,image:a.picture}),style:{logo:"/google.svg",bg:"#fff",text:"#000"},options:a}}},76586:(a,b,c)=>{"use strict";let d;Object.defineProperty(b,"__esModule",{value:!0});let e=c(55511),f=c(94211);"function"!=typeof e.hkdf||process.versions.electron||(d=async(...a)=>new Promise((b,c)=>{e.hkdf(...a,(a,d)=>{a?c(a):b(new Uint8Array(d))})})),b.default=async(a,b,c,e,g)=>(d||f.default)(a,b,c,e,g)},77356:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generalDecrypt=void 0;let d=c(55307),e=c(69817),f=c(16217);b.generalDecrypt=async function(a,b,c){if(!(0,f.default)(a))throw new e.JWEInvalid("General JWE must be an object");if(!Array.isArray(a.recipients)||!a.recipients.every(f.default))throw new e.JWEInvalid("JWE Recipients missing or incorrect type");if(!a.recipients.length)throw new e.JWEInvalid("JWE Recipients has no members");for(let e of a.recipients)try{return await (0,d.flattenedDecrypt)({aad:a.aad,ciphertext:a.ciphertext,encrypted_key:e.encrypted_key,header:e.header,iv:a.iv,protected:a.protected,tag:a.tag,unprotected:a.unprotected},b,c)}catch{}throw new e.JWEDecryptionFailed}},77366:(a,b,c)=>{var d=c(35653).default;a.exports=function(a){if(null!=a){var b=a["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],c=0;if(b)return b.call(a);if("function"==typeof a.next)return a;if(!isNaN(a.length))return{next:function(){return a&&c>=a.length&&(a=void 0),{value:a&&a[c++],done:!a}}}}throw TypeError(d(a)+" is not iterable")},a.exports.__esModule=!0,a.exports.default=a.exports},77979:a=>{function b(c){return a.exports=b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},a.exports.__esModule=!0,a.exports.default=a.exports,b(c)}a.exports=b,a.exports.__esModule=!0,a.exports.default=a.exports},78109:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=c(55511).timingSafeEqual},78190:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.createSecret=function(a){var b;let{authOptions:c,url:e}=a;return null!=(b=c.secret)?b:(0,d.createHash)("sha256").update(JSON.stringify({...e,...c})).digest("hex")},b.fromDate=function(a,b=Date.now()){return new Date(b+1e3*a)},b.hashToken=function(a,b){var c;let{provider:e,secret:f}=b;return(0,d.createHash)("sha256").update(`${a}${null!=(c=e.secret)?c:f}`).digest("hex")};var d=c(55511)},78739:a=>{a.exports=function(a){try{return -1!==Function.toString.call(a).indexOf("[native code]")}catch(b){return"function"==typeof a}},a.exports.__esModule=!0,a.exports.default=a.exports},79844:(a,b,c)=>{"use strict";c.d(b,{p:()=>N});var d=c(46493),e=c(53110),f=c(65315),g=c(96176),h=c(90921),i=c(20500),j=c(80296),k=c(20862),l=c(7284),m=c(27017),n=c(41313),o=c(19593);class p{static [d.i]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}authToken;setToken(a){return this.authToken=a,this}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:(0,d.is)(a,g.n)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,d.is)(a,h.w)?a[o.n].selectedFields:(0,d.is)(a,k.Xs)?{}:(0,n.YD)(a),void 0===this.authToken?new r({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}):new r({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}}class q extends i.O{static [d.i]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,n.zN)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(b,c)=>{let e=this.tableName,h=(0,n.zN)(b);if("string"==typeof h&&this.config.joins?.some(a=>a.alias===h))throw Error(`Alias "${h}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof e&&(this.config.fields={[e]:this.config.fields}),"string"==typeof h&&!(0,d.is)(b,k.Xs))){let a=(0,d.is)(b,g.n)?b._.selectedFields:(0,d.is)(b,k.Ss)?b[o.n].selectedFields:b[l.XI.Symbol.Columns];this.config.fields[h]=a}if("function"==typeof c&&(c=c(new Proxy(this.config.fields,new f.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:c,table:b,joinType:a,alias:h}),"string"==typeof h)switch(a){case"left":this.joinsNotNullableMap[h]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[h]=!0;break;case"inner":this.joinsNotNullableMap[h]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[h]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(t()):c;if(!(0,n.DV)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new f.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new f.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new f.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new f.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new g.n(this.getSQL(),this.config.fields,a),new f.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new f.b({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class r extends q{static [d.i]="PgSelect";_prepare(a){let{session:b,config:c,dialect:d,joinsNotNullableMap:e,authToken:f}=this;if(!b)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");return m.k.startActiveSpan("drizzle.prepareQuery",()=>{let g=(0,n.He)(c.fields),h=b.prepareQuery(d.sqlToQuery(this.getSQL()),g,a,!0);return h.joinsNotNullableMap=e,void 0===f?h:h.setToken(f)})}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>m.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}function s(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,n.DV)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,n.XJ)(r,[j.k]);let t=()=>({union:u,unionAll:v,intersect:w,intersectAll:x,except:y,exceptAll:z}),u=s("union",!1),v=s("union",!0),w=s("intersect",!1),x=s("intersect",!0),y=s("except",!1),z=s("except",!0);class A{static [d.i]="PgQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,d.is)(a,e.s)?a:void 0,this.dialectConfig=(0,d.is)(a,e.s)?void 0:a}$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(b)),new Proxy(new g.J(c.getSQL(),c.getSelectedFields(),a,!0),new f.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...a){let b=this;return{select:function(c){return new p({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(a){return new p({fields:a??void 0,session:void 0,dialect:b.getDialect(),distinct:!0})},selectDistinctOn:function(a,c){return new p({fields:c??void 0,session:void 0,dialect:b.getDialect(),distinct:{on:a}})}}}select(a){return new p({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new p({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(a,b){return new p({fields:b??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:a}})}getDialect(){return this.dialect||(this.dialect=new e.s(this.dialectConfig)),this.dialect}}var B=c(67969);class C{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [d.i]="PgUpdateBuilder";authToken;setToken(a){return this.authToken=a,this}set(a){return void 0===this.authToken?new D(this.table,(0,n.q)(this.table,a),this.session,this.dialect,this.withList):new D(this.table,(0,n.q)(this.table,a),this.session,this.dialect,this.withList).setToken(this.authToken)}}class D extends j.k{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]},this.tableName=(0,n.zN)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}static [d.i]="PgUpdate";config;tableName;joinsNotNullableMap;from(a){let b=(0,n.zN)(a);return"string"==typeof b&&(this.joinsNotNullableMap[b]=!0),this.config.from=a,this}getTableLikeFields(a){return(0,d.is)(a,B.mu)?a[l.XI.Symbol.Columns]:(0,d.is)(a,g.n)?a._.selectedFields:a[o.n].selectedFields}createJoin(a){return(b,c)=>{let e=(0,n.zN)(b);if("string"==typeof e&&this.config.joins.some(a=>a.alias===e))throw Error(`Alias "${e}" is already used in this query`);if("function"==typeof c){let a=this.config.from&&!(0,d.is)(this.config.from,k.Xs)?this.getTableLikeFields(this.config.from):void 0;c=c(new Proxy(this.config.table[l.XI.Symbol.Columns],new f.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new f.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:c,table:b,joinType:a,alias:e}),"string"==typeof e)switch(a){case"left":this.joinsNotNullableMap[e]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[e]=!0;break;case"inner":this.joinsNotNullableMap[e]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[e]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}returning(a){if(!a&&(a=Object.assign({},this.config.table[l.XI.Symbol.Columns]),this.config.from)){let b=(0,n.zN)(this.config.from);if("string"==typeof b&&this.config.from&&!(0,d.is)(this.config.from,k.Xs)){let c=this.getTableLikeFields(this.config.from);a[b]=c}for(let b of this.config.joins){let c=(0,n.zN)(b.table);if("string"==typeof c&&!(0,d.is)(b.table,k.Xs)){let d=this.getTableLikeFields(b.table);a[c]=d}}}return this.config.returning=(0,n.He)(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){let b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>this._prepare().execute(a,this.authToken);$dynamic(){return this}}class E{constructor(a,b,c,d,e){this.table=a,this.session=b,this.dialect=c,this.withList=d,this.overridingSystemValue_=e}static [d.i]="PgInsertBuilder";authToken;setToken(a){return this.authToken=a,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[l.XI.Symbol.Columns];for(let e of Object.keys(a)){let f=a[e];b[e]=(0,d.is)(f,k.Xs)?f:new k.Iw(f,c[e])}return b});return void 0===this.authToken?new F(this.table,b,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_):new F(this.table,b,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(a){let b="function"==typeof a?a(new A):a;if(!(0,d.is)(b,k.Xs)&&!(0,n.DV)(this.table[l.e],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new F(this.table,b,this.session,this.dialect,this.withList,!0)}}class F extends j.k{constructor(a,b,c,d,e,f,g){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f,overridingSystemValue_:g}}static [d.i]="PgInsert";config;returning(a=this.config.table[l.XI.Symbol.Columns]){return this.config.returning=(0,n.He)(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=(0,k.ll)`do nothing`;else{let b="";b=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target));let c=a.where?(0,k.ll)` where ${a.where}`:void 0;this.config.onConflict=(0,k.ll)`(${k.ll.raw(b)})${c} do nothing`}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let b=a.where?(0,k.ll)` where ${a.where}`:void 0,c=a.targetWhere?(0,k.ll)` where ${a.targetWhere}`:void 0,d=a.setWhere?(0,k.ll)` where ${a.setWhere}`:void 0,e=this.dialect.buildUpdateSet(this.config.table,(0,n.q)(this.config.table,a.set)),f="";return f=Array.isArray(a.target)?a.target.map(a=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(a))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(a.target)),this.config.onConflict=(0,k.ll)`(${k.ll.raw(f)})${c} do update set ${e}${b}${d}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return m.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>m.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));$dynamic(){return this}}class G extends j.k{constructor(a,b,c,d){super(),this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [d.i]="PgDelete";config;where(a){return this.config.where=a,this}returning(a=this.config.table[l.XI.Symbol.Columns]){return this.config.returning=(0,n.He)(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return m.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>m.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken));$dynamic(){return this}}class H extends k.Xs{constructor(a){super(H.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=H.buildCount(a.source,a.filters)}sql;token;static [d.i]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(a,b){return(0,k.ll)`(select count(*) from ${a}${k.ll.raw(" where ").if(b)}${b})`}static buildCount(a,b){return(0,k.ll)`select count(*) as count from ${a}${k.ll.raw(" where ").if(b)}${b};`}setToken(a){this.token=a}then(a,b){return Promise.resolve(this.session.count(this.sql,this.token)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}var I=c(6194);class J{constructor(a,b,c,d,e,f,g){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g}static [d.i]="PgRelationalQueryBuilder";findMany(a){return new K(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return new K(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class K extends j.k{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [d.i]="PgRelationalQuery";_prepare(a){return m.k.startActiveSpan("drizzle.prepareQuery",()=>{let{query:b,builtQuery:c}=this._toSQL();return this.session.prepareQuery(c,void 0,a,!0,(a,c)=>{let d=a.map(a=>(0,I.I$)(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})})}prepare(a){return this._prepare(a)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let a=this._getQuery(),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(a){return this.authToken=a,this}execute(){return m.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}}class L extends j.k{constructor(a,b,c,d){super(),this.execute=a,this.sql=b,this.query=c,this.mapBatchResult=d}static [d.i]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class M extends j.k{constructor(a,b,c){super(),this.session=b,this.dialect=c,this.config={view:a}}static [d.i]="PgRefreshMaterializedView";config;concurrently(){if(void 0!==this.config.withNoData)throw Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(void 0!==this.config.concurrently)throw Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a){return m.k.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,a,!0))}prepare(a){return this._prepare(a)}authToken;setToken(a){return this.authToken=a,this}execute=a=>m.k.startActiveSpan("drizzle.operation",()=>this._prepare().execute(a,this.authToken))}class N{constructor(a,b,c){if(this.dialect=a,this.session=b,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap,session:b}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:b},this.query={},this._.schema)for(let[d,e]of Object.entries(this._.schema))this.query[d]=new J(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b)}static [d.i]="PgDatabase";query;$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(new A(b.dialect))),new Proxy(new g.J(c.getSQL(),c.getSelectedFields(),a,!0),new f.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}$count(a,b){return new H({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new p({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new p({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},selectDistinctOn:function(c,d){return new p({fields:d??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:{on:c}})},update:function(c){return new C(c,b.session,b.dialect,a)},insert:function(c){return new E(c,b.session,b.dialect,a)},delete:function(c){return new G(c,b.session,b.dialect,a)}}}select(a){return new p({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new p({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(a,b){return new p({fields:b??void 0,session:this.session,dialect:this.dialect,distinct:{on:a}})}update(a){return new C(a,this.session,this.dialect)}insert(a){return new E(a,this.session,this.dialect)}delete(a){return new G(a,this.session,this.dialect)}refreshMaterializedView(a){return new M(a,this.session,this.dialect)}authToken;execute(a){let b="string"==typeof a?k.ll.raw(a):a.getSQL(),c=this.dialect.sqlToQuery(b),d=this.session.prepareQuery(c,void 0,void 0,!1);return new L(()=>d.execute(void 0,this.authToken),b,c,a=>d.mapResult(a,!0))}transaction(a,b){return this.session.transaction(a,b)}}},80228:(a,b,c)=>{"use strict";c.d(b,{V:()=>e});var d=c(46493);class e{constructor(a,b){this.table=a,this.config=b,this.name=b.name,this.keyAsName=b.keyAsName,this.notNull=b.notNull,this.default=b.default,this.defaultFn=b.defaultFn,this.onUpdateFn=b.onUpdateFn,this.hasDefault=b.hasDefault,this.primary=b.primaryKey,this.isUnique=b.isUnique,this.uniqueName=b.uniqueName,this.uniqueType=b.uniqueType,this.dataType=b.dataType,this.columnType=b.columnType,this.generated=b.generated,this.generatedIdentity=b.generatedIdentity}static [d.i]="Column";name;keyAsName;primary;notNull;default;defaultFn;onUpdateFn;hasDefault;isUnique;uniqueName;uniqueType;dataType;columnType;enumValues=void 0;generated=void 0;generatedIdentity=void 0;config;mapFromDriverValue(a){return a}mapToDriverValue(a){return a}shouldDisableInsert(){return void 0!==this.config.generated&&"byDefault"!==this.config.generated.type}}},80296:(a,b,c)=>{"use strict";c.d(b,{k:()=>e});var d=c(46493);class e{static [d.i]="QueryPromise";[Symbol.toStringTag]="QueryPromise";catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}then(a,b){return this.execute().then(a,b)}}},80518:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.importJWK=b.importPKCS8=b.importX509=b.importSPKI=void 0;let d=c(67040),e=c(6683),f=c(67310),g=c(69817),h=c(16217);b.importSPKI=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PUBLIC KEY-----"))throw TypeError('"spki" must be SPKI formatted string');return(0,e.fromSPKI)(a,b,c)},b.importX509=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN CERTIFICATE-----"))throw TypeError('"x509" must be X.509 formatted string');return(0,e.fromX509)(a,b,c)},b.importPKCS8=async function(a,b,c){if("string"!=typeof a||0!==a.indexOf("-----BEGIN PRIVATE KEY-----"))throw TypeError('"pkcs8" must be PKCS#8 formatted string');return(0,e.fromPKCS8)(a,b,c)},b.importJWK=async function(a,b,c){var e;if(!(0,h.default)(a))throw TypeError("JWK must be an object");switch(b||(b=a.alg),a.kty){case"oct":if("string"!=typeof a.k||!a.k)throw TypeError('missing "k" (Key Value) Parameter value');if(null!=c||(c=!0!==a.ext),c)return(0,f.default)({...a,alg:b,ext:null!=(e=a.ext)&&e});return(0,d.decode)(a.k);case"RSA":if(void 0!==a.oth)throw new g.JOSENotSupported('RSA JWK "oth" (Other Primes Info) Parameter value is not supported');case"EC":case"OKP":return(0,f.default)({...a,alg:b});default:throw new g.JOSENotSupported('Unsupported "kty" (Key Type) Parameter value')}}},80857:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.init=r;var e=c(55511),f=d(c(90049)),g=c(65192),h=d(c(11665)),i=c(78190),j=q(c(91661)),k=q(c(47025)),l=c(57583),m=c(18285),n=c(23092),o=d(c(98278));function p(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(p=function(a){return a?c:b})(a)}function q(a,b){if(!b&&a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=p(b);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&({}).hasOwnProperty.call(a,f)){var g=e?Object.getOwnPropertyDescriptor(a,f):null;g&&(g.get||g.set)?Object.defineProperty(d,f,g):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}async function r({authOptions:a,providerId:b,action:c,origin:d,cookies:p,callbackUrl:q,csrfToken:r,isPost:s}){var t,u;let v=(0,o.default)(d),w=(0,i.createSecret)({authOptions:a,url:v}),{providers:x,provider:y}=(0,h.default)({providers:a.providers,url:v,providerId:b}),z={debug:!1,pages:{},theme:{colorScheme:"auto",logo:"",brandColor:"",buttonText:""},...a,url:v,action:c,provider:y,cookies:{...j.defaultCookies(null!=(t=a.useSecureCookies)?t:v.base.startsWith("https://")),...a.cookies},secret:w,providers:x,session:{strategy:a.adapter?"database":"jwt",maxAge:2592e3,updateAge:86400,generateSessionToken:()=>{var a;return null!=(a=null===e.randomUUID||void 0===e.randomUUID?void 0:(0,e.randomUUID)())?a:(0,e.randomBytes)(32).toString("hex")},...a.session},jwt:{secret:w,maxAge:2592e3,encode:k.encode,decode:k.decode,...a.jwt},events:(0,g.eventsErrorHandler)(null!=(u=a.events)?u:{},f.default),adapter:(0,g.adapterErrorHandler)(a.adapter,f.default),callbacks:{...l.defaultCallbacks,...a.callbacks},logger:f.default,callbackUrl:v.origin},A=[],{csrfToken:B,cookie:C,csrfTokenVerified:D}=(0,m.createCSRFToken)({options:z,cookieValue:null==p?void 0:p[z.cookies.csrfToken.name],isPost:s,bodyValue:r});z.csrfToken=B,z.csrfTokenVerified=D,C&&A.push({name:z.cookies.csrfToken.name,value:C,options:z.cookies.csrfToken.options});let{callbackUrl:E,callbackUrlCookie:F}=await (0,n.createCallbackUrl)({options:z,cookieValue:null==p?void 0:p[z.cookies.callbackUrl.name],paramValue:q});return z.callbackUrl=E,F&&A.push({name:z.cookies.callbackUrl.name,value:F,options:z.cookies.callbackUrl.options}),{options:z,cookies:A}}},81365:(a,b,c)=>{let d=c(48476),e=c(9447),{RPError:f}=c(86915),{assertIssuerConfiguration:g}=c(8172),h=c(15366),{keystores:i}=c(24687),j=c(32347),k=c(81409),l=new WeakMap,m=new WeakMap,n=a=>(m.has(a)||m.set(a,new e({max:100})),m.get(a));async function o(a=!1){g(this,"jwks_uri");let b=i.get(this),c=n(this);return a||!b?(l.has(this)||(c.reset(),l.set(this,(async()=>{let a=j(await k.call(this,{method:"GET",responseType:"json",url:this.jwks_uri,headers:{Accept:"application/json, application/jwk-set+json"}}).finally(()=>{l.delete(this)})),b=h.fromJWKS(a,{onlyPublic:!0});return c.set("throttle",!0,6e4),i.set(this,b),b})())),l.get(this)):b}async function p({kid:a,kty:b,alg:c,use:e},{allowMulti:g=!1}={}){let h=n(this),i={kid:a,kty:b,alg:c,use:e},j=d(i,{algorithm:"sha256",ignoreUnknown:!0,unorderedArrays:!0,unorderedSets:!0,respectType:!1}),k=h.get(j)||h.get("throttle"),l=await o.call(this,!k),m=l.all(i);if(delete i.use,0===m.length)throw new f({printf:["no valid key found in issuer's jwks_uri for key parameters %j",i],jwks:l});if(!g&&m.length>1&&!a)throw new f({printf:["multiple matching keys found in issuer's jwks_uri for key parameters %j, kid must be provided in this case",i],jwks:l});return h.set(j,!0),m}a.exports.queryKeyStore=p,a.exports.keystore=o},81409:(a,b,c)=>{let d,e=c(12412),f=c(11723),g=c(81630),h=c(55591),{once:i}=c(94735),{URL:j}=c(79551),k=c(9447),l=c(63667),{RPError:m}=c(86915),n=c(65191),{deep:o}=c(45816),{HTTP_OPTIONS:p}=c(60974),q=/^[\x21\x23-\x5B\x5D-\x7E]+$/,r=["agent","ca","cert","crl","headers","key","lookup","passphrase","pfx","timeout"],s=(a,b)=>{d=o({},a.length?n(b,...a):b,d)};function t(a,b,c){c&&(a.removeHeader("content-type"),a.setHeader("content-type",c)),b&&(a.removeHeader("content-length"),a.setHeader("content-length",Buffer.byteLength(b)),a.write(b)),a.end()}s([],{headers:{"User-Agent":`${l.name}/${l.version} (${l.homepage})`,"Accept-Encoding":"identity"},timeout:3500});let u=new k({max:100});a.exports=async function(a,{accessToken:b,mTLS:c=!1,DPoP:k}={}){let l,s,v,w,x,y,z;try{l=new j(a.url),delete a.url,e(/^(https?:)$/.test(l.protocol))}catch(a){throw TypeError("only valid absolute URLs can be requested")}let A=this[p],B=a,C=`${l.origin}${l.pathname}`;if(k&&"dpopProof"in this&&(B.headers=B.headers||{},B.headers.DPoP=await this.dpopProof({htu:`${l.origin}${l.pathname}`,htm:a.method||"GET",nonce:u.get(C)},k,b)),A&&(s=n(A.call(this,l,o({},B,d)),...r)),B=o({},s,B,d),c&&!B.pfx&&!(B.key&&B.cert))throw TypeError("mutual-TLS certificate and key not set");if(B.searchParams)for(let[a,b]of Object.entries(B.searchParams))l.searchParams.delete(a),l.searchParams.set(a,b);for(let[a,b]of({form:w,responseType:v,json:x,body:y,...B}=B,Object.entries(B.headers||{})))void 0===b&&delete B.headers[a];let D=("https:"===l.protocol?h.request:g.request)(l.href,B);return(async()=>{if(x?t(D,JSON.stringify(x),"application/json"):w?t(D,f.stringify(w),"application/x-www-form-urlencoded"):y?t(D,y):t(D),[z]=await Promise.race([i(D,"response"),i(D,"timeout")]),!z)throw D.destroy(),new m(`outgoing request timed out after ${B.timeout}ms`);let a=[];for await(let b of z)a.push(b);if(a.length)switch(v){case"json":Object.defineProperty(z,"body",{get(){let b=Buffer.concat(a);try{b=JSON.parse(b)}catch(a){throw Object.defineProperty(a,"response",{value:z}),a}finally{Object.defineProperty(z,"body",{value:b,configurable:!0})}return b},configurable:!0});break;case void 0:case"buffer":Object.defineProperty(z,"body",{get(){let b=Buffer.concat(a);return Object.defineProperty(z,"body",{value:b,configurable:!0}),b},configurable:!0});break;default:throw TypeError("unsupported responseType request option")}return z})().catch(a=>{throw z&&Object.defineProperty(a,"response",{value:z}),a}).finally(()=>{let a=z&&z.headers["dpop-nonce"];a&&q.test(a)&&u.set(C,a)})},a.exports.setDefaults=s.bind(void 0,r)},82043:(a,b,c)=>{"use strict";c.d(b,{_:()=>cJ});var d=c(46493),e=c(65315),f=c(20862),g=c(96176);class h extends f.Xs{constructor(a){super(h.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.mapWith(Number),this.session=a.session,this.sql=h.buildCount(a.source,a.filters)}sql;static [d.i]="MySqlCountBuilder";[Symbol.toStringTag]="MySqlCountBuilder";session;static buildEmbeddedCount(a,b){return(0,f.ll)`(select count(*) from ${a}${f.ll.raw(" where ").if(b)}${b})`}static buildCount(a,b){return(0,f.ll)`select count(*) as count from ${a}${f.ll.raw(" where ").if(b)}${b}`}then(a,b){return Promise.resolve(this.session.count(this.sql)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}var i=c(92428),j=c(20197),k=c(80228),l=c(87593),m=c(48689),n=c(6194),o=c(7284),p=c(41313),q=c(19593),r=c(98046),s=c(35071);class t{static [d.i]="MySqlForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=a,this}onDelete(a){return this._onDelete=a,this}build(a){return new u(a,this)}}class u{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [d.i]="MySqlForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[s.E],...d,c[0].table[s.E],...e];return a??`${f.join("_")}_fk`}}function v(a,b){return`${a[s.E]}_${b.join("_")}_unique`}class w{constructor(a,b){this.name=b,this.columns=a}static [d.i]=null;columns;build(a){return new y(a,this.columns,this.name)}}class x{static [d.i]=null;name;constructor(a){this.name=a}on(...a){return new w(a,this.name)}}class y{constructor(a,b,c){this.table=a,this.columns=b,this.name=c??v(this.table,this.columns.map(a=>a.name))}static [d.i]=null;columns;name;nullsNotDistinct=!1;getName(){return this.name}}class z extends r.Q{static [d.i]="MySqlColumnBuilder";foreignKeyConfigs=[];references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a){return this.config.isUnique=!0,this.config.uniqueName=a,this}generatedAlwaysAs(a,b){return this.config.generated={as:a,type:"always",mode:b?.mode??"virtual"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>((c,d)=>{let e=new t(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)})(c,d))}}class A extends k.V{constructor(a,b){b.uniqueName||(b.uniqueName=v(a,[b.name])),super(a,b),this.table=a}static [d.i]="MySqlColumn"}class B extends z{static [d.i]="MySqlColumnBuilderWithAutoIncrement";constructor(a,b,c){super(a,b,c),this.config.autoIncrement=!1}autoincrement(){return this.config.autoIncrement=!0,this.config.hasDefault=!0,this}}class C extends A{static [d.i]="MySqlColumnWithAutoIncrement";autoIncrement=this.config.autoIncrement}class D extends B{static [d.i]="MySqlBigInt53Builder";constructor(a,b=!1){super(a,"number","MySqlBigInt53"),this.config.unsigned=b}build(a){return new E(a,this.config)}}class E extends C{static [d.i]="MySqlBigInt53";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"number"==typeof a?a:Number(a)}}class F extends B{static [d.i]="MySqlBigInt64Builder";constructor(a,b=!1){super(a,"bigint","MySqlBigInt64"),this.config.unsigned=b}build(a){return new G(a,this.config)}}class G extends C{static [d.i]="MySqlBigInt64";getSQLType(){return`bigint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return BigInt(a)}}function H(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return"number"===d.mode?new D(c,d.unsigned):new F(c,d.unsigned)}class I extends z{static [d.i]="MySqlBinaryBuilder";constructor(a,b){super(a,"string","MySqlBinary"),this.config.length=b}build(a){return new J(a,this.config)}}class J extends A{static [d.i]="MySqlBinary";length=this.config.length;getSQLType(){return void 0===this.length?"binary":`binary(${this.length})`}}function K(a,b={}){let{name:c,config:d}=(0,p.Ll)(a,b);return new I(c,d.length)}class L extends z{static [d.i]="MySqlBooleanBuilder";constructor(a){super(a,"boolean","MySqlBoolean")}build(a){return new M(a,this.config)}}class M extends A{static [d.i]="MySqlBoolean";getSQLType(){return"boolean"}mapFromDriverValue(a){return"boolean"==typeof a?a:1===a}}function N(a){return new L(a??"")}class O extends z{static [d.i]="MySqlCharBuilder";constructor(a,b){super(a,"string","MySqlChar"),this.config.length=b.length,this.config.enum=b.enum}build(a){return new P(a,this.config)}}class P extends A{static [d.i]="MySqlChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"char":`char(${this.length})`}}function Q(a,b={}){let{name:c,config:d}=(0,p.Ll)(a,b);return new O(c,d)}class R extends z{static [d.i]="MySqlCustomColumnBuilder";constructor(a,b,c){super(a,"custom","MySqlCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new S(a,this.config)}}class S extends A{static [d.i]="MySqlCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function T(a){return(b,c)=>{let{name:d,config:e}=(0,p.Ll)(b,c);return new R(d,e,a)}}class U extends z{static [d.i]="MySqlDateBuilder";constructor(a){super(a,"date","MySqlDate")}build(a){return new V(a,this.config)}}class V extends A{static [d.i]="MySqlDate";constructor(a,b){super(a,b)}getSQLType(){return"date"}mapFromDriverValue(a){return new Date(a)}}class W extends z{static [d.i]="MySqlDateStringBuilder";constructor(a){super(a,"string","MySqlDateString")}build(a){return new X(a,this.config)}}class X extends A{static [d.i]="MySqlDateString";constructor(a,b){super(a,b)}getSQLType(){return"date"}}function Y(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return d?.mode==="string"?new W(c):new U(c)}class Z extends z{static [d.i]="MySqlDateTimeBuilder";constructor(a,b){super(a,"date","MySqlDateTime"),this.config.fsp=b?.fsp}build(a){return new $(a,this.config)}}class $ extends A{static [d.i]="MySqlDateTime";fsp;constructor(a,b){super(a,b),this.fsp=b.fsp}getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`datetime${a}`}mapToDriverValue(a){return a.toISOString().replace("T"," ").replace("Z","")}mapFromDriverValue(a){return new Date(a.replace(" ","T")+"Z")}}class _ extends z{static [d.i]="MySqlDateTimeStringBuilder";constructor(a,b){super(a,"string","MySqlDateTimeString"),this.config.fsp=b?.fsp}build(a){return new aa(a,this.config)}}class aa extends A{static [d.i]="MySqlDateTimeString";fsp;constructor(a,b){super(a,b),this.fsp=b.fsp}getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`datetime${a}`}}function ab(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return d?.mode==="string"?new _(c,d):new Z(c,d)}class ac extends B{static [d.i]="MySqlDecimalBuilder";constructor(a,b){super(a,"string","MySqlDecimal"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new ad(a,this.config)}}class ad extends C{static [d.i]="MySqlDecimal";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`decimal(${this.precision},${this.scale})`:void 0===this.precision?a+="decimal":a+=`decimal(${this.precision})`,a="decimal(10,0)"===a||"decimal(10)"===a?"decimal":a,this.unsigned?`${a} unsigned`:a}}function ae(a,b={}){let{name:c,config:d}=(0,p.Ll)(a,b);return new ac(c,d)}class af extends B{static [d.i]="MySqlDoubleBuilder";constructor(a,b){super(a,"number","MySqlDouble"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new ag(a,this.config)}}class ag extends C{static [d.i]="MySqlDouble";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`double(${this.precision},${this.scale})`:void 0===this.precision?a+="double":a+=`double(${this.precision})`,this.unsigned?`${a} unsigned`:a}}function ah(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new af(c,d)}class ai extends z{static [d.i]="MySqlEnumColumnBuilder";constructor(a,b){super(a,"string","MySqlEnumColumn"),this.config.enumValues=b}build(a){return new aj(a,this.config)}}class aj extends A{static [d.i]="MySqlEnumColumn";enumValues=this.config.enumValues;getSQLType(){return`enum(${this.enumValues.map(a=>`'${a}'`).join(",")})`}}function ak(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);if(0===d.length)throw Error(`You have an empty array for "${c}" enum values`);return new ai(c,d)}class al extends B{static [d.i]="MySqlFloatBuilder";constructor(a,b){super(a,"number","MySqlFloat"),this.config.precision=b?.precision,this.config.scale=b?.scale,this.config.unsigned=b?.unsigned}build(a){return new am(a,this.config)}}class am extends C{static [d.i]="MySqlFloat";precision=this.config.precision;scale=this.config.scale;unsigned=this.config.unsigned;getSQLType(){let a="";return void 0!==this.precision&&void 0!==this.scale?a+=`float(${this.precision},${this.scale})`:void 0===this.precision?a+="float":a+=`float(${this.precision})`,this.unsigned?`${a} unsigned`:a}}function an(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new al(c,d)}class ao extends B{static [d.i]="MySqlIntBuilder";constructor(a,b){super(a,"number","MySqlInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new ap(a,this.config)}}class ap extends C{static [d.i]="MySqlInt";getSQLType(){return`int${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function aq(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new ao(c,d)}class ar extends z{static [d.i]="MySqlJsonBuilder";constructor(a){super(a,"json","MySqlJson")}build(a){return new as(a,this.config)}}class as extends A{static [d.i]="MySqlJson";getSQLType(){return"json"}mapToDriverValue(a){return JSON.stringify(a)}}function at(a){return new ar(a??"")}class au extends B{static [d.i]="MySqlMediumIntBuilder";constructor(a,b){super(a,"number","MySqlMediumInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new av(a,this.config)}}class av extends C{static [d.i]="MySqlMediumInt";getSQLType(){return`mediumint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function aw(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new au(c,d)}class ax extends B{static [d.i]="MySqlRealBuilder";constructor(a,b){super(a,"number","MySqlReal"),this.config.precision=b?.precision,this.config.scale=b?.scale}build(a){return new ay(a,this.config)}}class ay extends C{static [d.i]="MySqlReal";precision=this.config.precision;scale=this.config.scale;getSQLType(){return void 0!==this.precision&&void 0!==this.scale?`real(${this.precision}, ${this.scale})`:void 0===this.precision?"real":`real(${this.precision})`}}function az(a,b={}){let{name:c,config:d}=(0,p.Ll)(a,b);return new ax(c,d)}class aA extends B{static [d.i]="MySqlSerialBuilder";constructor(a){super(a,"number","MySqlSerial"),this.config.hasDefault=!0,this.config.autoIncrement=!0}build(a){return new aB(a,this.config)}}class aB extends C{static [d.i]="MySqlSerial";getSQLType(){return"serial"}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function aC(a){return new aA(a??"")}class aD extends B{static [d.i]="MySqlSmallIntBuilder";constructor(a,b){super(a,"number","MySqlSmallInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new aE(a,this.config)}}class aE extends C{static [d.i]="MySqlSmallInt";getSQLType(){return`smallint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function aF(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new aD(c,d)}class aG extends z{static [d.i]="MySqlTextBuilder";constructor(a,b,c){super(a,"string","MySqlText"),this.config.textType=b,this.config.enumValues=c.enum}build(a){return new aH(a,this.config)}}class aH extends A{static [d.i]="MySqlText";textType=this.config.textType;enumValues=this.config.enumValues;getSQLType(){return this.textType}}function aI(a,b={}){let{name:c,config:d}=(0,p.Ll)(a,b);return new aG(c,"text",d)}class aJ extends z{static [d.i]="MySqlTimeBuilder";constructor(a,b){super(a,"string","MySqlTime"),this.config.fsp=b?.fsp}build(a){return new aK(a,this.config)}}class aK extends A{static [d.i]="MySqlTime";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`time${a}`}}function aL(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new aJ(c,d)}class aM extends z{static [d.i]="MySqlDateColumnBuilder";defaultNow(){return this.default((0,f.ll)`(now())`)}onUpdateNow(){return this.config.hasOnUpdateNow=!0,this.config.hasDefault=!0,this}}class aN extends A{static [d.i]="MySqlDateColumn";hasOnUpdateNow=this.config.hasOnUpdateNow}class aO extends aM{static [d.i]="MySqlTimestampBuilder";constructor(a,b){super(a,"date","MySqlTimestamp"),this.config.fsp=b?.fsp}build(a){return new aP(a,this.config)}}class aP extends aN{static [d.i]="MySqlTimestamp";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`timestamp${a}`}mapFromDriverValue(a){return new Date(a+"+0000")}mapToDriverValue(a){return a.toISOString().slice(0,-1).replace("T"," ")}}class aQ extends aM{static [d.i]="MySqlTimestampStringBuilder";constructor(a,b){super(a,"string","MySqlTimestampString"),this.config.fsp=b?.fsp}build(a){return new aR(a,this.config)}}class aR extends aN{static [d.i]="MySqlTimestampString";fsp=this.config.fsp;getSQLType(){let a=void 0===this.fsp?"":`(${this.fsp})`;return`timestamp${a}`}}function aS(a,b={}){let{name:c,config:d}=(0,p.Ll)(a,b);return d?.mode==="string"?new aQ(c,d):new aO(c,d)}class aT extends B{static [d.i]="MySqlTinyIntBuilder";constructor(a,b){super(a,"number","MySqlTinyInt"),this.config.unsigned=!!b&&b.unsigned}build(a){return new aU(a,this.config)}}class aU extends C{static [d.i]="MySqlTinyInt";getSQLType(){return`tinyint${this.config.unsigned?" unsigned":""}`}mapFromDriverValue(a){return"string"==typeof a?Number(a):a}}function aV(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new aT(c,d)}class aW extends z{static [d.i]="MySqlVarBinaryBuilder";constructor(a,b){super(a,"string","MySqlVarBinary"),this.config.length=b?.length}build(a){return new aX(a,this.config)}}class aX extends A{static [d.i]="MySqlVarBinary";length=this.config.length;getSQLType(){return void 0===this.length?"varbinary":`varbinary(${this.length})`}}function aY(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new aW(c,d)}class aZ extends z{static [d.i]="MySqlVarCharBuilder";constructor(a,b){super(a,"string","MySqlVarChar"),this.config.length=b.length,this.config.enum=b.enum}build(a){return new a$(a,this.config)}}class a$ extends A{static [d.i]="MySqlVarChar";length=this.config.length;enumValues=this.config.enum;getSQLType(){return void 0===this.length?"varchar":`varchar(${this.length})`}}function a_(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return new aZ(c,d)}class a0 extends z{static [d.i]="MySqlYearBuilder";constructor(a){super(a,"number","MySqlYear")}build(a){return new a1(a,this.config)}}class a1 extends A{static [d.i]="MySqlYear";getSQLType(){return"year"}}function a2(a){return new a0(a??"")}let a3=Symbol.for("drizzle:MySqlInlineForeignKeys");class a4 extends o.XI{static [d.i]="MySqlTable";static Symbol=Object.assign({},o.XI.Symbol,{InlineForeignKeys:a3});[o.XI.Symbol.Columns];[a3]=[];[o.XI.Symbol.ExtraConfigBuilder]=void 0}let a5=(a,b,c)=>(function(a,b,c,d,e=a){let f=new a4(a,d,e),g=Object.fromEntries(Object.entries("function"==typeof b?b({bigint:H,binary:K,boolean:N,char:Q,customType:T,date:Y,datetime:ab,decimal:ae,double:ah,mysqlEnum:ak,float:an,int:aq,json:at,mediumint:aw,real:az,serial:aC,smallint:aF,text:aI,time:aL,timestamp:aS,tinyint:aV,varbinary:aY,varchar:a_,year:a2}):b).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[a3].push(...b.buildForeignKeys(c,f)),[a,c]})),h=Object.assign(f,g);return h[o.XI.Symbol.Columns]=g,h[o.XI.Symbol.ExtraConfigColumns]=g,c&&(h[a4.Symbol.ExtraConfigBuilder]=c),h})(a,b,c,void 0,a);class a6 extends f.Ss{static [d.i]="MySqlViewBase"}class a7{static [d.i]="MySqlDialect";casing;constructor(a){this.casing=new j.Yn(a?.casing)}async migrate(a,b,c){let d=c.migrationsTable??"__drizzle_migrations",e=(0,f.ll)`
			create table if not exists ${f.ll.identifier(d)} (
				id serial primary key,
				hash text not null,
				created_at bigint
			)
		`;await b.execute(e);let g=(await b.all((0,f.ll)`select id, hash, created_at from ${f.ll.identifier(d)} order by created_at desc limit 1`))[0];await b.transaction(async b=>{for(let c of a)if(!g||Number(g.created_at)<c.folderMillis){for(let a of c.sql)await b.execute(f.ll.raw(a));await b.execute((0,f.ll)`insert into ${f.ll.identifier(d)} (\`hash\`, \`created_at\`) values(${c.hash}, ${c.folderMillis})`)}})}escapeName(a){return`\`${a}\``}escapeParam(a){return"?"}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[(0,f.ll)`with `];for(let[c,d]of a.entries())b.push((0,f.ll)`${f.ll.identifier(d._.alias)} as (${d._.sql})`),c<a.length-1&&b.push((0,f.ll)`, `);return b.push((0,f.ll)` `),f.ll.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d,limit:e,orderBy:g}){let h=this.buildWithCTE(d),i=c?(0,f.ll)` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,j=b?(0,f.ll)` where ${b}`:void 0,k=this.buildOrderBy(g),l=this.buildLimit(e);return(0,f.ll)`${h}delete from ${a}${j}${k}${l}${i}`}buildUpdateSet(a,b){let c=a[o.XI.Symbol.Columns],d=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),e=d.length;return f.ll.join(d.flatMap((a,d)=>{let g=c[a],h=b[a]??f.ll.param(g.onUpdateFn(),g),i=(0,f.ll)`${f.ll.identifier(this.casing.getColumnCasing(g))} = ${h}`;return d<e-1?[i,f.ll.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e,limit:g,orderBy:h}){let i=this.buildWithCTE(e),j=this.buildUpdateSet(a,b),k=d?(0,f.ll)` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,l=c?(0,f.ll)` where ${c}`:void 0,m=this.buildOrderBy(h),n=this.buildLimit(g);return(0,f.ll)`${i}update ${a} set ${j}${l}${m}${n}${k}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,e=a.flatMap(({field:a},e)=>{let g=[];if((0,d.is)(a,f.Xs.Aliased)&&a.isSelectionField)g.push(f.ll.identifier(a.fieldAlias));else if((0,d.is)(a,f.Xs.Aliased)||(0,d.is)(a,f.Xs)){let c=(0,d.is)(a,f.Xs.Aliased)?a.sql:a;b?g.push(new f.Xs(c.queryChunks.map(a=>(0,d.is)(a,A)?f.ll.identifier(this.casing.getColumnCasing(a)):a))):g.push(c),(0,d.is)(a,f.Xs.Aliased)&&g.push((0,f.ll)` as ${f.ll.identifier(a.fieldAlias)}`)}else(0,d.is)(a,k.V)&&(b?g.push(f.ll.identifier(this.casing.getColumnCasing(a))):g.push(a));return e<c-1&&g.push((0,f.ll)`, `),g});return f.ll.join(e)}buildLimit(a){return"object"==typeof a||"number"==typeof a&&a>=0?(0,f.ll)` limit ${a}`:void 0}buildOrderBy(a){return a&&a.length>0?(0,f.ll)` order by ${f.ll.join(a,(0,f.ll)`, `)}`:void 0}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:e,having:h,table:i,joins:j,orderBy:l,groupBy:m,limit:n,offset:r,lockingClause:s,distinct:t,setOperators:u}){let v,w=c??(0,p.He)(b);for(let a of w){let b;if((0,d.is)(a.field,k.V)&&(0,o.Io)(a.field.table)!==((0,d.is)(i,g.n)?i._.alias:(0,d.is)(i,a6)?i[q.n].name:(0,d.is)(i,f.Xs)?void 0:(0,o.Io)(i))&&(b=a.field.table,!j?.some(({alias:a})=>a===(b[o.XI.Symbol.IsAlias]?(0,o.Io)(b):b[o.XI.Symbol.BaseName])))){let b=(0,o.Io)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let x=!j||0===j.length,y=this.buildWithCTE(a),z=t?(0,f.ll)` distinct`:void 0,A=this.buildSelection(w,{isSingleTable:x}),B=(0,d.is)(i,o.XI)&&i[o.XI.Symbol.OriginalName]!==i[o.XI.Symbol.Name]?(0,f.ll)`${f.ll.identifier(i[o.XI.Symbol.OriginalName])} ${f.ll.identifier(i[o.XI.Symbol.Name])}`:i,C=[];if(j)for(let[a,b]of j.entries()){0===a&&C.push((0,f.ll)` `);let c=b.table,e=b.lateral?(0,f.ll)` lateral`:void 0;if((0,d.is)(c,a4)){let a=c[a4.Symbol.Name],d=c[a4.Symbol.Schema],g=c[a4.Symbol.OriginalName],h=a===g?void 0:b.alias;C.push((0,f.ll)`${f.ll.raw(b.joinType)} join${e} ${d?(0,f.ll)`${f.ll.identifier(d)}.`:void 0}${f.ll.identifier(g)}${h&&(0,f.ll)` ${f.ll.identifier(h)}`} on ${b.on}`)}else if((0,d.is)(c,f.Ss)){let a=c[q.n].name,d=c[q.n].schema,g=c[q.n].originalName,h=a===g?void 0:b.alias;C.push((0,f.ll)`${f.ll.raw(b.joinType)} join${e} ${d?(0,f.ll)`${f.ll.identifier(d)}.`:void 0}${f.ll.identifier(g)}${h&&(0,f.ll)` ${f.ll.identifier(h)}`} on ${b.on}`)}else C.push((0,f.ll)`${f.ll.raw(b.joinType)} join${e} ${c} on ${b.on}`);a<j.length-1&&C.push((0,f.ll)` `)}let D=f.ll.join(C),E=e?(0,f.ll)` where ${e}`:void 0,F=h?(0,f.ll)` having ${h}`:void 0,G=this.buildOrderBy(l),H=m&&m.length>0?(0,f.ll)` group by ${f.ll.join(m,(0,f.ll)`, `)}`:void 0,I=this.buildLimit(n),J=r?(0,f.ll)` offset ${r}`:void 0;if(s){let{config:a,strength:b}=s;v=(0,f.ll)` for ${f.ll.raw(b)}`,a.noWait?v.append((0,f.ll)` no wait`):a.skipLocked&&v.append((0,f.ll)` skip locked`)}let K=(0,f.ll)`${y}select${z} ${A} from ${B}${D}${E}${H}${F}${G}${I}${J}${v}`;return u.length>0?this.buildSetOperations(K,u):K}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:e,limit:g,orderBy:h,offset:i}}){let j,k=(0,f.ll)`(${a.getSQL()}) `,l=(0,f.ll)`(${e.getSQL()})`;if(h&&h.length>0){let a=[];for(let b of h)if((0,d.is)(b,A))a.push(f.ll.identifier(this.casing.getColumnCasing(b)));else if((0,d.is)(b,f.Xs)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];(0,d.is)(c,A)&&(b.queryChunks[a]=f.ll.identifier(this.casing.getColumnCasing(c)))}a.push((0,f.ll)`${b}`)}else a.push((0,f.ll)`${b}`);j=(0,f.ll)` order by ${f.ll.join(a,(0,f.ll)`, `)} `}let m="object"==typeof g||"number"==typeof g&&g>=0?(0,f.ll)` limit ${g}`:void 0,n=f.ll.raw(`${b} ${c?"all ":""}`),o=i?(0,f.ll)` offset ${i}`:void 0;return(0,f.ll)`${k}${n}${l}${j}${m}${o}`}buildInsertQuery({table:a,values:b,ignore:c,onConflict:e,select:g}){let h=[],i=Object.entries(a[o.XI.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),j=i.map(([,a])=>f.ll.identifier(this.casing.getColumnCasing(a))),k=[];if(g)(0,d.is)(b,f.Xs)?h.push(b):h.push(b.getSQL());else for(let[a,c]of(h.push(f.ll.raw("values ")),b.entries())){let e={},g=[];for(let[a,b]of i){let h=c[a];if(void 0===h||(0,d.is)(h,f.Iw)&&void 0===h.value)if(void 0!==b.defaultFn){let c=b.defaultFn();e[a]=c;let h=(0,d.is)(c,f.Xs)?c:f.ll.param(c,b);g.push(h)}else if(b.default||void 0===b.onUpdateFn)g.push((0,f.ll)`default`);else{let a=b.onUpdateFn(),c=(0,d.is)(a,f.Xs)?a:f.ll.param(a,b);g.push(c)}else b.defaultFn&&(0,d.is)(h,f.Iw)&&(e[a]=h.value),g.push(h)}k.push(e),h.push(g),a<b.length-1&&h.push((0,f.ll)`, `)}let l=f.ll.join(h),m=c?(0,f.ll)` ignore`:void 0,n=e?(0,f.ll)` on duplicate key ${e}`:void 0;return{sql:(0,f.ll)`insert${m} into ${a} ${j} ${l}${n}`,generatedIds:k}}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:b})}buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:e,tableConfig:h,queryConfig:j,tableAlias:p,nestedQueryRelation:q,joinOn:r}){let s,t,u,v,w,x=[],y=[];if(!0===j)x=Object.entries(h.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:(0,i.ug)(b,p),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let e=Object.fromEntries(Object.entries(h.columns).map(([a,b])=>[a,(0,i.ug)(b,p)]));if(j.where){let a="function"==typeof j.where?j.where(e,(0,n.mm)()):j.where;v=a&&(0,i.yY)(a,p)}let l=[],q=[];if(j.columns){let a=!1;for(let[b,c]of Object.entries(j.columns))void 0!==c&&b in h.columns&&(a||!0!==c||(a=!0),q.push(b));q.length>0&&(q=a?q.filter(a=>j.columns?.[a]===!0):Object.keys(h.columns).filter(a=>!q.includes(a)))}else q=Object.keys(h.columns);for(let a of q){let b=h.columns[a];l.push({tsKey:a,value:b})}let r=[];if(j.with&&(r=Object.entries(j.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:h.relations[a]}))),j.extras)for(let[a,b]of Object.entries("function"==typeof j.extras?j.extras(e,{sql:f.ll}):j.extras))l.push({tsKey:a,value:(0,i.Hs)(b,p)});for(let{tsKey:a,value:b}of l)x.push({dbKey:(0,d.is)(b,f.Xs.Aliased)?b.fieldAlias:h.columns[a].name,tsKey:a,field:(0,d.is)(b,k.V)?(0,i.ug)(b,p):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let w="function"==typeof j.orderBy?j.orderBy(e,(0,n.rl)()):j.orderBy??[];for(let{tsKey:e,queryConfig:h,relation:l}of(Array.isArray(w)||(w=[w]),u=w.map(a=>(0,d.is)(a,k.V)?(0,i.ug)(a,p):(0,i.yY)(a,p)),s=j.limit,t=j.offset,r)){let j=(0,n.W0)(b,c,l),k=c[(0,o.Lf)(l.referencedTable)],q=`${p}_${e}`,r=(0,m.Uo)(...j.fields.map((a,b)=>(0,m.eq)((0,i.ug)(j.references[b],q),(0,i.ug)(a,p)))),s=this.buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:a[k],tableConfig:b[k],queryConfig:(0,d.is)(l,n.pD)?!0===h?{limit:1}:{...h,limit:1}:h,tableAlias:q,joinOn:r,nestedQueryRelation:l}),t=(0,f.ll)`${f.ll.identifier(q)}.${f.ll.identifier("data")}`.as(e);y.push({on:(0,f.ll)`true`,table:new g.n(s.sql,{},q),alias:q,joinType:"left",lateral:!0}),x.push({dbKey:e,tsKey:e,field:t,relationTableTsKey:k,isJson:!0,selection:s.selection})}}if(0===x.length)throw new l.n({message:`No fields selected for table "${h.tsName}" ("${p}")`});if(v=(0,m.Uo)(r,v),q){let a=(0,f.ll)`json_array(${f.ll.join(x.map(({field:a,tsKey:b,isJson:c})=>c?(0,f.ll)`${f.ll.identifier(`${p}_${b}`)}.${f.ll.identifier("data")}`:(0,d.is)(a,f.Xs.Aliased)?a.sql:a),(0,f.ll)`, `)})`;(0,d.is)(q,n.iv)&&(a=(0,f.ll)`coalesce(json_arrayagg(${a}), json_array())`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:h.tsName,selection:x}];void 0!==s||void 0!==t||(u?.length??0)>0?(w=this.buildSelectQuery({table:(0,i.oG)(e,p),fields:{},fieldsFlat:[{path:[],field:f.ll.raw("*")},...(u?.length??0)>0?[{path:[],field:(0,f.ll)`row_number() over (order by ${f.ll.join(u,(0,f.ll)`, `)})`}]:[]],where:v,limit:s,offset:t,setOperators:[]}),v=void 0,s=void 0,t=void 0,u=void 0):w=(0,i.oG)(e,p),w=this.buildSelectQuery({table:(0,d.is)(w,a4)?w:new g.n(w,{},p),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:(0,d.is)(a,k.V)?(0,i.ug)(a,p):a})),joins:y,where:v,limit:s,offset:t,orderBy:u,setOperators:[]})}else w=this.buildSelectQuery({table:(0,i.oG)(e,p),fields:{},fieldsFlat:x.map(({field:a})=>({path:[],field:(0,d.is)(a,k.V)?(0,i.ug)(a,p):a})),joins:y,where:v,limit:s,offset:t,orderBy:u,setOperators:[]});return{tableTsKey:h.tsName,sql:w,selection:x}}buildRelationalQueryWithoutLateralSubqueries({fullSchema:a,schema:b,tableNamesMap:c,table:e,tableConfig:h,queryConfig:j,tableAlias:p,nestedQueryRelation:q,joinOn:r}){let s,t=[],u,v,w=[],x;if(!0===j)t=Object.entries(h.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:(0,i.ug)(b,p),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let e=Object.fromEntries(Object.entries(h.columns).map(([a,b])=>[a,(0,i.ug)(b,p)]));if(j.where){let a="function"==typeof j.where?j.where(e,(0,n.mm)()):j.where;x=a&&(0,i.yY)(a,p)}let g=[],l=[];if(j.columns){let a=!1;for(let[b,c]of Object.entries(j.columns))void 0!==c&&b in h.columns&&(a||!0!==c||(a=!0),l.push(b));l.length>0&&(l=a?l.filter(a=>j.columns?.[a]===!0):Object.keys(h.columns).filter(a=>!l.includes(a)))}else l=Object.keys(h.columns);for(let a of l){let b=h.columns[a];g.push({tsKey:a,value:b})}let q=[];if(j.with&&(q=Object.entries(j.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:h.relations[a]}))),j.extras)for(let[a,b]of Object.entries("function"==typeof j.extras?j.extras(e,{sql:f.ll}):j.extras))g.push({tsKey:a,value:(0,i.Hs)(b,p)});for(let{tsKey:a,value:b}of g)t.push({dbKey:(0,d.is)(b,f.Xs.Aliased)?b.fieldAlias:h.columns[a].name,tsKey:a,field:(0,d.is)(b,k.V)?(0,i.ug)(b,p):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let r="function"==typeof j.orderBy?j.orderBy(e,(0,n.rl)()):j.orderBy??[];for(let{tsKey:e,queryConfig:g,relation:h}of(Array.isArray(r)||(r=[r]),w=r.map(a=>(0,d.is)(a,k.V)?(0,i.ug)(a,p):(0,i.yY)(a,p)),u=j.limit,v=j.offset,q)){let j=(0,n.W0)(b,c,h),k=c[(0,o.Lf)(h.referencedTable)],l=`${p}_${e}`,q=(0,m.Uo)(...j.fields.map((a,b)=>(0,m.eq)((0,i.ug)(j.references[b],l),(0,i.ug)(a,p)))),r=this.buildRelationalQueryWithoutLateralSubqueries({fullSchema:a,schema:b,tableNamesMap:c,table:a[k],tableConfig:b[k],queryConfig:(0,d.is)(h,n.pD)?!0===g?{limit:1}:{...g,limit:1}:g,tableAlias:l,joinOn:q,nestedQueryRelation:h}),s=(0,f.ll)`(${r.sql})`;(0,d.is)(h,n.iv)&&(s=(0,f.ll)`coalesce(${s}, json_array())`);let u=s.as(e);t.push({dbKey:e,tsKey:e,field:u,relationTableTsKey:k,isJson:!0,selection:r.selection})}}if(0===t.length)throw new l.n({message:`No fields selected for table "${h.tsName}" ("${p}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(x=(0,m.Uo)(r,x),q){let a=(0,f.ll)`json_array(${f.ll.join(t.map(({field:a})=>(0,d.is)(a,A)?f.ll.identifier(this.casing.getColumnCasing(a)):(0,d.is)(a,f.Xs.Aliased)?a.sql:a),(0,f.ll)`, `)})`;(0,d.is)(q,n.iv)&&(a=(0,f.ll)`json_arrayagg(${a})`);let b=[{dbKey:"data",tsKey:"data",field:a,isJson:!0,relationTableTsKey:h.tsName,selection:t}];void 0!==u||void 0!==v||w.length>0?(s=this.buildSelectQuery({table:(0,i.oG)(e,p),fields:{},fieldsFlat:[{path:[],field:f.ll.raw("*")},...w.length>0?[{path:[],field:(0,f.ll)`row_number() over (order by ${f.ll.join(w,(0,f.ll)`, `)})`}]:[]],where:x,limit:u,offset:v,setOperators:[]}),x=void 0,u=void 0,v=void 0,w=void 0):s=(0,i.oG)(e,p),s=this.buildSelectQuery({table:(0,d.is)(s,a4)?s:new g.n(s,{},p),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:(0,d.is)(a,k.V)?(0,i.ug)(a,p):a})),where:x,limit:u,offset:v,orderBy:w,setOperators:[]})}else s=this.buildSelectQuery({table:(0,i.oG)(e,p),fields:{},fieldsFlat:t.map(({field:a})=>({path:[],field:(0,d.is)(a,k.V)?(0,i.ug)(a,p):a})),where:x,limit:u,offset:v,orderBy:w,setOperators:[]});return{tableTsKey:h.tsName,sql:s,selection:t}}}var a8=c(20500),a9=c(80296);class ba{static [d.i]="MySqlSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,a.withList&&(this.withList=a.withList),this.distinct=a.distinct}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:(0,d.is)(a,g.n)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,d.is)(a,a6)?a[q.n].selectedFields:(0,d.is)(a,f.Xs)?{}:(0,p.YD)(a),new bc({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class bb extends a8.O{static [d.i]="MySqlSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,p.zN)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(b,c)=>{let h=this.tableName,i=(0,p.zN)(b);if("string"==typeof i&&this.config.joins?.some(a=>a.alias===i))throw Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof h&&(this.config.fields={[h]:this.config.fields}),"string"==typeof i&&!(0,d.is)(b,f.Xs))){let a=(0,d.is)(b,g.n)?b._.selectedFields:(0,d.is)(b,f.Ss)?b[q.n].selectedFields:b[o.XI.Symbol.Columns];this.config.fields[i]=a}if("function"==typeof c&&(c=c(new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:c,table:b,joinType:a,alias:i}),"string"==typeof i)switch(a){case"left":this.joinsNotNullableMap[i]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!0;break;case"inner":this.joinsNotNullableMap[i]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(be()):c;if(!(0,p.DV)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}for(a,b={}){return this.config.lockingClause={strength:a,config:b},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new g.n(this.getSQL(),this.config.fields,a),new e.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new e.b({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class bc extends bb{static [d.i]="MySqlSelect";prepare(){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let a=(0,p.He)(this.config.fields),b=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),a);return b.joinsNotNullableMap=this.joinsNotNullableMap,b}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator()}function bd(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,p.DV)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,p.XJ)(bc,[a9.k]);let be=()=>({union:bf,unionAll:bg,intersect:bh,intersectAll:bi,except:bj,exceptAll:bk}),bf=bd("union",!1),bg=bd("union",!0),bh=bd("intersect",!1),bi=bd("intersect",!0),bj=bd("except",!1),bk=bd("except",!0);class bl{static [d.i]="MySqlQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,d.is)(a,a7)?a:void 0,this.dialectConfig=(0,d.is)(a,a7)?void 0:a}$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(b)),new Proxy(new g.J(c.getSQL(),c.getSelectedFields(),a,!0),new e.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...a){let b=this;return{select:function(c){return new ba({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(c){return new ba({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a,distinct:!0})}}}select(a){return new ba({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new ba({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new a7(this.dialectConfig)),this.dialect}}class bm{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [d.i]="MySqlUpdateBuilder";set(a){return new bn(this.table,(0,p.q)(this.table,a),this.session,this.dialect,this.withList)}}class bn extends a9.k{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e}}static [d.i]="MySqlUpdate";config;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[o.XI.Symbol.Columns],new e.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.orderBy=c}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning)}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}class bo extends a9.k{constructor(a,b,c,d){super(),this.table=a,this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [d.i]="MySqlDelete";config;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[o.XI.Symbol.Columns],new e.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.orderBy=c}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){return this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning)}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}class bp{constructor(a,b,c){this.table=a,this.session=b,this.dialect=c}static [d.i]="MySqlInsertBuilder";shouldIgnore=!1;ignore(){return this.shouldIgnore=!0,this}values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[o.XI.Symbol.Columns];for(let e of Object.keys(a)){let g=a[e];b[e]=(0,d.is)(g,f.Xs)?g:new f.Iw(g,c[e])}return b});return new bq(this.table,b,this.shouldIgnore,this.session,this.dialect)}select(a){let b="function"==typeof a?a(new bl):a;if(!(0,d.is)(b,f.Xs)&&!(0,p.DV)(this.table[o.e],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new bq(this.table,b,this.shouldIgnore,this.session,this.dialect,!0)}}class bq extends a9.k{constructor(a,b,c,d,e,f){super(),this.session=d,this.dialect=e,this.config={table:a,values:b,select:f,ignore:c}}static [d.i]="MySqlInsert";config;onDuplicateKeyUpdate(a){let b=this.dialect.buildUpdateSet(this.config.table,(0,p.q)(this.config.table,a.set));return this.config.onConflict=(0,f.ll)`update ${b}`,this}$returningId(){let a=[];for(let[b,c]of Object.entries(this.config.table[o.XI.Symbol.Columns]))c.primary&&a.push({field:c,path:[b]});return this.config.returning=a,this}getSQL(){return this.dialect.buildInsertQuery(this.config).sql}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}prepare(){let{sql:a,generatedIds:b}=this.dialect.buildInsertQuery(this.config);return this.session.prepareQuery(this.dialect.sqlToQuery(a),void 0,void 0,b,this.config.returning)}execute=a=>this.prepare().execute(a);createIterator=()=>{let a=this;return async function*(b){yield*a.prepare().iterator(b)}};iterator=this.createIterator();$dynamic(){return this}}class br{constructor(a,b,c,d,e,f,g,h){this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.mode=h}static [d.i]="MySqlRelationalQueryBuilder";findMany(a){return new bs(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many",this.mode)}findFirst(a){return new bs(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first",this.mode)}}class bs extends a9.k{constructor(a,b,c,d,e,f,g,h,i,j){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.queryMode=i,this.mode=j}static [d.i]="MySqlRelationalQuery";prepare(){let{query:a,builtQuery:b}=this._toSQL();return this.session.prepareQuery(b,void 0,b=>{let c=b.map(b=>(0,n.I$)(this.schema,this.tableConfig,b,a.selection));return"first"===this.queryMode?c[0]:c})}_getQuery(){return"planetscale"===this.mode?this.dialect.buildRelationalQueryWithoutLateralSubqueries({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}):this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}_toSQL(){let a=this._getQuery();return{builtQuery:this.dialect.sqlToQuery(a.sql),query:a}}getSQL(){return this._getQuery().sql}toSQL(){return this._toSQL().builtQuery}execute(){return this.prepare().execute()}}class bt{constructor(a,b,c,d){if(this.dialect=a,this.session=b,this.mode=d,this._=c?{schema:c.schema,fullSchema:c.fullSchema,tableNamesMap:c.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={},this._.schema)for(let[d,e]of Object.entries(this._.schema))this.query[d]=new br(c.fullSchema,this._.schema,this._.tableNamesMap,c.fullSchema[d],e,a,b,this.mode)}static [d.i]="MySqlDatabase";query;$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(new bl(b.dialect))),new Proxy(new g.J(c.getSQL(),c.getSelectedFields(),a,!0),new e.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}$count(a,b){return new h({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new ba({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new ba({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},update:function(c){return new bm(c,b.session,b.dialect,a)},delete:function(c){return new bo(c,b.session,b.dialect,a)}}}select(a){return new ba({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new ba({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(a){return new bm(a,this.session,this.dialect)}insert(a){return new bp(a,this.session,this.dialect)}delete(a){return new bo(a,this.session,this.dialect)}execute(a){return this.session.execute("string"==typeof a?f.ll.raw(a):a.getSQL())}transaction(a,b){return this.session.transaction(a,b)}}var bu=c(79844);class bv{static [d.i]="SQLiteForeignKeyBuilder";reference;_onUpdate;_onDelete;constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=a,this}onDelete(a){return this._onDelete=a,this}build(a){return new bw(a,this)}}class bw{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [d.i]="SQLiteForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[s.E],...d,c[0].table[s.E],...e];return a??`${f.join("_")}_fk`}}function bx(a,b){return`${a[s.E]}_${b.join("_")}_unique`}class by{constructor(a,b){this.name=b,this.columns=a}static [d.i]=null;columns;build(a){return new bA(a,this.columns,this.name)}}class bz{static [d.i]=null;name;constructor(a){this.name=a}on(...a){return new by(a,this.name)}}class bA{constructor(a,b,c){this.table=a,this.columns=b,this.name=c??bx(this.table,this.columns.map(a=>a.name))}static [d.i]=null;columns;name;getName(){return this.name}}class bB extends r.Q{static [d.i]="SQLiteColumnBuilder";foreignKeyConfigs=[];references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a){return this.config.isUnique=!0,this.config.uniqueName=a,this}generatedAlwaysAs(a,b){return this.config.generated={as:a,type:"always",mode:b?.mode??"virtual"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>((c,d)=>{let e=new bv(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)})(c,d))}}class bC extends k.V{constructor(a,b){b.uniqueName||(b.uniqueName=bx(a,[b.name])),super(a,b),this.table=a}static [d.i]="SQLiteColumn"}class bD extends bB{static [d.i]="SQLiteBigIntBuilder";constructor(a){super(a,"bigint","SQLiteBigInt")}build(a){return new bE(a,this.config)}}class bE extends bC{static [d.i]="SQLiteBigInt";getSQLType(){return"blob"}mapFromDriverValue(a){return BigInt(Buffer.isBuffer(a)?a.toString():String.fromCodePoint(...a))}mapToDriverValue(a){return Buffer.from(a.toString())}}class bF extends bB{static [d.i]="SQLiteBlobJsonBuilder";constructor(a){super(a,"json","SQLiteBlobJson")}build(a){return new bG(a,this.config)}}class bG extends bC{static [d.i]="SQLiteBlobJson";getSQLType(){return"blob"}mapFromDriverValue(a){return JSON.parse(Buffer.isBuffer(a)?a.toString():String.fromCodePoint(...a))}mapToDriverValue(a){return Buffer.from(JSON.stringify(a))}}class bH extends bB{static [d.i]="SQLiteBlobBufferBuilder";constructor(a){super(a,"buffer","SQLiteBlobBuffer")}build(a){return new bI(a,this.config)}}class bI extends bC{static [d.i]="SQLiteBlobBuffer";getSQLType(){return"blob"}}function bJ(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return d?.mode==="json"?new bF(c):d?.mode==="bigint"?new bD(c):new bH(c)}class bK extends bB{static [d.i]="SQLiteCustomColumnBuilder";constructor(a,b,c){super(a,"custom","SQLiteCustomColumn"),this.config.fieldConfig=b,this.config.customTypeParams=c}build(a){return new bL(a,this.config)}}class bL extends bC{static [d.i]="SQLiteCustomColumn";sqlName;mapTo;mapFrom;constructor(a,b){super(a,b),this.sqlName=b.customTypeParams.dataType(b.fieldConfig),this.mapTo=b.customTypeParams.toDriver,this.mapFrom=b.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(a){return"function"==typeof this.mapFrom?this.mapFrom(a):a}mapToDriverValue(a){return"function"==typeof this.mapTo?this.mapTo(a):a}}function bM(a){return(b,c)=>{let{name:d,config:e}=(0,p.Ll)(b,c);return new bK(d,e,a)}}class bN extends bB{static [d.i]="SQLiteBaseIntegerBuilder";constructor(a,b,c){super(a,b,c),this.config.autoIncrement=!1}primaryKey(a){return a?.autoIncrement&&(this.config.autoIncrement=!0),this.config.hasDefault=!0,super.primaryKey()}}class bO extends bC{static [d.i]="SQLiteBaseInteger";autoIncrement=this.config.autoIncrement;getSQLType(){return"integer"}}class bP extends bN{static [d.i]="SQLiteIntegerBuilder";constructor(a){super(a,"number","SQLiteInteger")}build(a){return new bQ(a,this.config)}}class bQ extends bO{static [d.i]="SQLiteInteger"}class bR extends bN{static [d.i]="SQLiteTimestampBuilder";constructor(a,b){super(a,"date","SQLiteTimestamp"),this.config.mode=b}defaultNow(){return this.default((0,f.ll)`(cast((julianday('now') - 2440587.5)*86400000 as integer))`)}build(a){return new bS(a,this.config)}}class bS extends bO{static [d.i]="SQLiteTimestamp";mode=this.config.mode;mapFromDriverValue(a){return new Date("timestamp"===this.config.mode?1e3*a:a)}mapToDriverValue(a){let b=a.getTime();return"timestamp"===this.config.mode?Math.floor(b/1e3):b}}class bT extends bN{static [d.i]="SQLiteBooleanBuilder";constructor(a,b){super(a,"boolean","SQLiteBoolean"),this.config.mode=b}build(a){return new bU(a,this.config)}}class bU extends bO{static [d.i]="SQLiteBoolean";mode=this.config.mode;mapFromDriverValue(a){return 1===Number(a)}mapToDriverValue(a){return+!!a}}function bV(a,b){let{name:c,config:d}=(0,p.Ll)(a,b);return d?.mode==="timestamp"||d?.mode==="timestamp_ms"?new bR(c,d.mode):d?.mode==="boolean"?new bT(c,d.mode):new bP(c)}class bW extends bB{static [d.i]="SQLiteNumericBuilder";constructor(a){super(a,"string","SQLiteNumeric")}build(a){return new bX(a,this.config)}}class bX extends bC{static [d.i]="SQLiteNumeric";getSQLType(){return"numeric"}}function bY(a){return new bW(a??"")}class bZ extends bB{static [d.i]="SQLiteRealBuilder";constructor(a){super(a,"number","SQLiteReal")}build(a){return new b$(a,this.config)}}class b$ extends bC{static [d.i]="SQLiteReal";getSQLType(){return"real"}}function b_(a){return new bZ(a??"")}class b0 extends bB{static [d.i]="SQLiteTextBuilder";constructor(a,b){super(a,"string","SQLiteText"),this.config.enumValues=b.enum,this.config.length=b.length}build(a){return new b1(a,this.config)}}class b1 extends bC{static [d.i]="SQLiteText";enumValues=this.config.enumValues;length=this.config.length;constructor(a,b){super(a,b)}getSQLType(){return`text${this.config.length?`(${this.config.length})`:""}`}}class b2 extends bB{static [d.i]="SQLiteTextJsonBuilder";constructor(a){super(a,"json","SQLiteTextJson")}build(a){return new b3(a,this.config)}}class b3 extends bC{static [d.i]="SQLiteTextJson";getSQLType(){return"text"}mapFromDriverValue(a){return JSON.parse(a)}mapToDriverValue(a){return JSON.stringify(a)}}function b4(a,b={}){let{name:c,config:d}=(0,p.Ll)(a,b);return"json"===d.mode?new b2(c):new b0(c,d)}let b5=Symbol.for("drizzle:SQLiteInlineForeignKeys");class b6 extends o.XI{static [d.i]="SQLiteTable";static Symbol=Object.assign({},o.XI.Symbol,{InlineForeignKeys:b5});[o.XI.Symbol.Columns];[b5]=[];[o.XI.Symbol.ExtraConfigBuilder]=void 0}let b7=(a,b,c)=>(function(a,b,c,d,e=a){let f=new b6(a,void 0,e),g=Object.fromEntries(Object.entries("function"==typeof b?b({blob:bJ,customType:bM,integer:bV,numeric:bY,real:b_,text:b4}):b).map(([a,b])=>{b.setName(a);let c=b.build(f);return f[b5].push(...b.buildForeignKeys(c,f)),[a,c]})),h=Object.assign(f,g);return h[o.XI.Symbol.Columns]=g,h[o.XI.Symbol.ExtraConfigColumns]=g,c&&(h[b6.Symbol.ExtraConfigBuilder]=c),h})(a,b,c);class b8 extends f.Ss{static [d.i]="SQLiteViewBase"}class b9{static [d.i]="SQLiteDialect";casing;constructor(a){this.casing=new j.Yn(a?.casing)}escapeName(a){return`"${a}"`}escapeParam(a){return"?"}escapeString(a){return`'${a.replace(/'/g,"''")}'`}buildWithCTE(a){if(!a?.length)return;let b=[(0,f.ll)`with `];for(let[c,d]of a.entries())b.push((0,f.ll)`${f.ll.identifier(d._.alias)} as (${d._.sql})`),c<a.length-1&&b.push((0,f.ll)`, `);return b.push((0,f.ll)` `),f.ll.join(b)}buildDeleteQuery({table:a,where:b,returning:c,withList:d,limit:e,orderBy:g}){let h=this.buildWithCTE(d),i=c?(0,f.ll)` returning ${this.buildSelection(c,{isSingleTable:!0})}`:void 0,j=b?(0,f.ll)` where ${b}`:void 0,k=this.buildOrderBy(g),l=this.buildLimit(e);return(0,f.ll)`${h}delete from ${a}${j}${i}${k}${l}`}buildUpdateSet(a,b){let c=a[o.XI.Symbol.Columns],d=Object.keys(c).filter(a=>void 0!==b[a]||c[a]?.onUpdateFn!==void 0),e=d.length;return f.ll.join(d.flatMap((a,d)=>{let g=c[a],h=b[a]??f.ll.param(g.onUpdateFn(),g),i=(0,f.ll)`${f.ll.identifier(this.casing.getColumnCasing(g))} = ${h}`;return d<e-1?[i,f.ll.raw(", ")]:[i]}))}buildUpdateQuery({table:a,set:b,where:c,returning:d,withList:e,joins:g,from:h,limit:i,orderBy:j}){let k=this.buildWithCTE(e),l=this.buildUpdateSet(a,b),m=h&&f.ll.join([f.ll.raw(" from "),this.buildFromTable(h)]),n=this.buildJoins(g),o=d?(0,f.ll)` returning ${this.buildSelection(d,{isSingleTable:!0})}`:void 0,p=c?(0,f.ll)` where ${c}`:void 0,q=this.buildOrderBy(j),r=this.buildLimit(i);return(0,f.ll)`${k}update ${a} set ${l}${m}${n}${p}${o}${q}${r}`}buildSelection(a,{isSingleTable:b=!1}={}){let c=a.length,e=a.flatMap(({field:a},e)=>{let g=[];if((0,d.is)(a,f.Xs.Aliased)&&a.isSelectionField)g.push(f.ll.identifier(a.fieldAlias));else if((0,d.is)(a,f.Xs.Aliased)||(0,d.is)(a,f.Xs)){let c=(0,d.is)(a,f.Xs.Aliased)?a.sql:a;b?g.push(new f.Xs(c.queryChunks.map(a=>(0,d.is)(a,k.V)?f.ll.identifier(this.casing.getColumnCasing(a)):a))):g.push(c),(0,d.is)(a,f.Xs.Aliased)&&g.push((0,f.ll)` as ${f.ll.identifier(a.fieldAlias)}`)}else if((0,d.is)(a,k.V)){let c=a.table[o.XI.Symbol.Name];b?g.push(f.ll.identifier(this.casing.getColumnCasing(a))):g.push((0,f.ll)`${f.ll.identifier(c)}.${f.ll.identifier(this.casing.getColumnCasing(a))}`)}return e<c-1&&g.push((0,f.ll)`, `),g});return f.ll.join(e)}buildJoins(a){if(!a||0===a.length)return;let b=[];if(a)for(let[c,e]of a.entries()){0===c&&b.push((0,f.ll)` `);let g=e.table;if((0,d.is)(g,b6)){let a=g[b6.Symbol.Name],c=g[b6.Symbol.Schema],d=g[b6.Symbol.OriginalName],h=a===d?void 0:e.alias;b.push((0,f.ll)`${f.ll.raw(e.joinType)} join ${c?(0,f.ll)`${f.ll.identifier(c)}.`:void 0}${f.ll.identifier(d)}${h&&(0,f.ll)` ${f.ll.identifier(h)}`} on ${e.on}`)}else b.push((0,f.ll)`${f.ll.raw(e.joinType)} join ${g} on ${e.on}`);c<a.length-1&&b.push((0,f.ll)` `)}return f.ll.join(b)}buildLimit(a){return"object"==typeof a||"number"==typeof a&&a>=0?(0,f.ll)` limit ${a}`:void 0}buildOrderBy(a){let b=[];if(a)for(let[c,d]of a.entries())b.push(d),c<a.length-1&&b.push((0,f.ll)`, `);return b.length>0?(0,f.ll)` order by ${f.ll.join(b)}`:void 0}buildFromTable(a){return(0,d.is)(a,o.XI)&&a[o.XI.Symbol.OriginalName]!==a[o.XI.Symbol.Name]?(0,f.ll)`${f.ll.identifier(a[o.XI.Symbol.OriginalName])} ${f.ll.identifier(a[o.XI.Symbol.Name])}`:a}buildSelectQuery({withList:a,fields:b,fieldsFlat:c,where:e,having:h,table:i,joins:j,orderBy:l,groupBy:m,limit:n,offset:r,distinct:s,setOperators:t}){let u=c??(0,p.He)(b);for(let a of u){let b;if((0,d.is)(a.field,k.V)&&(0,o.Io)(a.field.table)!==((0,d.is)(i,g.n)?i._.alias:(0,d.is)(i,b8)?i[q.n].name:(0,d.is)(i,f.Xs)?void 0:(0,o.Io)(i))&&(b=a.field.table,!j?.some(({alias:a})=>a===(b[o.XI.Symbol.IsAlias]?(0,o.Io)(b):b[o.XI.Symbol.BaseName])))){let b=(0,o.Io)(a.field.table);throw Error(`Your "${a.path.join("->")}" field references a column "${b}"."${a.field.name}", but the table "${b}" is not part of the query! Did you forget to join it?`)}}let v=!j||0===j.length,w=this.buildWithCTE(a),x=s?(0,f.ll)` distinct`:void 0,y=this.buildSelection(u,{isSingleTable:v}),z=this.buildFromTable(i),A=this.buildJoins(j),B=e?(0,f.ll)` where ${e}`:void 0,C=h?(0,f.ll)` having ${h}`:void 0,D=[];if(m)for(let[a,b]of m.entries())D.push(b),a<m.length-1&&D.push((0,f.ll)`, `);let E=D.length>0?(0,f.ll)` group by ${f.ll.join(D)}`:void 0,F=this.buildOrderBy(l),G=this.buildLimit(n),H=r?(0,f.ll)` offset ${r}`:void 0,I=(0,f.ll)`${w}select${x} ${y} from ${z}${A}${B}${E}${C}${F}${G}${H}`;return t.length>0?this.buildSetOperations(I,t):I}buildSetOperations(a,b){let[c,...d]=b;if(!c)throw Error("Cannot pass undefined values to any set operator");return 0===d.length?this.buildSetOperationQuery({leftSelect:a,setOperator:c}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:a,setOperator:c}),d)}buildSetOperationQuery({leftSelect:a,setOperator:{type:b,isAll:c,rightSelect:e,limit:g,orderBy:h,offset:i}}){let j,k=(0,f.ll)`${a.getSQL()} `,l=(0,f.ll)`${e.getSQL()}`;if(h&&h.length>0){let a=[];for(let b of h)if((0,d.is)(b,bC))a.push(f.ll.identifier(b.name));else if((0,d.is)(b,f.Xs)){for(let a=0;a<b.queryChunks.length;a++){let c=b.queryChunks[a];(0,d.is)(c,bC)&&(b.queryChunks[a]=f.ll.identifier(this.casing.getColumnCasing(c)))}a.push((0,f.ll)`${b}`)}else a.push((0,f.ll)`${b}`);j=(0,f.ll)` order by ${f.ll.join(a,(0,f.ll)`, `)}`}let m="object"==typeof g||"number"==typeof g&&g>=0?(0,f.ll)` limit ${g}`:void 0,n=f.ll.raw(`${b} ${c?"all ":""}`),o=i?(0,f.ll)` offset ${i}`:void 0;return(0,f.ll)`${k}${n}${l}${j}${m}${o}`}buildInsertQuery({table:a,values:b,onConflict:c,returning:e,withList:g,select:h}){let i=[],j=Object.entries(a[o.XI.Symbol.Columns]).filter(([a,b])=>!b.shouldDisableInsert()),k=j.map(([,a])=>f.ll.identifier(this.casing.getColumnCasing(a)));if(h)(0,d.is)(b,f.Xs)?i.push(b):i.push(b.getSQL());else for(let[a,c]of(i.push(f.ll.raw("values ")),b.entries())){let e=[];for(let[a,b]of j){let g=c[a];if(void 0===g||(0,d.is)(g,f.Iw)&&void 0===g.value){let a;if(null!==b.default&&void 0!==b.default)a=(0,d.is)(b.default,f.Xs)?b.default:f.ll.param(b.default,b);else if(void 0!==b.defaultFn){let c=b.defaultFn();a=(0,d.is)(c,f.Xs)?c:f.ll.param(c,b)}else if(b.default||void 0===b.onUpdateFn)a=(0,f.ll)`null`;else{let c=b.onUpdateFn();a=(0,d.is)(c,f.Xs)?c:f.ll.param(c,b)}e.push(a)}else e.push(g)}i.push(e),a<b.length-1&&i.push((0,f.ll)`, `)}let l=this.buildWithCTE(g),m=f.ll.join(i),n=e?(0,f.ll)` returning ${this.buildSelection(e,{isSingleTable:!0})}`:void 0,p=c?(0,f.ll)` on conflict ${c}`:void 0;return(0,f.ll)`${l}insert into ${a} ${k} ${m}${p}${n}`}sqlToQuery(a,b){return a.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,invokeSource:b})}buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:e,tableConfig:h,queryConfig:j,tableAlias:p,nestedQueryRelation:q,joinOn:r}){let s,t=[],u,v,w=[],x,y=[];if(!0===j)t=Object.entries(h.columns).map(([a,b])=>({dbKey:b.name,tsKey:a,field:(0,i.ug)(b,p),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let e=Object.fromEntries(Object.entries(h.columns).map(([a,b])=>[a,(0,i.ug)(b,p)]));if(j.where){let a="function"==typeof j.where?j.where(e,(0,n.mm)()):j.where;x=a&&(0,i.yY)(a,p)}let g=[],l=[];if(j.columns){let a=!1;for(let[b,c]of Object.entries(j.columns))void 0!==c&&b in h.columns&&(a||!0!==c||(a=!0),l.push(b));l.length>0&&(l=a?l.filter(a=>j.columns?.[a]===!0):Object.keys(h.columns).filter(a=>!l.includes(a)))}else l=Object.keys(h.columns);for(let a of l){let b=h.columns[a];g.push({tsKey:a,value:b})}let q=[];if(j.with&&(q=Object.entries(j.with).filter(a=>!!a[1]).map(([a,b])=>({tsKey:a,queryConfig:b,relation:h.relations[a]}))),j.extras)for(let[a,b]of Object.entries("function"==typeof j.extras?j.extras(e,{sql:f.ll}):j.extras))g.push({tsKey:a,value:(0,i.Hs)(b,p)});for(let{tsKey:a,value:b}of g)t.push({dbKey:(0,d.is)(b,f.Xs.Aliased)?b.fieldAlias:h.columns[a].name,tsKey:a,field:(0,d.is)(b,k.V)?(0,i.ug)(b,p):b,relationTableTsKey:void 0,isJson:!1,selection:[]});let r="function"==typeof j.orderBy?j.orderBy(e,(0,n.rl)()):j.orderBy??[];for(let{tsKey:e,queryConfig:g,relation:h}of(Array.isArray(r)||(r=[r]),w=r.map(a=>(0,d.is)(a,k.V)?(0,i.ug)(a,p):(0,i.yY)(a,p)),u=j.limit,v=j.offset,q)){let j=(0,n.W0)(b,c,h),k=c[(0,o.Lf)(h.referencedTable)],l=`${p}_${e}`,q=(0,m.Uo)(...j.fields.map((a,b)=>(0,m.eq)((0,i.ug)(j.references[b],l),(0,i.ug)(a,p)))),r=this.buildRelationalQuery({fullSchema:a,schema:b,tableNamesMap:c,table:a[k],tableConfig:b[k],queryConfig:(0,d.is)(h,n.pD)?!0===g?{limit:1}:{...g,limit:1}:g,tableAlias:l,joinOn:q,nestedQueryRelation:h}),s=(0,f.ll)`(${r.sql})`.as(e);t.push({dbKey:e,tsKey:e,field:s,relationTableTsKey:k,isJson:!0,selection:r.selection})}}if(0===t.length)throw new l.n({message:`No fields selected for table "${h.tsName}" ("${p}"). You need to have at least one item in "columns", "with" or "extras". If you need to select all columns, omit the "columns" key or set it to undefined.`});if(x=(0,m.Uo)(r,x),q){let a=(0,f.ll)`json_array(${f.ll.join(t.map(({field:a})=>(0,d.is)(a,bC)?f.ll.identifier(this.casing.getColumnCasing(a)):(0,d.is)(a,f.Xs.Aliased)?a.sql:a),(0,f.ll)`, `)})`;(0,d.is)(q,n.iv)&&(a=(0,f.ll)`coalesce(json_group_array(${a}), json_array())`);let b=[{dbKey:"data",tsKey:"data",field:a.as("data"),isJson:!0,relationTableTsKey:h.tsName,selection:t}];void 0!==u||void 0!==v||w.length>0?(s=this.buildSelectQuery({table:(0,i.oG)(e,p),fields:{},fieldsFlat:[{path:[],field:f.ll.raw("*")}],where:x,limit:u,offset:v,orderBy:w,setOperators:[]}),x=void 0,u=void 0,v=void 0,w=void 0):s=(0,i.oG)(e,p),s=this.buildSelectQuery({table:(0,d.is)(s,b6)?s:new g.n(s,{},p),fields:{},fieldsFlat:b.map(({field:a})=>({path:[],field:(0,d.is)(a,k.V)?(0,i.ug)(a,p):a})),joins:y,where:x,limit:u,offset:v,orderBy:w,setOperators:[]})}else s=this.buildSelectQuery({table:(0,i.oG)(e,p),fields:{},fieldsFlat:t.map(({field:a})=>({path:[],field:(0,d.is)(a,k.V)?(0,i.ug)(a,p):a})),joins:y,where:x,limit:u,offset:v,orderBy:w,setOperators:[]});return{tableTsKey:h.tsName,sql:s,selection:t}}}class ca extends b9{static [d.i]="SQLiteSyncDialect";migrate(a,b,c){let d=void 0===c||"string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e=(0,f.ll)`
			CREATE TABLE IF NOT EXISTS ${f.ll.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;b.run(e);let g=b.values((0,f.ll)`SELECT id, hash, created_at FROM ${f.ll.identifier(d)} ORDER BY created_at DESC LIMIT 1`)[0]??void 0;b.run((0,f.ll)`BEGIN`);try{for(let c of a)if(!g||Number(g[2])<c.folderMillis){for(let a of c.sql)b.run(f.ll.raw(a));b.run((0,f.ll)`INSERT INTO ${f.ll.identifier(d)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}b.run((0,f.ll)`COMMIT`)}catch(a){throw b.run((0,f.ll)`ROLLBACK`),a}}}class cb extends null{static [d.i]=null;async migrate(a,b,c){let d=void 0===c||"string"==typeof c?"__drizzle_migrations":c.migrationsTable??"__drizzle_migrations",e=sql`
			CREATE TABLE IF NOT EXISTS ${sql.identifier(d)} (
				id SERIAL PRIMARY KEY,
				hash text NOT NULL,
				created_at numeric
			)
		`;await b.run(e);let f=(await b.values(sql`SELECT id, hash, created_at FROM ${sql.identifier(d)} ORDER BY created_at DESC LIMIT 1`))[0]??void 0;await b.transaction(async b=>{for(let c of a)if(!f||Number(f[2])<c.folderMillis){for(let a of c.sql)await b.run(sql.raw(a));await b.run(sql`INSERT INTO ${sql.identifier(d)} ("hash", "created_at") VALUES(${c.hash}, ${c.folderMillis})`)}})}}class cc{static [d.i]="SQLiteSelectBuilder";fields;session;dialect;withList;distinct;constructor(a){this.fields=a.fields,this.session=a.session,this.dialect=a.dialect,this.withList=a.withList,this.distinct=a.distinct}from(a){let b,c=!!this.fields;return b=this.fields?this.fields:(0,d.is)(a,g.n)?Object.fromEntries(Object.keys(a._.selectedFields).map(b=>[b,a[b]])):(0,d.is)(a,b8)?a[q.n].selectedFields:(0,d.is)(a,f.Xs)?{}:(0,p.YD)(a),new ce({table:a,fields:b,isPartialSelect:c,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct})}}class cd extends a8.O{static [d.i]="SQLiteSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:a,fields:b,isPartialSelect:c,session:d,dialect:e,withList:f,distinct:g}){super(),this.config={withList:f,table:a,fields:{...b},distinct:g,setOperators:[]},this.isPartialSelect=c,this.session=d,this.dialect=e,this._={selectedFields:b},this.tableName=(0,p.zN)(a),this.joinsNotNullableMap="string"==typeof this.tableName?{[this.tableName]:!0}:{}}createJoin(a){return(b,c)=>{let h=this.tableName,i=(0,p.zN)(b);if("string"==typeof i&&this.config.joins?.some(a=>a.alias===i))throw Error(`Alias "${i}" is already used in this query`);if(!this.isPartialSelect&&(1===Object.keys(this.joinsNotNullableMap).length&&"string"==typeof h&&(this.config.fields={[h]:this.config.fields}),"string"==typeof i&&!(0,d.is)(b,f.Xs))){let a=(0,d.is)(b,g.n)?b._.selectedFields:(0,d.is)(b,f.Ss)?b[q.n].selectedFields:b[o.XI.Symbol.Columns];this.config.fields[i]=a}if("function"==typeof c&&(c=c(new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:c,table:b,joinType:a,alias:i}),"string"==typeof i)switch(a){case"left":this.joinsNotNullableMap[i]=!1;break;case"right":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!0;break;case"inner":this.joinsNotNullableMap[i]=!0;break;case"full":this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[i]=!1}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(a,b){return c=>{let d="function"==typeof c?c(cg()):c;if(!(0,p.DV)(this.getSelectedFields(),d.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:a,isAll:b,rightSelect:d}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);except=this.createSetOperator("except",!1);addSetOperators(a){return this.config.setOperators.push(...a),this}where(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=a,this}having(a){return"function"==typeof a&&(a=a(new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=a,this}groupBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(b)?b:[b]}else this.config.groupBy=a;return this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.fields,new e.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=c:this.config.orderBy=c}else this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=a:this.config.orderBy=a;return this}limit(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=a:this.config.limit=a,this}offset(a){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=a:this.config.offset=a,this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}as(a){return new Proxy(new g.n(this.getSQL(),this.config.fields,a),new e.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new e.b({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}}class ce extends cd{static [d.i]="SQLiteSelect";_prepare(a=!0){if(!this.session)throw Error("Cannot execute a query on a query builder. Please use a database instance instead.");let b=(0,p.He)(this.config.fields),c=this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),b,"all",!0);return c.joinsNotNullableMap=this.joinsNotNullableMap,c}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.all()}}function cf(a,b){return(c,d,...e)=>{let f=[d,...e].map(c=>({type:a,isAll:b,rightSelect:c}));for(let a of f)if(!(0,p.DV)(c.getSelectedFields(),a.rightSelect.getSelectedFields()))throw Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return c.addSetOperators(f)}}(0,p.XJ)(ce,[a9.k]);let cg=()=>({union:ch,unionAll:ci,intersect:cj,except:ck}),ch=cf("union",!1),ci=cf("union",!0),cj=cf("intersect",!1),ck=cf("except",!1);class cl{static [d.i]="SQLiteQueryBuilder";dialect;dialectConfig;constructor(a){this.dialect=(0,d.is)(a,b9)?a:void 0,this.dialectConfig=(0,d.is)(a,b9)?void 0:a}$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(b)),new Proxy(new g.J(c.getSQL(),c.getSelectedFields(),a,!0),new e.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}with(...a){let b=this;return{select:function(c){return new cc({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a})},selectDistinct:function(c){return new cc({fields:c??void 0,session:void 0,dialect:b.getDialect(),withList:a,distinct:!0})}}}select(a){return new cc({fields:a??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(a){return new cc({fields:a??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}getDialect(){return this.dialect||(this.dialect=new ca(this.dialectConfig)),this.dialect}}class cm{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [d.i]="SQLiteUpdateBuilder";set(a){return new cn(this.table,(0,p.q)(this.table,a),this.session,this.dialect,this.withList)}}class cn extends a9.k{constructor(a,b,c,d,e){super(),this.session=c,this.dialect=d,this.config={set:b,table:a,withList:e,joins:[]}}static [d.i]="SQLiteUpdate";config;from(a){return this.config.from=a,this}createJoin(a){return(b,c)=>{let f=(0,p.zN)(b);if("string"==typeof f&&this.config.joins.some(a=>a.alias===f))throw Error(`Alias "${f}" is already used in this query`);if("function"==typeof c){let a=this.config.from?(0,d.is)(b,b6)?b[o.XI.Symbol.Columns]:(0,d.is)(b,g.n)?b._.selectedFields:(0,d.is)(b,b8)?b[q.n].selectedFields:void 0:void 0;c=c(new Proxy(this.config.table[o.XI.Symbol.Columns],new e.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new e.b({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}return this.config.joins.push({on:c,table:b,joinType:a,alias:f}),this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[o.XI.Symbol.Columns],new e.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.orderBy=c}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}returning(a=this.config.table[b6.Symbol.Columns]){return this.config.returning=(0,p.He)(a),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class co{constructor(a,b,c,d){this.table=a,this.session=b,this.dialect=c,this.withList=d}static [d.i]="SQLiteInsertBuilder";values(a){if(0===(a=Array.isArray(a)?a:[a]).length)throw Error("values() must be called with at least one value");let b=a.map(a=>{let b={},c=this.table[o.XI.Symbol.Columns];for(let e of Object.keys(a)){let g=a[e];b[e]=(0,d.is)(g,f.Xs)?g:new f.Iw(g,c[e])}return b});return new cp(this.table,b,this.session,this.dialect,this.withList)}select(a){let b="function"==typeof a?a(new cl):a;if(!(0,d.is)(b,f.Xs)&&!(0,p.DV)(this.table[o.e],b._.selectedFields))throw Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new cp(this.table,b,this.session,this.dialect,this.withList,!0)}}class cp extends a9.k{constructor(a,b,c,d,e,f){super(),this.session=c,this.dialect=d,this.config={table:a,values:b,withList:e,select:f}}static [d.i]="SQLiteInsert";config;returning(a=this.config.table[b6.Symbol.Columns]){return this.config.returning=(0,p.He)(a),this}onConflictDoNothing(a={}){if(void 0===a.target)this.config.onConflict=(0,f.ll)`do nothing`;else{let b=Array.isArray(a.target)?(0,f.ll)`${a.target}`:(0,f.ll)`${[a.target]}`,c=a.where?(0,f.ll)` where ${a.where}`:(0,f.ll)``;this.config.onConflict=(0,f.ll)`${b} do nothing${c}`}return this}onConflictDoUpdate(a){if(a.where&&(a.targetWhere||a.setWhere))throw Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let b=a.where?(0,f.ll)` where ${a.where}`:void 0,c=a.targetWhere?(0,f.ll)` where ${a.targetWhere}`:void 0,d=a.setWhere?(0,f.ll)` where ${a.setWhere}`:void 0,e=Array.isArray(a.target)?(0,f.ll)`${a.target}`:(0,f.ll)`${[a.target]}`,g=this.dialect.buildUpdateSet(this.config.table,(0,p.q)(this.config.table,a.set));return this.config.onConflict=(0,f.ll)`${e}${c} do update set ${g}${b}${d}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(){return this.config.returning?this.all():this.run()}$dynamic(){return this}}class cq extends a9.k{constructor(a,b,c,d){super(),this.table=a,this.session=b,this.dialect=c,this.config={table:a,withList:d}}static [d.i]="SQLiteDelete";config;where(a){return this.config.where=a,this}orderBy(...a){if("function"==typeof a[0]){let b=a[0](new Proxy(this.config.table[o.XI.Symbol.Columns],new e.b({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),c=Array.isArray(b)?b:[b];this.config.orderBy=c}else this.config.orderBy=a;return this}limit(a){return this.config.limit=a,this}returning(a=this.table[b6.Symbol.Columns]){return this.config.returning=(0,p.He)(a),this}getSQL(){return this.dialect.buildDeleteQuery(this.config)}toSQL(){let{typings:a,...b}=this.dialect.sqlToQuery(this.getSQL());return b}_prepare(a=!0){return this.session[a?"prepareOneTimeQuery":"prepareQuery"](this.dialect.sqlToQuery(this.getSQL()),this.config.returning,this.config.returning?"all":"run",!0)}prepare(){return this._prepare(!1)}run=a=>this._prepare().run(a);all=a=>this._prepare().all(a);get=a=>this._prepare().get(a);values=a=>this._prepare().values(a);async execute(a){return this._prepare().execute(a)}$dynamic(){return this}}class cr extends f.Xs{constructor(a){super(cr.buildEmbeddedCount(a.source,a.filters).queryChunks),this.params=a,this.session=a.session,this.sql=cr.buildCount(a.source,a.filters)}sql;static [d.i]="SQLiteCountBuilderAsync";[Symbol.toStringTag]="SQLiteCountBuilderAsync";session;static buildEmbeddedCount(a,b){return(0,f.ll)`(select count(*) from ${a}${f.ll.raw(" where ").if(b)}${b})`}static buildCount(a,b){return(0,f.ll)`select count(*) from ${a}${f.ll.raw(" where ").if(b)}${b}`}then(a,b){return Promise.resolve(this.session.count(this.sql)).then(a,b)}catch(a){return this.then(void 0,a)}finally(a){return this.then(b=>(a?.(),b),b=>{throw a?.(),b})}}class cs{constructor(a,b,c,d,e,f,g,h){this.mode=a,this.fullSchema=b,this.schema=c,this.tableNamesMap=d,this.table=e,this.tableConfig=f,this.dialect=g,this.session=h}static [d.i]="SQLiteAsyncRelationalQueryBuilder";findMany(a){return"sync"===this.mode?new cu(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many"):new ct(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a||{},"many")}findFirst(a){return"sync"===this.mode?new cu(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first"):new ct(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,a?{...a,limit:1}:{limit:1},"first")}}class ct extends a9.k{constructor(a,b,c,d,e,f,g,h,i){super(),this.fullSchema=a,this.schema=b,this.tableNamesMap=c,this.table=d,this.tableConfig=e,this.dialect=f,this.session=g,this.config=h,this.mode=i}static [d.i]="SQLiteAsyncRelationalQuery";mode;getSQL(){return this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}).sql}_prepare(a=!1){let{query:b,builtQuery:c}=this._toSQL();return this.session[a?"prepareOneTimeQuery":"prepareQuery"](c,void 0,"first"===this.mode?"get":"all",!0,(a,c)=>{let d=a.map(a=>(0,n.I$)(this.schema,this.tableConfig,a,b.selection,c));return"first"===this.mode?d[0]:d})}prepare(){return this._prepare(!1)}_toSQL(){let a=this.dialect.buildRelationalQuery({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName}),b=this.dialect.sqlToQuery(a.sql);return{query:a,builtQuery:b}}toSQL(){return this._toSQL().builtQuery}executeRaw(){return"first"===this.mode?this._prepare(!1).get():this._prepare(!1).all()}async execute(){return this.executeRaw()}}class cu extends ct{static [d.i]="SQLiteSyncRelationalQuery";sync(){return this.executeRaw()}}class cv extends a9.k{constructor(a,b,c,d,e){super(),this.execute=a,this.getSQL=b,this.dialect=d,this.mapBatchResult=e,this.config={action:c}}static [d.i]="SQLiteRaw";config;getQuery(){return{...this.dialect.sqlToQuery(this.getSQL()),method:this.config.action}}mapResult(a,b){return b?this.mapBatchResult(a):a}_prepare(){return this}isResponseInArrayMode(){return!1}}class cw{constructor(a,b,c,d){this.resultKind=a,this.dialect=b,this.session=c,this._=d?{schema:d.schema,fullSchema:d.fullSchema,tableNamesMap:d.tableNamesMap}:{schema:void 0,fullSchema:{},tableNamesMap:{}},this.query={};let e=this.query;if(this._.schema)for(let[f,g]of Object.entries(this._.schema))e[f]=new cs(a,d.fullSchema,this._.schema,this._.tableNamesMap,d.fullSchema[f],g,b,c)}static [d.i]="BaseSQLiteDatabase";query;$with(a){let b=this;return{as:c=>("function"==typeof c&&(c=c(new cl(b.dialect))),new Proxy(new g.J(c.getSQL(),c.getSelectedFields(),a,!0),new e.b({alias:a,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}}$count(a,b){return new cr({source:a,filters:b,session:this.session})}with(...a){let b=this;return{select:function(c){return new cc({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a})},selectDistinct:function(c){return new cc({fields:c??void 0,session:b.session,dialect:b.dialect,withList:a,distinct:!0})},update:function(c){return new cm(c,b.session,b.dialect,a)},insert:function(c){return new co(c,b.session,b.dialect,a)},delete:function(c){return new cq(c,b.session,b.dialect,a)}}}select(a){return new cc({fields:a??void 0,session:this.session,dialect:this.dialect})}selectDistinct(a){return new cc({fields:a??void 0,session:this.session,dialect:this.dialect,distinct:!0})}update(a){return new cm(a,this.session,this.dialect)}insert(a){return new co(a,this.session,this.dialect)}delete(a){return new cq(a,this.session,this.dialect)}run(a){let b="string"==typeof a?f.ll.raw(a):a.getSQL();return"async"===this.resultKind?new cv(async()=>this.session.run(b),()=>b,"run",this.dialect,this.session.extractRawRunValueFromBatchResult.bind(this.session)):this.session.run(b)}all(a){let b="string"==typeof a?f.ll.raw(a):a.getSQL();return"async"===this.resultKind?new cv(async()=>this.session.all(b),()=>b,"all",this.dialect,this.session.extractRawAllValueFromBatchResult.bind(this.session)):this.session.all(b)}get(a){let b="string"==typeof a?f.ll.raw(a):a.getSQL();return"async"===this.resultKind?new cv(async()=>this.session.get(b),()=>b,"get",this.dialect,this.session.extractRawGetValueFromBatchResult.bind(this.session)):this.session.get(b)}values(a){let b="string"==typeof a?f.ll.raw(a):a.getSQL();return"async"===this.resultKind?new cv(async()=>this.session.values(b),()=>b,"values",this.dialect,this.session.extractRawValuesValueFromBatchResult.bind(this.session)):this.session.values(b)}transaction(a,b){return this.session.transaction(a,b)}}function cx(...a){return a[0].columns?new cy(a[0].columns,a[0].name):new cy(a)}class cy{static [d.i]="MySqlPrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new cz(a,this.columns,this.name)}}class cz{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [d.i]="MySqlPrimaryKey";columns;name;getName(){return this.name??`${this.table[a4.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}var cA=c(67969),cB=c(29745),cC=c(62352),cD=c(84266),cE=c(31375),cF=c(4396);function cG(...a){return a[0].columns?new cH(a[0].columns,a[0].name):new cH(a)}class cH{static [d.i]="SQLitePrimaryKeyBuilder";columns;name;constructor(a,b){this.columns=a,this.name=b}build(a){return new cI(a,this.columns,this.name)}}class cI{constructor(a,b,c){this.table=a,this.columns=b,this.name=c}static [d.i]="SQLitePrimaryKey";columns;name;getName(){return this.name??`${this.table[b6.Symbol.Name]}_${this.columns.map(a=>a.name).join("_")}_pk`}}function cJ(a,b){if((0,d.is)(a,bt)){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??a5("user",{id:a_("id",{length:255}).primaryKey().$defaultFn(()=>crypto.randomUUID()),name:a_("name",{length:255}),email:a_("email",{length:255}).unique(),emailVerified:aS("emailVerified",{mode:"date",fsp:3}),image:a_("image",{length:255})}),c=a.accountsTable??a5("account",{userId:a_("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),type:a_("type",{length:255}).$type().notNull(),provider:a_("provider",{length:255}).notNull(),providerAccountId:a_("providerAccountId",{length:255}).notNull(),refresh_token:a_("refresh_token",{length:255}),access_token:a_("access_token",{length:255}),expires_at:aq("expires_at"),token_type:a_("token_type",{length:255}),scope:a_("scope",{length:255}),id_token:a_("id_token",{length:2048}),session_state:a_("session_state",{length:255})},a=>({compositePk:cx({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??a5("session",{sessionToken:a_("sessionToken",{length:255}).primaryKey(),userId:a_("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),expires:aS("expires",{mode:"date"}).notNull()}),e=a.verificationTokensTable??a5("verificationToken",{identifier:a_("identifier",{length:255}).notNull(),token:a_("token",{length:255}).notNull(),expires:aS("expires",{mode:"date"}).notNull()},a=>({compositePk:cx({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??a5("authenticator",{credentialID:a_("credentialID",{length:255}).notNull().unique(),userId:a_("userId",{length:255}).notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:a_("providerAccountId",{length:255}).notNull(),credentialPublicKey:a_("credentialPublicKey",{length:255}).notNull(),counter:aq("counter").notNull(),credentialDeviceType:a_("credentialDeviceType",{length:255}).notNull(),credentialBackedUp:N("credentialBackedUp").notNull(),transports:a_("transports",{length:255})},a=>({compositePk:cx({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=(0,p.YD)(c).id.defaultFn,[g]=await a.insert(c).values(f?e:{...e,id:d}).$returningId();return a.select().from(c).where((0,m.eq)(c.id,g?g.id:d)).then(a=>a[0])},getUser:async b=>a.select().from(c).where((0,m.eq)(c.id,b)).then(a=>a.length>0?a[0]:null),getUserByEmail:async b=>a.select().from(c).where((0,m.eq)(c.email,b)).then(a=>a.length>0?a[0]:null),createSession:async b=>(await a.insert(e).values(b),a.select().from(e).where((0,m.eq)(e.sessionToken,b.sessionToken)).then(a=>a[0])),getSessionAndUser:async b=>a.select({session:e,user:c}).from(e).where((0,m.eq)(e.sessionToken,b)).innerJoin(c,(0,m.eq)(c.id,e.userId)).then(a=>a.length>0?a[0]:null),async updateUser(b){if(!b.id)throw Error("No user id.");await a.update(c).set(b).where((0,m.eq)(c.id,b.id));let[d]=await a.select().from(c).where((0,m.eq)(c.id,b.id));if(!d)throw Error("No user found.");return d},updateSession:async b=>(await a.update(e).set(b).where((0,m.eq)(e.sessionToken,b.sessionToken)),a.select().from(e).where((0,m.eq)(e.sessionToken,b.sessionToken)).then(a=>a[0])),async linkAccount(b){await a.insert(d).values(b)},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,(0,m.eq)(d.userId,c.id)).where((0,m.Uo)((0,m.eq)(d.provider,b.provider),(0,m.eq)(d.providerAccountId,b.providerAccountId))).then(a=>a[0]);return e?.user??null},async deleteSession(b){await a.delete(e).where((0,m.eq)(e.sessionToken,b))},createVerificationToken:async b=>(await a.insert(f).values(b),a.select().from(f).where((0,m.eq)(f.identifier,b.identifier)).then(a=>a[0])),async useVerificationToken(b){let c=await a.select().from(f).where((0,m.Uo)((0,m.eq)(f.identifier,b.identifier),(0,m.eq)(f.token,b.token))).then(a=>a.length>0?a[0]:null);return c&&await a.delete(f).where((0,m.Uo)((0,m.eq)(f.identifier,b.identifier),(0,m.eq)(f.token,b.token))),c},async deleteUser(b){await a.delete(c).where((0,m.eq)(c.id,b))},async unlinkAccount(b){await a.delete(d).where((0,m.Uo)((0,m.eq)(d.provider,b.provider),(0,m.eq)(d.providerAccountId,b.providerAccountId)))},getAccount:async(b,c)=>a.select().from(d).where((0,m.Uo)((0,m.eq)(d.provider,c),(0,m.eq)(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>(await a.insert(g).values(b),await a.select().from(g).where((0,m.eq)(g.credentialID,b.credentialID)).then(a=>a[0]??null)),getAuthenticator:async b=>await a.select().from(g).where((0,m.eq)(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>await a.select().from(g).where((0,m.eq)(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){await a.update(g).set({counter:c}).where((0,m.eq)(g.credentialID,b));let d=await a.select().from(g).where((0,m.eq)(g.credentialID,b)).then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}if((0,d.is)(a,bu.p)){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??(0,cA.cJ)("user",{id:(0,cB.Qq)("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:(0,cB.Qq)("name"),email:(0,cB.Qq)("email").unique(),emailVerified:(0,cC.vE)("emailVerified",{mode:"date"}),image:(0,cB.Qq)("image")}),c=a.accountsTable??(0,cA.cJ)("account",{userId:(0,cB.Qq)("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),type:(0,cB.Qq)("type").$type().notNull(),provider:(0,cB.Qq)("provider").notNull(),providerAccountId:(0,cB.Qq)("providerAccountId").notNull(),refresh_token:(0,cB.Qq)("refresh_token"),access_token:(0,cB.Qq)("access_token"),expires_at:(0,cD.nd)("expires_at"),token_type:(0,cB.Qq)("token_type"),scope:(0,cB.Qq)("scope"),id_token:(0,cB.Qq)("id_token"),session_state:(0,cB.Qq)("session_state")},a=>({compositePk:(0,cE.ie)({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??(0,cA.cJ)("session",{sessionToken:(0,cB.Qq)("sessionToken").primaryKey(),userId:(0,cB.Qq)("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),expires:(0,cC.vE)("expires",{mode:"date"}).notNull()}),e=a.verificationTokensTable??(0,cA.cJ)("verificationToken",{identifier:(0,cB.Qq)("identifier").notNull(),token:(0,cB.Qq)("token").notNull(),expires:(0,cC.vE)("expires",{mode:"date"}).notNull()},a=>({compositePk:(0,cE.ie)({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??(0,cA.cJ)("authenticator",{credentialID:(0,cB.Qq)("credentialID").notNull().unique(),userId:(0,cB.Qq)("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:(0,cB.Qq)("providerAccountId").notNull(),credentialPublicKey:(0,cB.Qq)("credentialPublicKey").notNull(),counter:(0,cD.nd)("counter").notNull(),credentialDeviceType:(0,cB.Qq)("credentialDeviceType").notNull(),credentialBackedUp:(0,cF.zM)("credentialBackedUp").notNull(),transports:(0,cB.Qq)("transports")},a=>({compositePK:(0,cE.ie)({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=(0,p.YD)(c).id.hasDefault;return a.insert(c).values(f?e:{...e,id:d}).returning().then(a=>a[0])},getUser:async b=>a.select().from(c).where((0,m.eq)(c.id,b)).then(a=>a.length>0?a[0]:null),getUserByEmail:async b=>a.select().from(c).where((0,m.eq)(c.email,b)).then(a=>a.length>0?a[0]:null),createSession:async b=>a.insert(e).values(b).returning().then(a=>a[0]),getSessionAndUser:async b=>a.select({session:e,user:c}).from(e).where((0,m.eq)(e.sessionToken,b)).innerJoin(c,(0,m.eq)(c.id,e.userId)).then(a=>a.length>0?a[0]:null),async updateUser(b){if(!b.id)throw Error("No user id.");let[d]=await a.update(c).set(b).where((0,m.eq)(c.id,b.id)).returning();if(!d)throw Error("No user found.");return d},updateSession:async b=>a.update(e).set(b).where((0,m.eq)(e.sessionToken,b.sessionToken)).returning().then(a=>a[0]),async linkAccount(b){await a.insert(d).values(b)},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,(0,m.eq)(d.userId,c.id)).where((0,m.Uo)((0,m.eq)(d.provider,b.provider),(0,m.eq)(d.providerAccountId,b.providerAccountId))).then(a=>a[0]);return e?.user??null},async deleteSession(b){await a.delete(e).where((0,m.eq)(e.sessionToken,b))},createVerificationToken:async b=>a.insert(f).values(b).returning().then(a=>a[0]),useVerificationToken:async b=>a.delete(f).where((0,m.Uo)((0,m.eq)(f.identifier,b.identifier),(0,m.eq)(f.token,b.token))).returning().then(a=>a.length>0?a[0]:null),async deleteUser(b){await a.delete(c).where((0,m.eq)(c.id,b))},async unlinkAccount(b){await a.delete(d).where((0,m.Uo)((0,m.eq)(d.provider,b.provider),(0,m.eq)(d.providerAccountId,b.providerAccountId)))},getAccount:async(b,c)=>a.select().from(d).where((0,m.Uo)((0,m.eq)(d.provider,c),(0,m.eq)(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>a.insert(g).values(b).returning().then(a=>a[0]??null),getAuthenticator:async b=>a.select().from(g).where((0,m.eq)(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>a.select().from(g).where((0,m.eq)(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){let d=await a.update(g).set({counter:c}).where((0,m.eq)(g.credentialID,b)).returning().then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}if((0,d.is)(a,cw)){let{usersTable:c,accountsTable:d,sessionsTable:e,verificationTokensTable:f,authenticatorsTable:g}=function(a={}){let b=a.usersTable??b7("user",{id:b4("id").primaryKey().$defaultFn(()=>crypto.randomUUID()),name:b4("name"),email:b4("email").unique(),emailVerified:bV("emailVerified",{mode:"timestamp_ms"}),image:b4("image")}),c=a.accountsTable??b7("account",{userId:b4("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),type:b4("type").$type().notNull(),provider:b4("provider").notNull(),providerAccountId:b4("providerAccountId").notNull(),refresh_token:b4("refresh_token"),access_token:b4("access_token"),expires_at:bV("expires_at"),token_type:b4("token_type"),scope:b4("scope"),id_token:b4("id_token"),session_state:b4("session_state")},a=>({compositePk:cG({columns:[a.provider,a.providerAccountId]})})),d=a.sessionsTable??b7("session",{sessionToken:b4("sessionToken").primaryKey(),userId:b4("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),expires:bV("expires",{mode:"timestamp_ms"}).notNull()}),e=a.verificationTokensTable??b7("verificationToken",{identifier:b4("identifier").notNull(),token:b4("token").notNull(),expires:bV("expires",{mode:"timestamp_ms"}).notNull()},a=>({compositePk:cG({columns:[a.identifier,a.token]})})),f=a.authenticatorsTable??b7("authenticator",{credentialID:b4("credentialID").notNull().unique(),userId:b4("userId").notNull().references(()=>b.id,{onDelete:"cascade"}),providerAccountId:b4("providerAccountId").notNull(),credentialPublicKey:b4("credentialPublicKey").notNull(),counter:bV("counter").notNull(),credentialDeviceType:b4("credentialDeviceType").notNull(),credentialBackedUp:bV("credentialBackedUp",{mode:"boolean"}).notNull(),transports:b4("transports")},a=>({compositePK:cG({columns:[a.userId,a.credentialID]})}));return{usersTable:b,accountsTable:c,sessionsTable:d,verificationTokensTable:e,authenticatorsTable:f}}(b);return{async createUser(b){let{id:d,...e}=b,f=(0,p.YD)(c).id.hasDefault;return a.insert(c).values(f?e:{...e,id:d}).returning().get()},getUser:async b=>await a.select().from(c).where((0,m.eq)(c.id,b)).get()??null,getUserByEmail:async b=>await a.select().from(c).where((0,m.eq)(c.email,b)).get()??null,createSession:async b=>a.insert(e).values(b).returning().get(),getSessionAndUser:async b=>await a.select({session:e,user:c}).from(e).where((0,m.eq)(e.sessionToken,b)).innerJoin(c,(0,m.eq)(c.id,e.userId)).get()??null,async updateUser(b){if(!b.id)throw Error("No user id.");let d=await a.update(c).set(b).where((0,m.eq)(c.id,b.id)).returning().get();if(!d)throw Error("User not found.");return d},updateSession:async b=>await a.update(e).set(b).where((0,m.eq)(e.sessionToken,b.sessionToken)).returning().get()??null,async linkAccount(b){await a.insert(d).values(b).run()},async getUserByAccount(b){let e=await a.select({account:d,user:c}).from(d).innerJoin(c,(0,m.eq)(d.userId,c.id)).where((0,m.Uo)((0,m.eq)(d.provider,b.provider),(0,m.eq)(d.providerAccountId,b.providerAccountId))).get();return e?.user??null},async deleteSession(b){await a.delete(e).where((0,m.eq)(e.sessionToken,b)).run()},createVerificationToken:async b=>a.insert(f).values(b).returning().get(),useVerificationToken:async b=>await a.delete(f).where((0,m.Uo)((0,m.eq)(f.identifier,b.identifier),(0,m.eq)(f.token,b.token))).returning().get()??null,async deleteUser(b){await a.delete(c).where((0,m.eq)(c.id,b)).run()},async unlinkAccount(b){await a.delete(d).where((0,m.Uo)((0,m.eq)(d.provider,b.provider),(0,m.eq)(d.providerAccountId,b.providerAccountId))).run()},getAccount:async(b,c)=>a.select().from(d).where((0,m.Uo)((0,m.eq)(d.provider,c),(0,m.eq)(d.providerAccountId,b))).then(a=>a[0]??null),createAuthenticator:async b=>a.insert(g).values(b).returning().then(a=>a[0]??null),getAuthenticator:async b=>a.select().from(g).where((0,m.eq)(g.credentialID,b)).then(a=>a[0]??null),listAuthenticatorsByUserId:async b=>a.select().from(g).where((0,m.eq)(g.userId,b)).then(a=>a),async updateAuthenticatorCounter(b,c){let d=await a.update(g).set({counter:c}).where((0,m.eq)(g.credentialID,b)).returning().then(a=>a[0]);if(!d)throw Error("Authenticator not found.");return d}}}throw Error(`Unsupported database type (${typeof a}) in Auth.js Drizzle adapter.`)}},83498:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generalVerify=void 0;let d=c(93883),e=c(69817),f=c(16217);b.generalVerify=async function(a,b,c){if(!(0,f.default)(a))throw new e.JWSInvalid("General JWS must be an object");if(!Array.isArray(a.signatures)||!a.signatures.every(f.default))throw new e.JWSInvalid("JWS Signatures missing or incorrect type");for(let e of a.signatures)try{return await (0,d.flattenedVerify)({header:e.header,payload:a.payload,protected:e.protected,signature:e.signature},b,c)}catch{}throw new e.JWSSignatureVerificationFailed}},83684:(a,b,c)=>{a.exports=c(66084).default},83820:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511),e=c(67040),f=c(13188),g=c(69817),h=c(69558),i=c(72927),j=c(25066),k=c(94415),l=c(89722),m=c(40295),n=a=>{let b;if((0,i.isCryptoKey)(a)){if(!a.extractable)throw TypeError("CryptoKey is not extractable");b=d.KeyObject.from(a)}else if((0,j.default)(a))b=a;else if(a instanceof Uint8Array)return{kty:"oct",k:(0,e.encode)(a)};else throw TypeError((0,k.default)(a,...l.types,"Uint8Array"));if(m.jwkExport){if("secret"!==b.type&&!["rsa","ec","ed25519","x25519","ed448","x448"].includes(b.asymmetricKeyType))throw new g.JOSENotSupported("Unsupported key asymmetricKeyType");return b.export({format:"jwk"})}switch(b.type){case"secret":return{kty:"oct",k:(0,e.encode)(b.export())};case"private":case"public":switch(b.asymmetricKeyType){case"rsa":{let a,c=b.export({format:"der",type:"pkcs1"}),d=new f.default(c);"private"===b.type&&d.unsignedInteger();let g=(0,e.encode)(d.unsignedInteger()),h=(0,e.encode)(d.unsignedInteger());return"private"===b.type&&(a={d:(0,e.encode)(d.unsignedInteger()),p:(0,e.encode)(d.unsignedInteger()),q:(0,e.encode)(d.unsignedInteger()),dp:(0,e.encode)(d.unsignedInteger()),dq:(0,e.encode)(d.unsignedInteger()),qi:(0,e.encode)(d.unsignedInteger())}),d.end(),{kty:"RSA",n:g,e:h,...a}}case"ec":{let a,c,f,i=(0,h.default)(b);switch(i){case"secp256k1":a=64,c=33,f=-1;break;case"P-256":a=64,c=36,f=-1;break;case"P-384":a=96,c=35,f=-3;break;case"P-521":a=132,c=35,f=-3;break;default:throw new g.JOSENotSupported("Unsupported curve")}if("public"===b.type){let c=b.export({type:"spki",format:"der"});return{kty:"EC",crv:i,x:(0,e.encode)(c.subarray(-a,-a/2)),y:(0,e.encode)(c.subarray(-a/2))}}let j=b.export({type:"pkcs8",format:"der"});return j.length<100&&(c+=f),{...n((0,d.createPublicKey)(b)),d:(0,e.encode)(j.subarray(c,c+a/2))}}case"ed25519":case"x25519":{let a=(0,h.default)(b);if("public"===b.type){let c=b.export({type:"spki",format:"der"});return{kty:"OKP",crv:a,x:(0,e.encode)(c.subarray(-32))}}let c=b.export({type:"pkcs8",format:"der"});return{...n((0,d.createPublicKey)(b)),d:(0,e.encode)(c.subarray(-32))}}case"ed448":case"x448":{let a=(0,h.default)(b);if("public"===b.type){let c=b.export({type:"spki",format:"der"});return{kty:"OKP",crv:a,x:(0,e.encode)(c.subarray("Ed448"===a?-57:-56))}}let c=b.export({type:"pkcs8",format:"der"});return{...n((0,d.createPublicKey)(b)),d:(0,e.encode)(c.subarray("Ed448"===a?-57:-56))}}default:throw new g.JOSENotSupported("Unsupported key asymmetricKeyType")}default:throw new g.JOSENotSupported("Unsupported key type")}};b.default=n},83961:(a,b,c)=>{var d=c(55511),e=c(67109),f=c(81630),g=c(55591),h=c(79551),i=c(11723),j=c(15394);b.OAuth=function(a,b,c,d,e,f,g,h,i){if(this._isEcho=!1,this._requestUrl=a,this._accessUrl=b,this._consumerKey=c,this._consumerSecret=this._encodeData(d),"RSA-SHA1"==g&&(this._privateKey=d),this._version=e,void 0===f?this._authorize_callback="oob":this._authorize_callback=f,"PLAINTEXT"!=g&&"HMAC-SHA1"!=g&&"RSA-SHA1"!=g)throw Error("Un-supported signature method: "+g);this._signatureMethod=g,this._nonceSize=h||32,this._headers=i||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._clientOptions=this._defaultClientOptions={requestTokenHttpMethod:"POST",accessTokenHttpMethod:"POST",followRedirects:!0},this._oauthParameterSeperator=","},b.OAuthEcho=function(a,b,c,d,e,f,g,h){if(this._isEcho=!0,this._realm=a,this._verifyCredentials=b,this._consumerKey=c,this._consumerSecret=this._encodeData(d),"RSA-SHA1"==f&&(this._privateKey=d),this._version=e,"PLAINTEXT"!=f&&"HMAC-SHA1"!=f&&"RSA-SHA1"!=f)throw Error("Un-supported signature method: "+f);this._signatureMethod=f,this._nonceSize=g||32,this._headers=h||{Accept:"*/*",Connection:"close","User-Agent":"Node authentication"},this._oauthParameterSeperator=","},b.OAuthEcho.prototype=b.OAuth.prototype,b.OAuth.prototype._getTimestamp=function(){return Math.floor(new Date().getTime()/1e3)},b.OAuth.prototype._encodeData=function(a){return null==a||""==a?"":encodeURIComponent(a).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},b.OAuth.prototype._decodeData=function(a){return null!=a&&(a=a.replace(/\+/g," ")),decodeURIComponent(a)},b.OAuth.prototype._getSignature=function(a,b,c,d){var e=this._createSignatureBase(a,b,c);return this._createSignature(e,d)},b.OAuth.prototype._normalizeUrl=function(a){var b=h.parse(a,!0),c="";return b.port&&("http:"==b.protocol&&"80"!=b.port||"https:"==b.protocol&&"443"!=b.port)&&(c=":"+b.port),b.pathname&&""!=b.pathname||(b.pathname="/"),b.protocol+"//"+b.hostname+c+b.pathname},b.OAuth.prototype._isParameterNameAnOAuthParameter=function(a){var b=a.match("^oauth_");return!!b&&"oauth_"===b[0]},b.OAuth.prototype._buildAuthorizationHeaders=function(a){var b="OAuth ";this._isEcho&&(b+='realm="'+this._realm+'",');for(var c=0;c<a.length;c++)this._isParameterNameAnOAuthParameter(a[c][0])&&(b+=""+this._encodeData(a[c][0])+'="'+this._encodeData(a[c][1])+'"'+this._oauthParameterSeperator);return b.substring(0,b.length-this._oauthParameterSeperator.length)},b.OAuth.prototype._makeArrayOfArgumentsHash=function(a){var b=[];for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(Array.isArray(d))for(var e=0;e<d.length;e++)b[b.length]=[c,d[e]];else b[b.length]=[c,d]}return b},b.OAuth.prototype._sortRequestParams=function(a){return a.sort(function(a,b){return a[0]==b[0]?a[1]<b[1]?-1:1:a[0]<b[0]?-1:1}),a},b.OAuth.prototype._normaliseRequestParams=function(a){for(var b=this._makeArrayOfArgumentsHash(a),c=0;c<b.length;c++)b[c][0]=this._encodeData(b[c][0]),b[c][1]=this._encodeData(b[c][1]);b=this._sortRequestParams(b);for(var a="",c=0;c<b.length;c++)a+=b[c][0],a+="=",a+=b[c][1],c<b.length-1&&(a+="&");return a},b.OAuth.prototype._createSignatureBase=function(a,b,c){return b=this._encodeData(this._normalizeUrl(b)),c=this._encodeData(c),a.toUpperCase()+"&"+b+"&"+c},b.OAuth.prototype._createSignature=function(a,b){if(void 0===b)var b="";else b=this._encodeData(b);var c=this._consumerSecret+"&"+b,f="";return"PLAINTEXT"==this._signatureMethod?f=c:"RSA-SHA1"==this._signatureMethod?(c=this._privateKey||"",f=d.createSign("RSA-SHA1").update(a).sign(c,"base64")):f=d.Hmac?d.createHmac("sha1",c).update(a).digest("base64"):e.HMACSHA1(c,a),f},b.OAuth.prototype.NONCE_CHARS=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],b.OAuth.prototype._getNonce=function(a){for(var b,c=[],d=this.NONCE_CHARS,e=d.length,f=0;f<a;f++)b=Math.floor(Math.random()*e),c[f]=d[b];return c.join("")},b.OAuth.prototype._createClient=function(a,b,c,d,e,h){return(h?g:f).request({host:b,port:a,path:d,method:c,headers:e})},b.OAuth.prototype._prepareParameters=function(a,b,c,d,e){var f={oauth_timestamp:this._getTimestamp(),oauth_nonce:this._getNonce(this._nonceSize),oauth_version:this._version,oauth_signature_method:this._signatureMethod,oauth_consumer_key:this._consumerKey};if(a&&(f.oauth_token=a),this._isEcho)k=this._getSignature("GET",this._verifyCredentials,this._normaliseRequestParams(f),b);else{if(e)for(var g in e)e.hasOwnProperty(g)&&(f[g]=e[g]);var j=h.parse(d,!1);if(j.query){var k,l,m=i.parse(j.query);for(var g in m){var n=m[g];if("object"==typeof n)for(l in n)f[g+"["+l+"]"]=n[l];else f[g]=n}}k=this._getSignature(c,d,this._normaliseRequestParams(f),b)}var o=this._sortRequestParams(this._makeArrayOfArgumentsHash(f));return o[o.length]=["oauth_signature",k],o},b.OAuth.prototype._performSecureRequest=function(a,b,c,d,e,f,g,k){var l,m,n=this._prepareParameters(a,b,c,d,e);g||(g="application/x-www-form-urlencoded");var o=h.parse(d,!1);"http:"!=o.protocol||o.port||(o.port=80),"https:"!=o.protocol||o.port||(o.port=443);var p={},q=this._buildAuthorizationHeaders(n);for(var r in this._isEcho?p["X-Verify-Credentials-Authorization"]=q:p.Authorization=q,p.Host=o.host,this._headers)this._headers.hasOwnProperty(r)&&(p[r]=this._headers[r]);for(var r in e)this._isParameterNameAnOAuthParameter(r)&&delete e[r];("POST"==c||"PUT"==c)&&null==f&&null!=e&&(f=i.stringify(e).replace(/\!/g,"%21").replace(/\'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")),f?Buffer.isBuffer(f)?p["Content-length"]=f.length:p["Content-length"]=Buffer.byteLength(f):p["Content-length"]=0,p["Content-Type"]=g,o.pathname&&""!=o.pathname||(o.pathname="/"),l=o.query?o.pathname+"?"+o.query:o.pathname,m="https:"==o.protocol?this._createClient(o.port,o.hostname,c,l,p,!0):this._createClient(o.port,o.hostname,c,l,p);var s=this._clientOptions;if(!k)return("POST"==c||"PUT"==c)&&null!=f&&""!=f&&m.write(f),m;var t="",u=this,v=j.isAnEarlyCloseHost(o.hostname),w=!1,x=function(d){w||(w=!0,d.statusCode>=200&&d.statusCode<=299?k(null,t,d):(301==d.statusCode||302==d.statusCode)&&s.followRedirects&&d.headers&&d.headers.location?u._performSecureRequest(a,b,c,d.headers.location,e,f,g,k):k({statusCode:d.statusCode,data:t},t,d))};m.on("response",function(a){a.setEncoding("utf8"),a.on("data",function(a){t+=a}),a.on("end",function(){x(a)}),a.on("close",function(){v&&x(a)})}),m.on("error",function(a){w||(w=!0,k(a))}),("POST"==c||"PUT"==c)&&null!=f&&""!=f&&m.write(f),m.end()},b.OAuth.prototype.setClientOptions=function(a){var b,c={},d=Object.prototype.hasOwnProperty;for(b in this._defaultClientOptions)d.call(a,b)?c[b]=a[b]:c[b]=this._defaultClientOptions[b];this._clientOptions=c},b.OAuth.prototype.getOAuthAccessToken=function(a,b,c,d){var e={};"function"==typeof c?d=c:e.oauth_verifier=c,this._performSecureRequest(a,b,this._clientOptions.accessTokenHttpMethod,this._accessUrl,e,null,null,function(a,b,c){if(a)d(a);else{var e=i.parse(b),f=e.oauth_token;delete e.oauth_token;var g=e.oauth_token_secret;delete e.oauth_token_secret,d(null,f,g,e)}})},b.OAuth.prototype.getProtectedResource=function(a,b,c,d,e){this._performSecureRequest(c,d,b,a,null,"",null,e)},b.OAuth.prototype.delete=function(a,b,c,d){return this._performSecureRequest(b,c,"DELETE",a,null,"",null,d)},b.OAuth.prototype.get=function(a,b,c,d){return this._performSecureRequest(b,c,"GET",a,null,"",null,d)},b.OAuth.prototype._putOrPost=function(a,b,c,d,e,f,g){var h=null;return"function"==typeof f&&(g=f,f=null),"string"==typeof e||Buffer.isBuffer(e)||(f="application/x-www-form-urlencoded",h=e,e=null),this._performSecureRequest(c,d,a,b,h,e,f,g)},b.OAuth.prototype.put=function(a,b,c,d,e,f){return this._putOrPost("PUT",a,b,c,d,e,f)},b.OAuth.prototype.post=function(a,b,c,d,e,f){return this._putOrPost("POST",a,b,c,d,e,f)},b.OAuth.prototype.getOAuthRequestToken=function(a,b){"function"==typeof a&&(b=a,a={}),this._authorize_callback&&(a.oauth_callback=this._authorize_callback),this._performSecureRequest(null,null,this._clientOptions.requestTokenHttpMethod,this._requestUrl,a,null,null,function(a,c,d){if(a)b(a);else{var e=i.parse(c),f=e.oauth_token,g=e.oauth_token_secret;delete e.oauth_token,delete e.oauth_token_secret,b(null,f,g,e)}})},b.OAuth.prototype.signUrl=function(a,b,c,d){if(void 0===d)var d="GET";for(var e=this._prepareParameters(b,c,d,a,{}),f=h.parse(a,!1),g="",i=0;i<e.length;i++)g+=e[i][0]+"="+this._encodeData(e[i][1])+"&";return g=g.substring(0,g.length-1),f.protocol+"//"+f.host+f.pathname+"?"+g},b.OAuth.prototype.authHeader=function(a,b,c,d){if(void 0===d)var d="GET";var e=this._prepareParameters(b,c,d,a,{});return this._buildAuthorizationHeaders(e)}},84266:(a,b,c)=>{"use strict";c.d(b,{nd:()=>i});var d=c(46493),e=c(93352),f=c(6766);class g extends f.p{static [d.i]="PgIntegerBuilder";constructor(a){super(a,"number","PgInteger")}build(a){return new h(a,this.config)}}class h extends e.Kl{static [d.i]="PgInteger";getSQLType(){return"integer"}mapFromDriverValue(a){return"string"==typeof a?Number.parseInt(a):a}}function i(a){return new g(a??"")}},84592:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.openidClient=e;var d=c(49646);async function e(a){let b,c=a.provider;if(c.httpOptions&&d.custom.setHttpOptionsDefaults(c.httpOptions),c.wellKnown)b=await d.Issuer.discover(c.wellKnown);else{var e,f,g;b=new d.Issuer({issuer:c.issuer,authorization_endpoint:null==(e=c.authorization)?void 0:e.url,token_endpoint:null==(f=c.token)?void 0:f.url,userinfo_endpoint:null==(g=c.userinfo)?void 0:g.url,jwks_uri:c.jwks_endpoint})}let h=new b.Client({client_id:c.clientId,client_secret:c.clientSecret,redirect_uris:[c.callbackUrl],...c.client},c.jwks);return h[d.custom.clock_tolerance]=10,h}},84634:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(94415),e=c(89722);b.default=(a,b,c)=>{a.startsWith("HS")||"dir"===a||a.startsWith("PBES2")||/^A\d{3}(?:GCM)?KW$/.test(a)?((a,b)=>{if(!(b instanceof Uint8Array)){if(!(0,e.default)(b))throw TypeError((0,d.withAlg)(a,b,...e.types,"Uint8Array"));if("secret"!==b.type)throw TypeError(`${e.types.join(" or ")} instances for symmetric algorithms must be of type "secret"`)}})(a,b):((a,b,c)=>{if(!(0,e.default)(b))throw TypeError((0,d.withAlg)(a,b,...e.types));if("secret"===b.type)throw TypeError(`${e.types.join(" or ")} instances for asymmetric algorithms must not be of type "secret"`);if("sign"===c&&"public"===b.type)throw TypeError(`${e.types.join(" or ")} instances for asymmetric algorithm signing must be of type "private"`);if("decrypt"===c&&"public"===b.type)throw TypeError(`${e.types.join(" or ")} instances for asymmetric algorithm decryption must be of type "private"`);if(b.algorithm&&"verify"===c&&"private"===b.type)throw TypeError(`${e.types.join(" or ")} instances for asymmetric algorithm verifying must be of type "public"`);if(b.algorithm&&"encrypt"===c&&"private"===b.type)throw TypeError(`${e.types.join(" or ")} instances for asymmetric algorithm encryption must be of type "public"`)})(a,b,c)}},85400:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.jwtVerify=void 0;let d=c(85685),e=c(19267),f=c(69817);b.jwtVerify=async function(a,b,c){var g;let h=await (0,d.compactVerify)(a,b,c);if((null==(g=h.protectedHeader.crit)?void 0:g.includes("b64"))&&!1===h.protectedHeader.b64)throw new f.JWTInvalid("JWTs MUST NOT use unencoded payload");let i={payload:(0,e.default)(h.protectedHeader,h.payload,c),protectedHeader:h.protectedHeader};return"function"==typeof b?{...i,key:h.key}:i}},85633:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.setModulusLength=b.weakMap=void 0,b.weakMap=new WeakMap;let c=(a,b)=>{let d=a.readUInt8(1);if((128&d)==0)return 0===b?d:c(a.subarray(2+d),b-1);let e=127&d;d=0;for(let b=0;b<e;b++)d<<=8,d|=a.readUInt8(2+b);return 0===b?d:c(a.subarray(2+d),b-1)};b.setModulusLength=(a,c)=>{b.weakMap.set(a,c)},b.default=(a,d)=>{if(2048>(a=>{var d,e;if(b.weakMap.has(a))return b.weakMap.get(a);let f=null!=(e=null==(d=a.asymmetricKeyDetails)?void 0:d.modulusLength)?e:((a,b)=>{let d=a.readUInt8(1);return(128&d)==0?c(a.subarray(2),b):c(a.subarray(2+(127&d)),b)})(a.export({format:"der",type:"pkcs1"}),+("private"===a.type))-1<<3;return b.weakMap.set(a,f),f})(a))throw TypeError(`${d} requires key modulusLength to be 2048 bits or larger`)}},85685:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.compactVerify=void 0;let d=c(93883),e=c(69817),f=c(74855);b.compactVerify=async function(a,b,c){if(a instanceof Uint8Array&&(a=f.decoder.decode(a)),"string"!=typeof a)throw new e.JWSInvalid("Compact JWS must be a string or Uint8Array");let{0:g,1:h,2:i,length:j}=a.split(".");if(3!==j)throw new e.JWSInvalid("Invalid Compact JWS");let k=await (0,d.flattenedVerify)({payload:h,protected:g,signature:i},b,c),l={payload:k.payload,protectedHeader:k.protectedHeader};return"function"==typeof b?{...l,key:k.key}:l}},85843:(a,b,c)=>{var d=c(57117),e=c(13615);a.exports=function(a,b,c){if(d())return Reflect.construct.apply(null,arguments);var f=[null];f.push.apply(f,b);var g=new(a.bind.apply(a,f));return c&&e(g,c.prototype),g},a.exports.__esModule=!0,a.exports.default=a.exports},85995:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){let{url:b,theme:c}=a;return(0,d.h)("div",{className:"verify-request"},c.brandColor&&(0,d.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${c.brandColor}
        }
      `}}),(0,d.h)("div",{className:"card"},c.logo&&(0,d.h)("img",{src:c.logo,alt:"Logo",className:"logo"}),(0,d.h)("h1",null,"Check your email"),(0,d.h)("p",null,"A sign in link has been sent to your email address."),(0,d.h)("p",null,(0,d.h)("a",{className:"site",href:b.origin},b.host))))};var d=c(21274)},86788:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=f;var d=c(55511),e=c(78190);async function f(a,b){var c,f,g,h;let{url:i,adapter:j,provider:k,callbackUrl:l,theme:m}=b,n=null!=(c=await (null==(f=k.generateVerificationToken)?void 0:f.call(k)))?c:(0,d.randomBytes)(32).toString("hex"),o=new Date(Date.now()+(null!=(g=k.maxAge)?g:86400)*1e3),p=new URLSearchParams({callbackUrl:l,token:n,email:a}),q=`${i}/callback/${k.id}?${p}`;return await Promise.all([k.sendVerificationRequest({identifier:a,token:n,expires:o,url:q,provider:k,theme:m}),null==(h=j.createVerificationToken)?void 0:h.call(j,{identifier:a,token:(0,e.hashToken)(n,b),expires:o})]),`${i}/verify-request?${new URLSearchParams({provider:k.id,type:k.type})}`}},86802:(a,b,c)=>{"use strict";c.r(b),c.d(b,{__esModule:()=>d.B,cookies:()=>d.U,draftMode:()=>f.r,headers:()=>e.b});var d=c(14230),e=c(34603),f=c(35916)},86915:(a,b,c)=>{let{format:d}=c(28354);class e extends Error{constructor({error_description:a,error:b,error_uri:c,session_state:d,state:e,scope:f},g){super(a?`${b} (${a})`:b),Object.assign(this,{error:b},a&&{error_description:a},c&&{error_uri:c},e&&{state:e},f&&{scope:f},d&&{session_state:d}),g&&Object.defineProperty(this,"response",{value:g}),this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}class f extends Error{constructor(...a){if("string"==typeof a[0])super(d(...a));else{let{message:b,printf:c,response:e,...f}=a[0];c?super(d(...c)):super(b),Object.assign(this,f),e&&Object.defineProperty(this,"response",{value:e})}this.name=this.constructor.name,Error.captureStackTrace(this,this.constructor)}}a.exports={OPError:e,RPError:f}},87593:(a,b,c)=>{"use strict";c.d(b,{j:()=>f,n:()=>e});var d=c(46493);class e extends Error{static [d.i]="DrizzleError";constructor({message:a,cause:b}){super(a),this.name="DrizzleError",this.cause=b}}class f extends e{static [d.i]="TransactionRollbackError";constructor(){super({message:"Rollback"})}}},87635:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generateKeyPair=void 0;let d=c(10445);b.generateKeyPair=async function(a,b){return(0,d.generateKeyPair)(a,b)}},87818:a=>{a.exports=function(a){if(void 0===a)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return a},a.exports.__esModule=!0,a.exports.default=a.exports},87852:(a,b,c)=>{var d=c(35653).default;a.exports=function(a,b){if("object"!=d(a)||!a)return a;var c=a[Symbol.toPrimitive];if(void 0!==c){var e=c.call(a,b||"default");if("object"!=d(e))return e;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)},a.exports.__esModule=!0,a.exports.default=a.exports},88123:(a,b)=>{"use strict";async function c({email:a,adapter:b}){let{getUserByEmail:c}=b,d=a?await c(a):null;return d||{id:a,email:a,emailVerified:null}}Object.defineProperty(b,"__esModule",{value:!0}),b.default=c},88311:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(69817);b.default=function(a){switch(a){case"PS256":case"RS256":case"ES256":case"ES256K":return"sha256";case"PS384":case"RS384":case"ES384":return"sha384";case"PS512":case"RS512":case"ES512":return"sha512";case"EdDSA":return;default:throw new d.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`)}}},88947:a=>{a.exports=function(a){return a&&a.__esModule?a:{default:a}},a.exports.__esModule=!0,a.exports.default=a.exports},89722:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.types=void 0;let d=c(72927),e=c(25066);b.default=a=>(0,e.default)(a)||(0,d.isCryptoKey)(a);let f=["KeyObject"];b.types=f,(globalThis.CryptoKey||(null===d.default||void 0===d.default?void 0:d.default.CryptoKey))&&f.push("CryptoKey")},90049:(a,b,c)=>{"use strict";var d=c(88947);Object.defineProperty(b,"__esModule",{value:!0}),b.default=void 0,b.proxyLogger=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,b=arguments.length>1?arguments[1]:void 0;try{if("undefined"==typeof window)return a;var c={},d=function(a){var d;c[a]=(d=(0,g.default)(e.default.mark(function c(d,g){var h,l;return e.default.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(k[a](d,g),"error"===a&&(g=j(g)),g.client=!0,h="".concat(b,"/_log"),l=new URLSearchParams(function(a){for(var b=1;b<arguments.length;b++){var c=null!=arguments[b]?arguments[b]:{};b%2?i(Object(c),!0).forEach(function(b){(0,f.default)(a,b,c[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(c)):i(Object(c)).forEach(function(b){Object.defineProperty(a,b,Object.getOwnPropertyDescriptor(c,b))})}return a}({level:a,code:d},g)),!navigator.sendBeacon){c.next=8;break}return c.abrupt("return",navigator.sendBeacon(h,l));case 8:return c.next=10,fetch(h,{method:"POST",body:l,keepalive:!0});case 10:return c.abrupt("return",c.sent);case 11:case"end":return c.stop()}},c)})),function(a,b){return d.apply(this,arguments)})};for(var h in a)d(h);return c}catch(a){return k}},b.setLogger=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1?arguments[1]:void 0;b||(k.debug=function(){}),a.error&&(k.error=a.error),a.warn&&(k.warn=a.warn),a.debug&&(k.debug=a.debug)};var e=d(c(47093)),f=d(c(55618)),g=d(c(42)),h=c(65192);function i(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function j(a){var b,c;if(a instanceof Error&&!(a instanceof h.UnknownError))return{message:a.message,stack:a.stack,name:a.name};if(null!=(b=a)&&b.error){a.error=j(a.error),a.message=null!=(c=a.message)?c:a.error.message}return a}var k={error:function(a,b){b=j(b),console.error("[next-auth][error][".concat(a,"]"),"\nhttps://next-auth.js.org/errors#".concat(a.toLowerCase()),b.message,b)},warn:function(a){console.warn("[next-auth][warn][".concat(a,"]"),"\nhttps://next-auth.js.org/warnings#".concat(a.toLowerCase()))},debug:function(a,b){console.log("[next-auth][debug][".concat(a,"]"),b)}};b.default=k},90070:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.decrypt=b.encrypt=void 0;let d=c(28354),e=c(55511),f=c(39469),g=c(74855),h=c(67040),i=c(98781),j=c(27067),k=c(72927),l=c(69978),m=c(25066),n=c(94415),o=c(89722),p=(0,d.promisify)(e.pbkdf2);function q(a,b){if((0,m.default)(a))return a.export();if(a instanceof Uint8Array)return a;if((0,k.isCryptoKey)(a))return(0,l.checkEncCryptoKey)(a,b,"deriveBits","deriveKey"),e.KeyObject.from(a).export();throw TypeError((0,n.default)(a,...o.types,"Uint8Array"))}b.encrypt=async(a,b,c,d=2048,e=(0,f.default)(new Uint8Array(16)))=>{(0,j.default)(e);let k=(0,g.p2s)(a,e),l=parseInt(a.slice(13,16),10)>>3,m=q(b,a),n=await p(m,k,d,l,`sha${a.slice(8,11)}`);return{encryptedKey:await (0,i.wrap)(a.slice(-6),n,c),p2c:d,p2s:(0,h.encode)(e)}},b.decrypt=async(a,b,c,d,e)=>{(0,j.default)(e);let f=(0,g.p2s)(a,e),h=parseInt(a.slice(13,16),10)>>3,k=q(b,a),l=await p(k,f,d,h,`sha${a.slice(8,11)}`);return(0,i.unwrap)(a.slice(-6),l,c)}},90731:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.generateSecret=void 0;let d=c(10445);b.generateSecret=async function(a,b){return(0,d.generateSecret)(a,b)}},90921:(a,b,c)=>{"use strict";c.d(b,{w:()=>f});var d=c(46493),e=c(20862);class f extends e.Ss{static [d.i]="PgViewBase"}},91499:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.cryptoRuntime=b.base64url=b.generateSecret=b.generateKeyPair=b.errors=b.decodeJwt=b.decodeProtectedHeader=b.importJWK=b.importX509=b.importPKCS8=b.importSPKI=b.exportJWK=b.exportSPKI=b.exportPKCS8=b.UnsecuredJWT=b.createRemoteJWKSet=b.createLocalJWKSet=b.EmbeddedJWK=b.calculateJwkThumbprintUri=b.calculateJwkThumbprint=b.EncryptJWT=b.SignJWT=b.GeneralSign=b.FlattenedSign=b.CompactSign=b.FlattenedEncrypt=b.CompactEncrypt=b.jwtDecrypt=b.jwtVerify=b.generalVerify=b.flattenedVerify=b.compactVerify=b.GeneralEncrypt=b.generalDecrypt=b.flattenedDecrypt=b.compactDecrypt=void 0;var d=c(8697);Object.defineProperty(b,"compactDecrypt",{enumerable:!0,get:function(){return d.compactDecrypt}});var e=c(55307);Object.defineProperty(b,"flattenedDecrypt",{enumerable:!0,get:function(){return e.flattenedDecrypt}});var f=c(77356);Object.defineProperty(b,"generalDecrypt",{enumerable:!0,get:function(){return f.generalDecrypt}});var g=c(65560);Object.defineProperty(b,"GeneralEncrypt",{enumerable:!0,get:function(){return g.GeneralEncrypt}});var h=c(85685);Object.defineProperty(b,"compactVerify",{enumerable:!0,get:function(){return h.compactVerify}});var i=c(93883);Object.defineProperty(b,"flattenedVerify",{enumerable:!0,get:function(){return i.flattenedVerify}});var j=c(83498);Object.defineProperty(b,"generalVerify",{enumerable:!0,get:function(){return j.generalVerify}});var k=c(85400);Object.defineProperty(b,"jwtVerify",{enumerable:!0,get:function(){return k.jwtVerify}});var l=c(62564);Object.defineProperty(b,"jwtDecrypt",{enumerable:!0,get:function(){return l.jwtDecrypt}});var m=c(28481);Object.defineProperty(b,"CompactEncrypt",{enumerable:!0,get:function(){return m.CompactEncrypt}});var n=c(93695);Object.defineProperty(b,"FlattenedEncrypt",{enumerable:!0,get:function(){return n.FlattenedEncrypt}});var o=c(98197);Object.defineProperty(b,"CompactSign",{enumerable:!0,get:function(){return o.CompactSign}});var p=c(69531);Object.defineProperty(b,"FlattenedSign",{enumerable:!0,get:function(){return p.FlattenedSign}});var q=c(35254);Object.defineProperty(b,"GeneralSign",{enumerable:!0,get:function(){return q.GeneralSign}});var r=c(29300);Object.defineProperty(b,"SignJWT",{enumerable:!0,get:function(){return r.SignJWT}});var s=c(17152);Object.defineProperty(b,"EncryptJWT",{enumerable:!0,get:function(){return s.EncryptJWT}});var t=c(1945);Object.defineProperty(b,"calculateJwkThumbprint",{enumerable:!0,get:function(){return t.calculateJwkThumbprint}}),Object.defineProperty(b,"calculateJwkThumbprintUri",{enumerable:!0,get:function(){return t.calculateJwkThumbprintUri}});var u=c(66840);Object.defineProperty(b,"EmbeddedJWK",{enumerable:!0,get:function(){return u.EmbeddedJWK}});var v=c(72402);Object.defineProperty(b,"createLocalJWKSet",{enumerable:!0,get:function(){return v.createLocalJWKSet}});var w=c(91671);Object.defineProperty(b,"createRemoteJWKSet",{enumerable:!0,get:function(){return w.createRemoteJWKSet}});var x=c(18923);Object.defineProperty(b,"UnsecuredJWT",{enumerable:!0,get:function(){return x.UnsecuredJWT}});var y=c(94421);Object.defineProperty(b,"exportPKCS8",{enumerable:!0,get:function(){return y.exportPKCS8}}),Object.defineProperty(b,"exportSPKI",{enumerable:!0,get:function(){return y.exportSPKI}}),Object.defineProperty(b,"exportJWK",{enumerable:!0,get:function(){return y.exportJWK}});var z=c(80518);Object.defineProperty(b,"importSPKI",{enumerable:!0,get:function(){return z.importSPKI}}),Object.defineProperty(b,"importPKCS8",{enumerable:!0,get:function(){return z.importPKCS8}}),Object.defineProperty(b,"importX509",{enumerable:!0,get:function(){return z.importX509}}),Object.defineProperty(b,"importJWK",{enumerable:!0,get:function(){return z.importJWK}});var A=c(26077);Object.defineProperty(b,"decodeProtectedHeader",{enumerable:!0,get:function(){return A.decodeProtectedHeader}});var B=c(46762);Object.defineProperty(b,"decodeJwt",{enumerable:!0,get:function(){return B.decodeJwt}}),b.errors=c(69817);var C=c(87635);Object.defineProperty(b,"generateKeyPair",{enumerable:!0,get:function(){return C.generateKeyPair}});var D=c(90731);Object.defineProperty(b,"generateSecret",{enumerable:!0,get:function(){return D.generateSecret}}),b.base64url=c(45592);var E=c(6032);Object.defineProperty(b,"cryptoRuntime",{enumerable:!0,get:function(){return E.default}})},91661:(a,b)=>{"use strict";function c(a,b,c){d(a,b),b.set(a,c)}function d(a,b){if(b.has(a))throw TypeError("Cannot initialize the same private elements twice on an object")}function e(a,b){return a.get(g(a,b))}function f(a,b,c){return a.set(g(a,b),c),c}function g(a,b,c){if("function"==typeof a?a===b:a.has(b))return arguments.length<3?b:c;throw TypeError("Private element is not present on this object")}Object.defineProperty(b,"__esModule",{value:!0}),b.SessionStore=void 0,b.defaultCookies=function(a){let b=a?"__Secure-":"";return{sessionToken:{name:`${b}next-auth.session-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},callbackUrl:{name:`${b}next-auth.callback-url`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},csrfToken:{name:`${a?"__Host-":""}next-auth.csrf-token`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}},pkceCodeVerifier:{name:`${b}next-auth.pkce.code_verifier`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}},state:{name:`${b}next-auth.state`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a,maxAge:900}},nonce:{name:`${b}next-auth.nonce`,options:{httpOnly:!0,sameSite:"lax",path:"/",secure:a}}}};var h=new WeakMap,i=new WeakMap,j=new WeakMap,k=new WeakSet;class l{constructor(a,b,g){!function(a,b){d(a,b),b.add(a)}(this,k),c(this,h,{}),c(this,i,void 0),c(this,j,void 0),f(j,this,g),f(i,this,a);let{cookies:l}=b,{name:m}=a;if("function"==typeof(null==l?void 0:l.getAll))for(let{name:a,value:b}of l.getAll())a.startsWith(m)&&(e(h,this)[a]=b);else if(l instanceof Map)for(let a of l.keys())a.startsWith(m)&&(e(h,this)[a]=l.get(a));else for(let a in l)a.startsWith(m)&&(e(h,this)[a]=l[a])}get value(){return Object.keys(e(h,this)).sort((a,b)=>{var c,d;return parseInt(null!=(c=a.split(".").pop())?c:"0")-parseInt(null!=(d=b.split(".").pop())?d:"0")}).map(a=>e(h,this)[a]).join("")}chunk(a,b){let c=g(k,this,n).call(this);for(let d of g(k,this,m).call(this,{name:e(i,this).name,value:a,options:{...e(i,this).options,...b}}))c[d.name]=d;return Object.values(c)}clean(){return Object.values(g(k,this,n).call(this))}}function m(a){let b=Math.ceil(a.value.length/3933);if(1===b)return e(h,this)[a.name]=a.value,[a];let c=[];for(let d=0;d<b;d++){let b=`${a.name}.${d}`,f=a.value.substr(3933*d,3933);c.push({...a,name:b,value:f}),e(h,this)[b]=f}return e(j,this).debug("CHUNKING_SESSION_COOKIE",{message:"Session cookie exceeds allowed 4096 bytes.",emptyCookieSize:163,valueSize:a.value.length,chunks:c.map(a=>a.value.length+163)}),c}function n(){let a={};for(let c in e(h,this)){var b;null==(b=e(h,this))||delete b[c],a[c]={name:c,value:"",options:{...e(i,this).options,maxAge:0}}}return a}b.SessionStore=l},91671:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.createRemoteJWKSet=void 0;let d=c(45234),e=c(69817),f=c(72402);class g extends f.LocalJWKSet{constructor(a,b){if(super({keys:[]}),this._jwks=void 0,!(a instanceof URL))throw TypeError("url must be an instance of URL");this._url=new URL(a.href),this._options={agent:null==b?void 0:b.agent,headers:null==b?void 0:b.headers},this._timeoutDuration="number"==typeof(null==b?void 0:b.timeoutDuration)?null==b?void 0:b.timeoutDuration:5e3,this._cooldownDuration="number"==typeof(null==b?void 0:b.cooldownDuration)?null==b?void 0:b.cooldownDuration:3e4,this._cacheMaxAge="number"==typeof(null==b?void 0:b.cacheMaxAge)?null==b?void 0:b.cacheMaxAge:6e5}coolingDown(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cooldownDuration}fresh(){return"number"==typeof this._jwksTimestamp&&Date.now()<this._jwksTimestamp+this._cacheMaxAge}async getKey(a,b){this._jwks&&this.fresh()||await this.reload();try{return await super.getKey(a,b)}catch(c){if(c instanceof e.JWKSNoMatchingKey&&!1===this.coolingDown())return await this.reload(),super.getKey(a,b);throw c}}async reload(){this._pendingFetch&&("undefined"!=typeof WebSocketPair||"undefined"!=typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||"undefined"!=typeof EdgeRuntime&&"vercel"===EdgeRuntime)&&(this._pendingFetch=void 0),this._pendingFetch||(this._pendingFetch=(0,d.default)(this._url,this._timeoutDuration,this._options).then(a=>{if(!(0,f.isJWKSLike)(a))throw new e.JWKSInvalid("JSON Web Key Set malformed");this._jwks={keys:a.keys},this._jwksTimestamp=Date.now(),this._pendingFetch=void 0}).catch(a=>{throw this._pendingFetch=void 0,a})),await this._pendingFetch}}b.createRemoteJWKSet=function(a,b){let c=new g(a,b);return async function(a,b){return c.getKey(a,b)}}},91729:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=f;var d=c(65192),e=c(78190);async function f(a){var b,c,f,g,h,i;let{sessionToken:j,profile:k,account:l,options:m}=a;if(!(null!=l&&l.providerAccountId)||!l.type)throw Error("Missing or invalid provider account");if(!["email","oauth"].includes(l.type))throw Error("Provider not supported");let{adapter:n,jwt:o,events:p,session:{strategy:q,generateSessionToken:r}}=m;if(!n)return{user:k,account:l};let{createUser:s,updateUser:t,getUser:u,getUserByAccount:v,getUserByEmail:w,linkAccount:x,createSession:y,getSessionAndUser:z,deleteSession:A}=n,B=null,C=null,D=!1,E="jwt"===q;if(j)if(E)try{(B=await o.decode({...o,token:j}))&&"sub"in B&&B.sub&&(C=await u(B.sub))}catch(a){}else{let a=await z(j);a&&(B=a.session,C=a.user)}if("email"===l.type){let a=await w(k.email);if(a)(null==(b=C)?void 0:b.id)!==a.id&&!E&&j&&await A(j),C=await t({id:a.id,emailVerified:new Date}),await (null==(c=p.updateUser)?void 0:c.call(p,{user:C}));else{let{id:a,...b}={...k,emailVerified:new Date};C=await s(b),await (null==(f=p.createUser)?void 0:f.call(p,{user:C})),D=!0}return{session:B=E?{}:await y({sessionToken:await r(),userId:C.id,expires:(0,e.fromDate)(m.session.maxAge)}),user:C,isNewUser:D}}if("oauth"===l.type){let a=await v({providerAccountId:l.providerAccountId,provider:l.provider});if(a){if(C){if(a.id===C.id)return{session:B,user:C,isNewUser:D};throw new d.AccountNotLinkedError("The account is already associated with another user")}return{session:B=E?{}:await y({sessionToken:await r(),userId:a.id,expires:(0,e.fromDate)(m.session.maxAge)}),user:a,isNewUser:D}}{if(C)return await x({...l,userId:C.id}),await (null==(i=p.linkAccount)?void 0:i.call(p,{user:C,account:l,profile:k})),{session:B,user:C,isNewUser:D};let a=k.email?await w(k.email):null;if(a){let b=m.provider;if(null!=b&&b.allowDangerousEmailAccountLinking)C=a;else throw new d.AccountNotLinkedError("Another account already exists with the same e-mail address")}else{let{id:a,...b}={...k,emailVerified:null};C=await s(b)}return await (null==(g=p.createUser)?void 0:g.call(p,{user:C})),await x({...l,userId:C.id}),await (null==(h=p.linkAccount)?void 0:h.call(p,{user:C,account:l,profile:k})),{session:B=E?{}:await y({sessionToken:await r(),userId:C.id,expires:(0,e.fromDate)(m.session.maxAge)}),user:C,isNewUser:!0}}}throw Error("Unsupported account type")}},91983:(a,b,c)=>{"use strict";c.d(b,{u:()=>g});var d=c(46493),e=c(20862),f=c(93352);class g extends f.pe{static [d.i]="PgDateColumnBaseBuilder";defaultNow(){return this.default((0,e.ll)`now()`)}}},91992:(a,b,c)=>{let d=c(41387);a.exports=function a(b,...c){for(let e of c)if(d(e))for(let[c,f]of Object.entries(e))"__proto__"!==c&&"constructor"!==c&&(d(b[c])&&d(f)?b[c]=a(b[c],f):void 0!==f&&(b[c]=f));return b}},92428:(a,b,c)=>{"use strict";c.d(b,{Hs:()=>n,Ht:()=>i,h_:()=>j,oG:()=>l,ug:()=>m,yY:()=>o});var d=c(80228),e=c(46493),f=c(20862),g=c(7284),h=c(19593);class i{constructor(a){this.table=a}static [e.i]="ColumnAliasProxyHandler";get(a,b){return"table"===b?this.table:a[b]}}class j{constructor(a,b){this.alias=a,this.replaceOriginalName=b}static [e.i]="TableAliasProxyHandler";get(a,b){if(b===g.XI.Symbol.IsAlias)return!0;if(b===g.XI.Symbol.Name||this.replaceOriginalName&&b===g.XI.Symbol.OriginalName)return this.alias;if(b===h.n)return{...a[h.n],name:this.alias,isAlias:!0};if(b===g.XI.Symbol.Columns){let b=a[g.XI.Symbol.Columns];if(!b)return b;let c={};return Object.keys(b).map(d=>{c[d]=new Proxy(b[d],new i(new Proxy(a,this)))}),c}let c=a[b];return(0,e.is)(c,d.V)?new Proxy(c,new i(new Proxy(a,this))):c}}class k{constructor(a){this.alias=a}static [e.i]=null;get(a,b){return"sourceTable"===b?l(a.sourceTable,this.alias):a[b]}}function l(a,b){return new Proxy(a,new j(b,!1))}function m(a,b){return new Proxy(a,new i(new Proxy(a.table,new j(b,!1))))}function n(a,b){return new f.Xs.Aliased(o(a.sql,b),a.fieldAlias)}function o(a,b){return f.ll.join(a.queryChunks.map(a=>(0,e.is)(a,d.V)?m(a,b):(0,e.is)(a,f.Xs)?o(a,b):(0,e.is)(a,f.Xs.Aliased)?n(a,b):a))}},93352:(a,b,c)=>{"use strict";c.d(b,{ae:()=>p,Kl:()=>n,pe:()=>m});var d=c(98046),e=c(80228),f=c(46493),g=c(35071);class h{static [f.i]="PgForeignKeyBuilder";reference;_onUpdate="no action";_onDelete="no action";constructor(a,b){this.reference=()=>{let{name:b,columns:c,foreignColumns:d}=a();return{name:b,columns:c,foreignTable:d[0].table,foreignColumns:d}},b&&(this._onUpdate=b.onUpdate,this._onDelete=b.onDelete)}onUpdate(a){return this._onUpdate=void 0===a?"no action":a,this}onDelete(a){return this._onDelete=void 0===a?"no action":a,this}build(a){return new i(a,this)}}class i{constructor(a,b){this.table=a,this.reference=b.reference,this.onUpdate=b._onUpdate,this.onDelete=b._onDelete}static [f.i]="PgForeignKey";reference;onUpdate;onDelete;getName(){let{name:a,columns:b,foreignColumns:c}=this.reference(),d=b.map(a=>a.name),e=c.map(a=>a.name),f=[this.table[g.E],...d,c[0].table[g.E],...e];return a??`${f.join("_")}_fk`}}var j=c(47878),k=c(72965);function l(a,b,c){for(let d=b;d<a.length;d++){let e=a[d];if("\\"===e){d++;continue}if('"'===e)return[a.slice(b,d).replace(/\\/g,""),d+1];if(!c&&(","===e||"}"===e))return[a.slice(b,d).replace(/\\/g,""),d]}return[a.slice(b).replace(/\\/g,""),a.length]}class m extends d.Q{foreignKeyConfigs=[];static [f.i]="PgColumnBuilder";array(a){return new q(this.config.name,this,a)}references(a,b={}){return this.foreignKeyConfigs.push({ref:a,actions:b}),this}unique(a,b){return this.config.isUnique=!0,this.config.uniqueName=a,this.config.uniqueType=b?.nulls,this}generatedAlwaysAs(a){return this.config.generated={as:a,type:"always",mode:"stored"},this}buildForeignKeys(a,b){return this.foreignKeyConfigs.map(({ref:c,actions:d})=>(0,j.i)((c,d)=>{let e=new h(()=>({columns:[a],foreignColumns:[c()]}));return d.onUpdate&&e.onUpdate(d.onUpdate),d.onDelete&&e.onDelete(d.onDelete),e.build(b)},c,d))}buildExtraConfigColumn(a){return new o(a,this.config)}}class n extends e.V{constructor(a,b){b.uniqueName||(b.uniqueName=(0,k.Wx)(a,[b.name])),super(a,b),this.table=a}static [f.i]="PgColumn"}class o extends n{static [f.i]="ExtraConfigColumn";getSQLType(){return this.getSQLType()}indexConfig={order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass};defaultConfig={order:"asc",nulls:"last",opClass:void 0};asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(a){return this.indexConfig.opClass=a,this}}class p{static [f.i]="IndexedColumn";constructor(a,b,c,d){this.name=a,this.keyAsName=b,this.type=c,this.indexConfig=d}name;keyAsName;type;indexConfig}class q extends m{static [f.i]="PgArrayBuilder";constructor(a,b,c){super(a,"array","PgArray"),this.config.baseBuilder=b,this.config.size=c}build(a){let b=this.config.baseBuilder.build(a);return new r(a,this.config,b)}}class r extends n{constructor(a,b,c,d){super(a,b),this.baseColumn=c,this.range=d,this.size=b.size}size;static [f.i]="PgArray";getSQLType(){return`${this.baseColumn.getSQLType()}[${"number"==typeof this.size?this.size:""}]`}mapFromDriverValue(a){return"string"==typeof a&&(a=function(a){let[b]=function a(b,c=0){let d=[],e=c,f=!1;for(;e<b.length;){let g=b[e];if(","===g){(f||e===c)&&d.push(""),f=!0,e++;continue}if(f=!1,"\\"===g){e+=2;continue}if('"'===g){let[a,c]=l(b,e+1,!0);d.push(a),e=c;continue}if("}"===g)return[d,e+1];if("{"===g){let[c,f]=a(b,e+1);d.push(c),e=f;continue}let[h,i]=l(b,e,!1);d.push(h),e=i}return[d,e]}(a,1);return b}(a)),a.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(a,b=!1){let c=a.map(a=>null===a?null:(0,f.is)(this.baseColumn,r)?this.baseColumn.mapToDriverValue(a,!0):this.baseColumn.mapToDriverValue(a));return b?c:function a(b){return`{${b.map(b=>Array.isArray(b)?a(b):"string"==typeof b?`"${b.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${b}`).join(",")}}`}(c)}}},93695:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.FlattenedEncrypt=b.unprotected=void 0;let d=c(67040),e=c(18013),f=c(50023),g=c(95032),h=c(70338),i=c(69817),j=c(1842),k=c(74855),l=c(53268);b.unprotected=Symbol();class m{constructor(a){if(!(a instanceof Uint8Array))throw TypeError("plaintext must be an instance of Uint8Array");this._plaintext=a}setKeyManagementParameters(a){if(this._keyManagementParameters)throw TypeError("setKeyManagementParameters can only be called once");return this._keyManagementParameters=a,this}setProtectedHeader(a){if(this._protectedHeader)throw TypeError("setProtectedHeader can only be called once");return this._protectedHeader=a,this}setSharedUnprotectedHeader(a){if(this._sharedUnprotectedHeader)throw TypeError("setSharedUnprotectedHeader can only be called once");return this._sharedUnprotectedHeader=a,this}setUnprotectedHeader(a){if(this._unprotectedHeader)throw TypeError("setUnprotectedHeader can only be called once");return this._unprotectedHeader=a,this}setAdditionalAuthenticatedData(a){return this._aad=a,this}setContentEncryptionKey(a){if(this._cek)throw TypeError("setContentEncryptionKey can only be called once");return this._cek=a,this}setInitializationVector(a){if(this._iv)throw TypeError("setInitializationVector can only be called once");return this._iv=a,this}async encrypt(a,c){let m,n,o,p,q,r,s;if(!this._protectedHeader&&!this._unprotectedHeader&&!this._sharedUnprotectedHeader)throw new i.JWEInvalid("either setProtectedHeader, setUnprotectedHeader, or sharedUnprotectedHeader must be called before #encrypt()");if(!(0,j.default)(this._protectedHeader,this._unprotectedHeader,this._sharedUnprotectedHeader))throw new i.JWEInvalid("JWE Protected, JWE Shared Unprotected and JWE Per-Recipient Header Parameter names must be disjoint");let t={...this._protectedHeader,...this._unprotectedHeader,...this._sharedUnprotectedHeader};if((0,l.default)(i.JWEInvalid,new Map,null==c?void 0:c.crit,this._protectedHeader,t),void 0!==t.zip){if(!this._protectedHeader||!this._protectedHeader.zip)throw new i.JWEInvalid('JWE "zip" (Compression Algorithm) Header MUST be integrity protected');if("DEF"!==t.zip)throw new i.JOSENotSupported('Unsupported JWE "zip" (Compression Algorithm) Header Parameter value')}let{alg:u,enc:v}=t;if("string"!=typeof u||!u)throw new i.JWEInvalid('JWE "alg" (Algorithm) Header Parameter missing or invalid');if("string"!=typeof v||!v)throw new i.JWEInvalid('JWE "enc" (Encryption Algorithm) Header Parameter missing or invalid');if("dir"===u){if(this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Encryption")}else if("ECDH-ES"===u&&this._cek)throw TypeError("setContentEncryptionKey cannot be called when using Direct Key Agreement");{let d;({cek:n,encryptedKey:m,parameters:d}=await (0,h.default)(u,v,a,this._cek,this._keyManagementParameters)),d&&(c&&b.unprotected in c?this._unprotectedHeader?this._unprotectedHeader={...this._unprotectedHeader,...d}:this.setUnprotectedHeader(d):this._protectedHeader?this._protectedHeader={...this._protectedHeader,...d}:this.setProtectedHeader(d))}if(this._iv||(this._iv=(0,g.default)(v)),p=this._protectedHeader?k.encoder.encode((0,d.encode)(JSON.stringify(this._protectedHeader))):k.encoder.encode(""),this._aad?(q=(0,d.encode)(this._aad),o=(0,k.concat)(p,k.encoder.encode("."),k.encoder.encode(q))):o=p,"DEF"===t.zip){let a=await ((null==c?void 0:c.deflateRaw)||f.deflate)(this._plaintext);({ciphertext:r,tag:s}=await (0,e.default)(v,a,n,this._iv,o))}else({ciphertext:r,tag:s}=await (0,e.default)(v,this._plaintext,n,this._iv,o));let w={ciphertext:(0,d.encode)(r),iv:(0,d.encode)(this._iv),tag:(0,d.encode)(s)};return m&&(w.encrypted_key=(0,d.encode)(m)),q&&(w.aad=q),this._protectedHeader&&(w.protected=k.decoder.decode(p)),this._sharedUnprotectedHeader&&(w.unprotected=this._sharedUnprotectedHeader),this._unprotectedHeader&&(w.header=this._unprotectedHeader),w}}b.FlattenedEncrypt=m},93830:(a,b,c)=>{let d=c(1796);a.exports=a=>{if("string"!=typeof a||!a)throw TypeError("JWT must be a string");let{0:b,1:c,2:e,length:f}=a.split(".");if(5===f)throw TypeError("encrypted JWTs cannot be decoded");if(3!==f)throw Error("JWTs must have three components");try{return{header:JSON.parse(d.decode(b)),payload:JSON.parse(d.decode(c)),signature:e}}catch(a){throw Error("JWT is malformed")}}},93883:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.flattenedVerify=void 0;let d=c(67040),e=c(51959),f=c(69817),g=c(74855),h=c(1842),i=c(16217),j=c(84634),k=c(53268),l=c(35642);b.flattenedVerify=async function(a,b,c){var m;let n,o;if(!(0,i.default)(a))throw new f.JWSInvalid("Flattened JWS must be an object");if(void 0===a.protected&&void 0===a.header)throw new f.JWSInvalid('Flattened JWS must have either of the "protected" or "header" members');if(void 0!==a.protected&&"string"!=typeof a.protected)throw new f.JWSInvalid("JWS Protected Header incorrect type");if(void 0===a.payload)throw new f.JWSInvalid("JWS Payload missing");if("string"!=typeof a.signature)throw new f.JWSInvalid("JWS Signature missing or incorrect type");if(void 0!==a.header&&!(0,i.default)(a.header))throw new f.JWSInvalid("JWS Unprotected Header incorrect type");let p={};if(a.protected)try{let b=(0,d.decode)(a.protected);p=JSON.parse(g.decoder.decode(b))}catch{throw new f.JWSInvalid("JWS Protected Header is invalid")}if(!(0,h.default)(p,a.header))throw new f.JWSInvalid("JWS Protected and JWS Unprotected Header Parameter names must be disjoint");let q={...p,...a.header},r=(0,k.default)(f.JWSInvalid,new Map([["b64",!0]]),null==c?void 0:c.crit,p,q),s=!0;if(r.has("b64")&&"boolean"!=typeof(s=p.b64))throw new f.JWSInvalid('The "b64" (base64url-encode payload) Header Parameter must be a boolean');let{alg:t}=q;if("string"!=typeof t||!t)throw new f.JWSInvalid('JWS "alg" (Algorithm) Header Parameter missing or invalid');let u=c&&(0,l.default)("algorithms",c.algorithms);if(u&&!u.has(t))throw new f.JOSEAlgNotAllowed('"alg" (Algorithm) Header Parameter not allowed');if(s){if("string"!=typeof a.payload)throw new f.JWSInvalid("JWS Payload must be a string")}else if("string"!=typeof a.payload&&!(a.payload instanceof Uint8Array))throw new f.JWSInvalid("JWS Payload must be a string or an Uint8Array instance");let v=!1;"function"==typeof b&&(b=await b(p,a),v=!0),(0,j.default)(t,b,"verify");let w=(0,g.concat)(g.encoder.encode(null!=(m=a.protected)?m:""),g.encoder.encode("."),"string"==typeof a.payload?g.encoder.encode(a.payload):a.payload);try{n=(0,d.decode)(a.signature)}catch{throw new f.JWSInvalid("Failed to base64url decode the signature")}if(!await (0,e.default)(t,b,n,w))throw new f.JWSSignatureVerificationFailed;if(s)try{o=(0,d.decode)(a.payload)}catch{throw new f.JWSInvalid("Failed to base64url decode the payload")}else o="string"==typeof a.payload?g.encoder.encode(a.payload):a.payload;let x={payload:o};return(void 0!==a.protected&&(x.protectedHeader=p),void 0!==a.header&&(x.unprotectedHeader=a.header),v)?{...x,key:b}:x}},94211:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let d=c(55511);b.default=(a,b,c,e,f)=>{let g=parseInt(a.substr(3),10)>>3||20,h=(0,d.createHmac)(a,c.byteLength?c:new Uint8Array(g)).update(b).digest(),i=Math.ceil(f/g),j=new Uint8Array(g*i+e.byteLength+1),k=0,l=0;for(let b=1;b<=i;b++)j.set(e,l),j[l+e.byteLength]=b,j.set((0,d.createHmac)(a,h).update(j.subarray(k,l+e.byteLength+1)).digest(),l),k=l,l+=g;return j.slice(0,f)}},94415:(a,b)=>{"use strict";function c(a,b,...d){if(d.length>2){let b=d.pop();a+=`one of type ${d.join(", ")}, or ${b}.`}else 2===d.length?a+=`one of type ${d[0]} or ${d[1]}.`:a+=`of type ${d[0]}.`;return null==b?a+=` Received ${b}`:"function"==typeof b&&b.name?a+=` Received function ${b.name}`:"object"==typeof b&&null!=b&&b.constructor&&b.constructor.name&&(a+=` Received an instance of ${b.constructor.name}`),a}Object.defineProperty(b,"__esModule",{value:!0}),b.withAlg=void 0,b.default=(a,...b)=>c("Key must be ",a,...b),b.withAlg=function(a,b,...d){return c(`Key for the ${a} algorithm must be `,b,...d)}},94421:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.exportJWK=b.exportPKCS8=b.exportSPKI=void 0;let d=c(6683),e=c(6683),f=c(83820);b.exportSPKI=async function(a){return(0,d.toSPKI)(a)},b.exportPKCS8=async function(a){return(0,e.toPKCS8)(a)},b.exportJWK=async function(a){return(0,f.default)(a)}},94728:(a,b,c)=>{"use strict";c.d(b,{Fx:()=>h,kn:()=>g});var d=c(46493),e=c(93352);class f extends e.pe{static [d.i]="PgJsonbBuilder";constructor(a){super(a,"json","PgJsonb")}build(a){return new g(a,this.config)}}class g extends e.Kl{static [d.i]="PgJsonb";constructor(a,b){super(a,b)}getSQLType(){return"jsonb"}mapToDriverValue(a){return JSON.stringify(a)}mapFromDriverValue(a){if("string"==typeof a)try{return JSON.parse(a)}catch{}return a}}function h(a){return new f(a??"")}},94758:(a,b,c)=>{var d=c(28665);function e(a,b){for(var c=0;c<b.length;c++){var e=b[c];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(a,d(e.key),e)}}a.exports=function(a,b,c){return b&&e(a.prototype,b),c&&e(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a},a.exports.__esModule=!0,a.exports.default=a.exports},95032:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.bitLength=void 0;let d=c(69817),e=c(39469);function f(a){switch(a){case"A128GCM":case"A128GCMKW":case"A192GCM":case"A192GCMKW":case"A256GCM":case"A256GCMKW":return 96;case"A128CBC-HS256":case"A192CBC-HS384":case"A256CBC-HS512":return 128;default:throw new d.JOSENotSupported(`Unsupported JWE Algorithm: ${a}`)}}b.bitLength=f,b.default=a=>(0,e.default)(new Uint8Array(f(a)>>3))},95736:(a,b,c)=>{"use strict";a.exports=c(44870)},96176:(a,b,c)=>{"use strict";c.d(b,{J:()=>f,n:()=>e});var d=c(46493);class e{static [d.i]="Subquery";constructor(a,b,c,d=!1){this._={brand:"Subquery",sql:a,selectedFields:b,alias:c,isWith:d}}}class f extends e{static [d.i]="WithSubquery"}},96434:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0})},97272:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default="node:crypto"},97666:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){var b;let{url:c,error:e="default",theme:f}=a,g=`${c}/signin`,h={default:{status:200,heading:"Error",message:(0,d.h)("p",null,(0,d.h)("a",{className:"site",href:null==c?void 0:c.origin},null==c?void 0:c.host))},configuration:{status:500,heading:"Server error",message:(0,d.h)("div",null,(0,d.h)("p",null,"There is a problem with the server configuration."),(0,d.h)("p",null,"Check the server logs for more information."))},accessdenied:{status:403,heading:"Access Denied",message:(0,d.h)("div",null,(0,d.h)("p",null,"You do not have permission to sign in."),(0,d.h)("p",null,(0,d.h)("a",{className:"button",href:g},"Sign in")))},verification:{status:403,heading:"Unable to sign in",message:(0,d.h)("div",null,(0,d.h)("p",null,"The sign in link is no longer valid."),(0,d.h)("p",null,"It may have been used already or it may have expired.")),signin:(0,d.h)("a",{className:"button",href:g},"Sign in")}},{status:i,heading:j,message:k,signin:l}=null!=(b=h[e.toLowerCase()])?b:h.default;return{status:i,html:(0,d.h)("div",{className:"error"},(null==f?void 0:f.brandColor)&&(0,d.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${null==f?void 0:f.brandColor}
        }
      `}}),(0,d.h)("div",{className:"card"},(null==f?void 0:f.logo)&&(0,d.h)("img",{src:f.logo,alt:"Logo",className:"logo"}),(0,d.h)("h1",null,j),(0,d.h)("div",{className:"message"},k),l))}};var d=c(21274)},97967:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){let{url:b,csrfToken:c,theme:e}=a;return(0,d.h)("div",{className:"signout"},e.brandColor&&(0,d.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --brand-color: ${e.brandColor}
        }
      `}}),e.buttonText&&(0,d.h)("style",{dangerouslySetInnerHTML:{__html:`
        :root {
          --button-text-color: ${e.buttonText}
        }
      `}}),(0,d.h)("div",{className:"card"},e.logo&&(0,d.h)("img",{src:e.logo,alt:"Logo",className:"logo"}),(0,d.h)("h1",null,"Signout"),(0,d.h)("p",null,"Are you sure you want to sign out?"),(0,d.h)("form",{action:`${b}/signout`,method:"POST"},(0,d.h)("input",{type:"hidden",name:"csrfToken",value:c}),(0,d.h)("button",{id:"submitButton",type:"submit"},"Sign out"))))};var d=c(21274)},98046:(a,b,c)=>{"use strict";c.d(b,{Q:()=>e});var d=c(46493);class e{static [d.i]="ColumnBuilder";config;constructor(a,b,c){this.config={name:a,keyAsName:""===a,notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:b,columnType:c,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(a){return this.config.default=a,this.config.hasDefault=!0,this}$defaultFn(a){return this.config.defaultFn=a,this.config.hasDefault=!0,this}$default=this.$defaultFn;$onUpdateFn(a){return this.config.onUpdateFn=a,this.config.hasDefault=!0,this}$onUpdate=this.$onUpdateFn;primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(a){""===this.config.name&&(this.config.name=a)}}},98197:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.CompactSign=void 0;let d=c(69531);class e{constructor(a){this._flattened=new d.FlattenedSign(a)}setProtectedHeader(a){return this._flattened.setProtectedHeader(a),this}async sign(a,b){let c=await this._flattened.sign(a,b);if(void 0===c.payload)throw TypeError("use the flattened module for creating JWS with b64: false");return`${c.protected}.${c.payload}.${c.signature}`}}b.CompactSign=e},98278:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.default=function(a){var b;let c=new URL("http://localhost:3000/api/auth");a&&!a.startsWith("http")&&(a=`https://${a}`);let d=new URL(null!=(b=a)?b:c),e=("/"===d.pathname?c.pathname:d.pathname).replace(/\/$/,""),f=`${d.origin}${e}`;return{origin:d.origin,host:d.host,path:e,base:f,toString:()=>f}}},98781:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.unwrap=b.wrap=void 0;let d=c(79428),e=c(55511),f=c(69817),g=c(74855),h=c(72927),i=c(69978),j=c(25066),k=c(94415),l=c(11192),m=c(89722);function n(a,b){if(a.symmetricKeySize<<3!==parseInt(b.slice(1,4),10))throw TypeError(`Invalid key size for alg: ${b}`)}function o(a,b,c){if((0,j.default)(a))return a;if(a instanceof Uint8Array)return(0,e.createSecretKey)(a);if((0,h.isCryptoKey)(a))return(0,i.checkEncCryptoKey)(a,b,c),e.KeyObject.from(a);throw TypeError((0,k.default)(a,...m.types,"Uint8Array"))}b.wrap=(a,b,c)=>{let h=parseInt(a.slice(1,4),10),i=`aes${h}-wrap`;if(!(0,l.default)(i))throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`);let j=o(b,a,"wrapKey");n(j,a);let k=(0,e.createCipheriv)(i,j,d.Buffer.alloc(8,166));return(0,g.concat)(k.update(c),k.final())},b.unwrap=(a,b,c)=>{let h=parseInt(a.slice(1,4),10),i=`aes${h}-wrap`;if(!(0,l.default)(i))throw new f.JOSENotSupported(`alg ${a} is not supported either by JOSE or your javascript runtime`);let j=o(b,a,"unwrapKey");n(j,a);let k=(0,e.createDecipheriv)(i,j,d.Buffer.alloc(8,166));return(0,g.concat)(k.update(c),k.final())}},99064:(a,b,c)=>{let d=c(1796),e=c(65859);class f{constructor(a){Object.assign(this,a);let{constructor:b,...c}=Object.getOwnPropertyDescriptors(this.constructor.prototype);Object.defineProperties(this,c)}set expires_in(a){this.expires_at=e()+Number(a)}get expires_in(){return Math.max.apply(null,[this.expires_at-e(),0])}expired(){return 0===this.expires_in}claims(){if(!this.id_token)throw TypeError("id_token not present in TokenSet");return JSON.parse(d.decode(this.id_token.split(".")[1]))}}a.exports=f},99224:a=>{a.exports=function(a){var b=Object(a),c=[];for(var d in b)c.unshift(d);return function a(){for(;c.length;)if((d=c.pop())in b)return a.value=d,a.done=!1,a;return a.done=!0,a}},a.exports.__esModule=!0,a.exports.default=a.exports}};